import{a as ue,b as ge,c as he,d as ve,e as ye,f as Ce,g as _e,h}from"./chunk-SDRSREMU.js";import{a as le,b as de,c as ce,d as fe}from"./chunk-VSFJDVD2.js";import{a as B}from"./chunk-ISOQKGNC.js";import{A as Y,B as Z,Dc as se,E as g,G as ee,L as te,O as ie,T as oe,Ua as re,ab as ae,k as A,l as J,lb as y,o as k,qb as ne,rb as pe,x as K,xb as me,y as Q,z as X}from"./chunk-X2K52VJG.js";import{Ca as t,Da as u,Ib as R,Nb as d,Nc as H,Ob as c,P as U,Pc as N,Q as V,Qa as x,Qc as z,Sa as o,Sc as j,Vc as D,Z as T,ab as n,bb as p,c as q,cb as s,da as f,ea as M,h as I,j as $,jb as b,kc as L,nb as E,nc as O,q as G,vc as W,wb as P,yb as w}from"./chunk-V4SAOAZP.js";import"./chunk-CWTPBX7D.js";var xe=()=>["/page/create"];function Ee(a,e){a&1&&(n(0,"div",3)(1,"a",4),s(2,"i",5),P(3),d(4,"translate"),p()()),a&2&&(t(),o("routerLink",R(4,xe)),t(2),w(" ",c(4,2,"add_page")," "))}var C=class C{constructor(e,m){this.store=e,this.router=m,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"page.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"page.destroy"}],data:[],total:0}}ngOnInit(){this.page$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new ue(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"&&this.deleteAll(e.data)}edit(e){this.router.navigateByUrl(`/page/edit/${e.id}`)}status(e){this.store.dispatch(new ye(e.id,e.status))}delete(e){this.store.dispatch(new Ce(e.id))}deleteAll(e){this.store.dispatch(new _e(e))}};C.\u0275fac=function(m){return new(m||C)(u(A),u(N))},C.\u0275cmp=f({type:C,selectors:[["app-page"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(m,i){m&1&&(n(0,"app-page-wrapper",0),x(1,Ee,5,5,"div",1),n(2,"app-table",2),b("tableChanged",function(l){return i.onTableChange(l)})("rowClicked",function(l){return i.edit(l)})("action",function(l){return i.onActionClicked(l)}),p()()),m&2&&(o("gridClass","col-sm-12")("title","pages"),t(),o("hasPermission","page.create"),t(),o("tableConfig",i.tableConfig)("hasCheckbox",!0))},dependencies:[z,ne,y,ae,D]});var S=C;I([k(h.page)],S.prototype,"page$",void 0);function Ne(a,e){a&1&&(n(0,"div",15),P(1),d(2,"translate"),p()),a&2&&(t(),w(" ",c(2,1,"title_is_required")," "))}var _=class _{constructor(e,m,i,r){this.store=e,this.route=m,this.router=i,this.formBuilder=r,this.destroy$=new q,this.html="",this.form=this.formBuilder.group({title:new g("",[X.required]),content:new g,meta_title:new g,meta_description:new g,page_meta_image_id:new g,status:new g(1)})}ngOnInit(){this.route.params.pipe(U(e=>e.id?this.store.dispatch(new he(e.id)).pipe(G(()=>this.store.select(h.selectedPage))):$()),V(this.destroy$)).subscribe(e=>{this.id=e?.id,this.form.patchValue({title:e?.title,content:e?.content,meta_title:e?.meta_title,meta_description:e?.meta_description,status:e?.status})}),this.editor=new fe}selectMetaImage(e){Array.isArray(e)||this.form.controls.page_meta_image_id.setValue(e?e.id:null)}submit(){this.form.markAllAsTouched();let e=new ge(this.form.value);this.type=="edit"&&this.id&&(e=new ve(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/page")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};_.\u0275fac=function(m){return new(m||_)(u(A),u(H),u(N),u(oe))},_.\u0275cmp=f({type:_,selectors:[["app-form-page"]],inputs:{type:"type"},decls:26,vars:42,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"custom-editor"],[3,"editor"],["formControlName","content",3,"editor","ngModel","disabled","placeholder"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","multipleImage","image"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"]],template:function(m,i){if(m&1&&(n(0,"form",0),b("ngSubmit",function(){return i.submit()}),n(1,"app-form-fields",1),s(2,"input",2),d(3,"translate"),x(4,Ne,3,3,"div",3),p(),n(5,"app-form-fields",1)(6,"div",4),s(7,"ngx-editor-menu",5)(8,"ngx-editor",6),p()(),n(9,"app-form-fields",1),s(10,"input",7),d(11,"translate"),p(),n(12,"app-form-fields",1),s(13,"textarea",8),d(14,"translate"),p(),n(15,"app-form-fields",1)(16,"app-image-upload",9),d(17,"async"),b("selectedFiles",function(l){return i.selectMetaImage(l)}),p()(),n(18,"app-form-fields",1)(19,"div",10)(20,"label",11),s(21,"input",12)(22,"span",13),p()()(),n(23,"app-button",14),P(24),d(25,"translate"),p()()),m&2){let r;o("formGroup",i.form),t(),o("label","title")("for","title")("required",!0),t(),E("placeholder",c(3,32,"enter_title")),t(2),o("ngIf",i.form.controls.title.touched&&(i.form.controls.title.errors==null?null:i.form.controls.title.errors.required)),t(),o("label","content")("for","content")("required",!1),t(2),o("editor",i.editor),t(),o("editor",i.editor)("ngModel",i.html)("disabled",!1)("placeholder","Type here..."),t(),o("label","meta_title")("for","metatitle")("required",!1),t(),E("placeholder",c(11,34,"enter_meta_title")),t(2),o("label","meta_description")("for","desc")("required",!1),t(),E("placeholder",c(14,36,"enter_meta_description")),t(2),o("label","meta_image")("for","meta_image")("required",!1),t(),o("multipleImage",!1)("image",(r=c(17,38,i.page$))==null?null:r.page_meta_image),t(2),o("label","Status")("for","status")("required",!1),t(5),o("id","page_btn"),t(),w(" ",c(25,40,i.type=="create"?"save_page":"update_page")," ")}},dependencies:[L,ee,Q,K,Y,Z,te,ie,pe,me,re,le,de,O,D]});var v=_;I([k(h.selectedPage)],v.prototype,"page$",void 0);var we=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=f({type:e,selectors:[["app-create-page"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,l){r&1&&(n(0,"app-page-wrapper",0),s(1,"app-form-page",1),p()),r&2&&(o("title","create_page"),t(),o("type","create"))},dependencies:[y,v]});let a=e;return a})();var Se=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=f({type:e,selectors:[["app-edit-page"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,l){r&1&&(n(0,"app-page-wrapper",0),s(1,"app-form-page",1),p()),r&2&&(o("title","update_page"),t(),o("type","edit"))},dependencies:[y,v]});let a=e;return a})();var Ae=[{path:"",component:S,canActivate:[B],data:{permission:"page.index"}},{path:"create",component:we,canActivate:[B],data:{permission:["page.index","page.create"]}},{path:"edit/:id",component:Se,canActivate:[B],data:{permission:["page.index","page.edit"]}}],Fe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=M({type:e}),e.\u0275inj=T({imports:[j.forChild(Ae),j]});let a=e;return a})();var Pt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=M({type:e}),e.\u0275inj=T({imports:[W,Fe,se,J.forFeature([h]),ce]});let a=e;return a})();export{Pt as PageModule};
