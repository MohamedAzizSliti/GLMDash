import{a as we,b as Ie,c as Se,d as Fe}from"./chunk-4JWO7LR3.js";import{a as Be}from"./chunk-Q7NGHVH4.js";import{a as ke,b as De,c as qe}from"./chunk-HYJHYMK4.js";import{a as Ee,b as Me,c as Ae,d as xe}from"./chunk-VSFJDVD2.js";import{a as ye,b as he,c as _e,d as ve,e as be,f as Ce,g as Te,h as B}from"./chunk-GSBKFZ7D.js";import{a as y}from"./chunk-ISOQKGNC.js";import{A as ee,B as te,Dc as ue,E as g,G as ie,Gb as ce,L as oe,Mb as fe,O as re,T as ne,Ua as ae,ab as pe,ic as ge,k as P,l as X,lb as F,o as S,qb as le,rb as se,x as Y,xb as me,y as Z,yb as de,z as V}from"./chunk-X2K52VJG.js";import{Ca as n,Da as _,Ib as x,Nb as m,Nc as J,Ob as d,P as L,Pc as N,Q as W,Qa as I,Qc as Q,Sa as r,Sc as j,Vc as $,Z as D,ab as a,bb as p,c as O,cb as l,da as c,ea as q,h as w,j as U,jb as v,kc as K,nb as b,nc as H,q as R,vc as z,wb as C,yb as T}from"./chunk-V4SAOAZP.js";import"./chunk-CWTPBX7D.js";var Je=()=>["/blog/create"];function Qe(o,e){o&1&&(a(0,"div",3)(1,"a",4),l(2,"i",5),C(3),m(4,"translate"),p()()),o&2&&(n(),r("routerLink",x(4,Je)),n(2),T(" ",d(4,2,"add_blog")," "))}var E=class E{constructor(e,f){this.store=e,this.router=f,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"blog.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"blog.destroy"}],data:[],total:0}}ngOnInit(){this.blog$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new ye(e)).subscribe()}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"&&this.deleteAll(e.data)}edit(e){this.router.navigateByUrl(`/blog/edit/${e.id}`)}status(e){this.store.dispatch(new be(e.id,e.status))}delete(e){this.store.dispatch(new Ce(e.id))}deleteAll(e){this.store.dispatch(new Te(e))}};E.\u0275fac=function(f){return new(f||E)(_(P),_(N))},E.\u0275cmp=c({type:E,selectors:[["app-blog"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(f,i){f&1&&(a(0,"app-page-wrapper",0),I(1,Qe,5,5,"div",1),a(2,"app-table",2),v("tableChanged",function(s){return i.onTableChange(s)})("rowClicked",function(s){return i.edit(s)})("action",function(s){return i.onActionClicked(s)}),p()()),f&2&&(r("gridClass","col-sm-12")("title","blog"),n(),r("hasPermission","blog.create"),n(),r("tableConfig",i.tableConfig)("hasCheckbox",!0))},dependencies:[Q,le,F,pe,$]});var k=E;w([S(B.blog)],k.prototype,"blog$",void 0);var Pe=()=>[];function Xe(o,e){o&1&&(a(0,"div",20),C(1),m(2,"translate"),p()),o&2&&(n(),T(" ",d(2,1,"title_is_required")," "))}function Ye(o,e){o&1&&(a(0,"div",20),C(1),m(2,"translate"),p()),o&2&&(n(),T(" ",d(2,1,"thumbnail_is_required")," "))}function Ze(o,e){o&1&&(a(0,"div",20),C(1),m(2,"translate"),p()),o&2&&(n(),T(" ",d(2,1,"select_category_is_required")," "))}var M=class M{constructor(e,f,i,t){this.store=e,this.route=f,this.router=i,this.formBuilder=t,this.selectedCategories=[],this.selectedTags=[],this.html="",this.destroy$=new O,this.store.dispatch(new ce({type:"post"})),this.store.dispatch(new ge({type:"post"})),this.form=this.formBuilder.group({title:new g("",[V.required]),description:new g,content:new g,meta_title:new g,meta_description:new g,blog_thumbnail_id:new g("",[V.required]),blog_meta_image_id:new g(""),categories:new g,tags:new g,is_featured:new g(0),is_sticky:new g(0),status:new g(1)})}ngOnInit(){this.route.params.pipe(L(e=>e.id?this.store.dispatch(new _e(e.id)).pipe(R(()=>this.store.select(B.selectedBlog))):U()),W(this.destroy$)).subscribe(e=>{this.id=e?.id,this.selectedCategories=e?.categories.map(f=>f?.id),this.selectedTags=e?.tags.map(f=>f?.id),this.form.patchValue({title:e?.title,description:e?.description,content:e?.content,blog_thumbnail_id:e?.blog_thumbnail_id,categories:this.selectedCategories,tags:this.selectedTags,blog_meta_image_id:e?.blog_meta_image_id,meta_title:e?.meta_title,meta_description:e?.meta_description,is_featured:e?.is_featured,is_sticky:e?.is_sticky,status:e?.status})}),this.editor=new xe}selectThumbnail(e){Array.isArray(e)||this.form.controls.blog_thumbnail_id.setValue(e?e.id:"")}selectMetaImage(e){Array.isArray(e)||this.form.controls.blog_meta_image_id.setValue(e?e.id:null)}selectCategoryItem(e){Array.isArray(e)&&this.form.controls.categories.setValue(e)}selectTagItem(e){Array.isArray(e)&&this.form.controls.tags.setValue(e)}submit(){this.form.markAllAsTouched();let e=new he(this.form.value);this.type=="edit"&&this.id&&(e=new ve(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/blog")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};M.\u0275fac=function(f){return new(f||M)(_(P),_(J),_(N),_(ne))},M.\u0275cmp=c({type:M,selectors:[["app-form-blog"]],inputs:{type:"type"},decls:58,vars:98,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[1,"custom-editor"],[3,"editor"],["formControlName","content",3,"editor","ngModel","disabled","placeholder"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","multipleImage","image"],[3,"selectedItem","position","selectedOption","options","subArrayKey"],[3,"selectedItem","position","selectedOption","options"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","is_featured","formControlName","is_featured"],[1,"switch-state"],["type","checkbox","id","is_sticky","formControlName","is_sticky"],["type","checkbox","id","status","formControlName","status"],[3,"id"],[1,"invalid-feedback"]],template:function(f,i){if(f&1&&(a(0,"form",0),v("ngSubmit",function(){return i.submit()}),a(1,"app-form-fields",1),l(2,"input",2),m(3,"translate"),I(4,Xe,3,3,"div",3),p(),a(5,"app-form-fields",1),l(6,"textarea",4),m(7,"translate"),p(),a(8,"app-form-fields",1)(9,"div",5),l(10,"ngx-editor-menu",6)(11,"ngx-editor",7),p()(),a(12,"app-form-fields",1),l(13,"input",8),m(14,"translate"),p(),a(15,"app-form-fields",1),l(16,"textarea",9),m(17,"translate"),p(),a(18,"app-form-fields",1)(19,"app-image-upload",10),m(20,"async"),v("selectedFiles",function(s){return i.selectThumbnail(s)}),p(),I(21,Ye,3,3,"div",3),p(),a(22,"app-form-fields",1)(23,"app-advanced-dropdown",11),m(24,"async"),m(25,"async"),v("selectedItem",function(s){return i.selectCategoryItem(s)}),p(),I(26,Ze,3,3,"div",3),p(),a(27,"app-form-fields",1)(28,"app-advanced-dropdown",12),m(29,"async"),m(30,"async"),v("selectedItem",function(s){return i.selectTagItem(s)}),p()(),a(31,"app-form-fields",1)(32,"div",13)(33,"label",14),l(34,"input",15)(35,"span",16),p()()(),a(36,"app-form-fields",1)(37,"div",13)(38,"label",14),l(39,"input",17)(40,"span",16),p()()(),a(41,"app-form-fields",1),l(42,"input",8),m(43,"translate"),p(),a(44,"app-form-fields",1),l(45,"textarea",9),m(46,"translate"),p(),a(47,"app-form-fields",1)(48,"app-image-upload",10),m(49,"async"),v("selectedFiles",function(s){return i.selectMetaImage(s)}),p()(),a(50,"app-form-fields",1)(51,"div",13)(52,"label",14),l(53,"input",18)(54,"span",16),p()()(),a(55,"app-button",19),C(56),m(57,"translate"),p()()),f&2){let t,s,A,G;r("formGroup",i.form),n(),r("label","title")("for","title")("required",!0),n(),b("placeholder",d(3,70,"enter_blog_title")),n(2),r("ngIf",i.form.controls.title.touched&&(i.form.controls.title.errors==null?null:i.form.controls.title.errors.required)),n(),r("label","description")("for","desc")("required",!1),n(),b("placeholder",d(7,72,"enter_blog_description")),n(2),r("label","content")("for","content")("required",!1),n(2),r("editor",i.editor),n(),r("editor",i.editor)("ngModel",i.html)("disabled",!1)("placeholder","Type here..."),n(),r("label","meta_title")("for","meta_title")("required",!1),n(),b("placeholder",d(14,74,"enter_meta_title")),n(2),r("label","meta_description")("for","meta_description")("required",!1),n(),b("placeholder",d(17,76,"enter_meta_description")),n(2),r("label","thumbnail")("for","image")("required",!0),n(),r("multipleImage",!1)("image",(t=d(20,78,i.blog$))==null?null:t.blog_thumbnail),n(2),r("ngIf",i.form.controls.blog_thumbnail_id.touched&&(i.form.controls.blog_thumbnail_id.errors==null?null:i.form.controls.blog_thumbnail_id.errors.required)),n(),r("label","select_categories")("for","category")("required",!0),n(),r("position","top")("selectedOption",i.selectedCategories)("options",!((s=d(24,80,i.category$))==null||s.data==null)&&s.data.length?(s=d(25,82,i.category$))==null?null:s.data:x(96,Pe))("subArrayKey","subcategories"),n(3),r("ngIf",i.form.controls.categories.touched&&(i.form.controls.categories.errors==null?null:i.form.controls.categories.errors.required)),n(),r("label","select_tags")("for","tag")("required",!1),n(),r("position","top")("selectedOption",i.selectedTags)("options",!((A=d(29,84,i.tag$))==null||A.data==null)&&A.data.length?(A=d(30,86,i.tag$))==null?null:A.data:x(97,Pe)),n(3),r("label","featured")("for","is_featured")("required",!1),n(5),r("label","sticky")("for","is_sticky")("required",!1),n(5),r("label","meta_title")("for","meta_title")("required",!1),n(),b("placeholder",d(43,88,"enter_meta_title")),n(2),r("label","meta_description")("for","meta_description")("required",!1),n(),b("placeholder",d(46,90,"enter_meta_description")),n(2),r("label","meta_image")("for","meta_image")("required",!1),n(),r("multipleImage",!1)("image",(G=d(49,92,i.blog$))==null?null:G.blog_meta_image),n(2),r("label","status")("for","status")("required",!1),n(5),r("id","blog_btn"),n(),T(" ",d(57,94,i.type=="create"?"save_blog":"update_blog")," ")}},dependencies:[K,ie,Z,Y,ee,te,oe,re,se,me,de,ae,Ee,Me,H,$]});var h=M;w([S(B.selectedBlog)],h.prototype,"blog$",void 0);w([S(fe.category)],h.prototype,"category$",void 0);w([S(Be.tag)],h.prototype,"tag$",void 0);var je=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-create-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(t,s){t&1&&(a(0,"app-page-wrapper",0),l(1,"app-form-blog",1),p()),t&2&&(r("title","create_blog"),n(),r("type","create"))},dependencies:[F,h]});let o=e;return o})();var Ve=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-edit-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(t,s){t&1&&(a(0,"app-page-wrapper",0),l(1,"app-form-blog",1),p()),t&2&&(r("title","edit_blog"),n(),r("type","edit"))},dependencies:[F,h]});let o=e;return o})();var Ge=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(t,s){t&1&&l(0,"app-category",0),t&2&&r("categoryType","post")},dependencies:[ke]});let o=e;return o})();var Oe=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-edit-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(t,s){t&1&&l(0,"app-edit-category",0),t&2&&r("categoryType","post")},dependencies:[De]});let o=e;return o})();var Ue=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(t,s){t&1&&l(0,"app-tag",0),t&2&&r("tagType","post")},dependencies:[we]});let o=e;return o})();var Re=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-create-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(t,s){t&1&&l(0,"app-create-tag",0),t&2&&r("tagType","post")},dependencies:[Ie]});let o=e;return o})();var Le=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-edit-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(t,s){t&1&&l(0,"app-edit-tag",0),t&2&&r("tagType","post")},dependencies:[Se]});let o=e;return o})();var et=[{path:"",component:k,canActivate:[y],data:{permission:"blog.index"}},{path:"create",component:je,canActivate:[y],data:{permission:["blog.index","blog.create"]}},{path:"edit/:id",component:Ve,canActivate:[y],data:{permission:["blog.index","blog.edit"]}},{path:"category",component:Ge,canActivate:[y],data:{permission:["category.index"]}},{path:"category/edit/:id",component:Oe,canActivate:[y],data:{permission:["category.index","category.create"]}},{path:"tag",component:Ue,canActivate:[y],data:{permission:["tag.index"]}},{path:"tag/create",component:Re,canActivate:[y],data:{permission:["tag.create"]}},{path:"tag/edit/:id",component:Le,canActivate:[y],data:{permission:["tag.edit"]}}],We=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=q({type:e}),e.\u0275inj=D({imports:[j.forChild(et),j]});let o=e;return o})();var Ti=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=q({type:e}),e.\u0275inj=D({imports:[z,We,ue,qe,Fe,X.forFeature([B]),Ae]});let o=e;return o})();export{Ti as BlogModule};
