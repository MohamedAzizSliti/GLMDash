import{a as f,b as S,c as j,d as l}from"./chunk-YOSF5IMR.js";import{a as x}from"./chunk-ISOQKGNC.js";import{Dc as N,k as y,l as F,lb as A,o as T,qb as M}from"./chunk-X2K52VJG.js";import{Ca as g,Da as C,Sa as d,Sc as c,Z as s,ab as b,bb as w,da as h,ea as p,h as u,jb as v,vc as _}from"./chunk-V4SAOAZP.js";import"./chunk-CWTPBX7D.js";var r=class r{constructor(e){this.store=e,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"image",dataField:"product_review_image",class:"tbl-image",type:"image",placeholder:"assets/images/product.png"},{title:"consumer_name",dataField:"consumer_name"},{title:"product_name",dataField:"product_name"},{title:"rating",dataField:"rating",type:"rating",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"review.destroy"}],data:[],total:0},this.store.dispatch(new f)}ngOnInit(){this.review$.subscribe(e=>{let o=e?.data?.filter(t=>(t.product_review_image=t?.product?.product_thumbnail,t.consumer_name=t?.consumer?.name,t.product_name=t?.product?.name,t));this.tableConfig.data=e?o:[],this.tableConfig.total=e?e.total:0})}onTableChange(e){this.store.dispatch(new f(e))}onActionClicked(e){e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"&&this.deleteAll(e.data)}delete(e){this.store.dispatch(new S(e.id))}deleteAll(e){this.store.dispatch(new j(e))}};r.\u0275fac=function(o){return new(o||r)(C(y))},r.\u0275cmp=h({type:r,selectors:[["app-review"]],decls:2,vars:4,consts:[[3,"gridClass","title"],[3,"tableChanged","action","tableConfig","hasCheckbox"]],template:function(o,t){o&1&&(b(0,"app-page-wrapper",0)(1,"app-table",1),v("tableChanged",function(m){return t.onTableChange(m)})("action",function(m){return t.onActionClicked(m)}),w()()),o&2&&(d("gridClass","col-sm-12")("title","reviews"),g(),d("tableConfig",t.tableConfig)("hasCheckbox",!0))},dependencies:[M,A]});var n=r;u([T(l.review)],n.prototype,"review$",void 0);var R=[{path:"",component:n,canActivate:[x],data:{permission:"review.index"}}],P=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=p({type:e}),e.\u0275inj=s({imports:[c.forChild(R),c]});let i=e;return i})();var Z=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=p({type:e}),e.\u0275inj=s({imports:[_,P,F.forFeature([l]),N]});let i=e;return i})();export{Z as ReviewModule};
