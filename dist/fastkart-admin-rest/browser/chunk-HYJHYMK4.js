import{a as X}from"./chunk-ISOQKGNC.js";import{A as G,B as ge,Bc as Qe,Cc as $e,Dc as Ue,E as v,G as _e,Gb as Ae,H as he,Hb as Pe,Ib as je,Jb as Oe,K as ve,Kb as qe,L as Ce,Lb as Re,Mb as K,O as Te,P as we,Q as be,T as Ie,Ua as Ke,ab as L,fa as Se,ga as xe,ha as Ne,ia as Fe,ja as De,k as F,l as de,lb as H,o as ye,ob as Ve,rb as Ee,ub as Me,x as ue,xb as Be,y as U,yb as ke,z as fe}from"./chunk-X2K52VJG.js";import{Ca as n,Da as h,Ib as ae,Jb as pe,Kb as se,Nb as m,Nc as Q,Ob as c,P as re,Pc as $,Q as ne,Qa as y,Qc as ce,Sa as a,Sc as J,Ua as W,Vc as D,Wa as P,Z as B,ab as p,bb as l,c as ee,cb as d,da as C,ea as k,gb as N,h as te,j as ie,jb as g,jc as R,ka as A,kb as u,kc as w,la as I,ma as S,nb as M,nc as le,q as oe,rb as j,sb as O,tb as q,vc as me,wb as f,xb as T,yb as z}from"./chunk-V4SAOAZP.js";var et=["deleteModal"],tt=(e,t)=>[e,t];function it(e,t){if(e&1&&(p(0,"a",8),d(1,"i",9),l()),e&2){let s=u();a("routerLink",se(1,tt,s.node.type=="post"?"/blog/category/edit":"/category/edit",s.node==null?null:s.node.id))}}function ot(e,t){if(e&1){let s=N();p(0,"a",10),g("click",function(){I(s);let r=u();return S(r.DeleteModal.openModal("delete",r.node))}),d(1,"i",11),l()}}function rt(e,t){if(e&1&&d(0,"app-tree-node",13),e&2){let s=t.$implicit,i=u(2);a("node",s)("displayKey",i.displayKey)("recursionKey",i.recursionKey)}}function nt(e,t){if(e&1&&(p(0,"ul"),y(1,rt,1,3,"app-tree-node",12),l()),e&2){let s=u();n(),a("ngForOf",s.node[s.recursionKey])}}var Le=(()=>{let t=class t{constructor(i,r,o){this.store=i,this.router=r,this.route=o,this.categoryType="product",this.showChildrenNode=!0}ngOnInit(){this.route.params.subscribe(i=>this.id=i.id)}delete(i,r){this.store.dispatch(new qe(r.id,r.type)).subscribe({complete:()=>{r.type=="post"?this.router.navigateByUrl("/blog/category"):this.router.navigateByUrl("/category")}})}};t.\u0275fac=function(r){return new(r||t)(h(F),h($),h(Q))},t.\u0275cmp=C({type:t,selectors:[["app-tree-node"]],viewQuery:function(r,o){if(r&1&&j(et,5),r&2){let _;O(_=q())&&(o.DeleteModal=_.first)}},inputs:{node:"node",recursionKey:"recursionKey",displayKey:"displayKey",categoryType:"categoryType"},decls:11,vars:10,consts:[["deleteModal",""],[1,"cursor-pointer"],["role","presentation",1,"tree-icon","file-icon",3,"click"],[1,"tree-options"],["href","javascript:void(0)",3,"routerLink",4,"hasPermission"],["href","javascript:void(0)",3,"click",4,"hasPermission"],[4,"ngIf"],[3,"deleteItem"],["href","javascript:void(0)",3,"routerLink"],[1,"ri-pencil-line","text-success"],["href","javascript:void(0)",3,"click"],[1,"ri-delete-bin-7-line","text-danger"],[3,"node","displayKey","recursionKey",4,"ngFor","ngForOf"],[3,"node","displayKey","recursionKey"]],template:function(r,o){if(r&1){let _=N();p(0,"li",1)(1,"div")(2,"i",2),g("click",function(){return I(_),S(o.showChildrenNode=!o.showChildrenNode)}),l(),p(3,"span"),f(4),l(),p(5,"div",3),y(6,it,2,4,"a",4)(7,ot,2,0,"a",5),l()(),y(8,nt,2,1,"ul",6),l(),p(9,"app-delete-modal",7,0),g("deleteItem",function(Z){return I(_),S(o.delete(Z.actionToPerform,Z.data))}),l()}r&2&&(W("inside-ul",o.node[o.recursionKey]&&o.node[o.recursionKey].length),n(3),P(o.node.id==o.id?"active":""),W("disabled",o.node.status!="1"),n(),T(o.node[o.displayKey]||(o.node==null?null:o.node.name)),n(2),a("hasPermission","category.edit"),n(),a("hasPermission","category.destroy"),n(),a("ngIf",o.node[o.recursionKey]&&o.node[o.recursionKey].length&&o.showChildrenNode))},dependencies:[R,w,ce,Ve,L,t]});let e=t;return e})();function st(e,t){if(e&1&&d(0,"app-tree-node",8),e&2){let s=t.$implicit,i=u(2);a("node",s)("displayKey",i.displayKey)("recursionKey",i.recursionKey)("categoryType",i.categoryType)}}function lt(e,t){if(e&1&&(p(0,"ul",4)(1,"li",5)(2,"div"),d(3,"i",6),p(4,"span"),f(5),m(6,"translate"),l()(),p(7,"ul"),y(8,st,1,4,"app-tree-node",7),l()()()),e&2){let s=u();n(5),T(c(6,2,"categories")),n(3),a("ngForOf",s.dataToShow)}}function mt(e,t){e&1&&d(0,"app-no-data",9),e&2&&(P("no-data-added category-no-data"),a("image","assets/svg/no-category.svg")("text","no_categories_found"))}var We=(()=>{let t=class t{constructor(){this.displayKey="name",this.categoryType="product",this.treeSearch=new v(""),this.dataToShow=[],this.treeSearch.valueChanges.subscribe(i=>{i?(this.dataToShow=[],this.data.forEach(r=>{this.hasValue(r)&&this.dataToShow.push(r)})):this.dataToShow=this.data})}ngOnChanges(){this.dataToShow=this.data}hasValue(i){let r=!1;return i[this.displayKey].toLowerCase().includes(this.treeSearch?.value?.toLowerCase())&&(r=!0),i[this.recursionKey]?.length&&i[this.recursionKey].forEach(o=>{this.hasValue(o)&&(r=!0)}),r}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=C({type:t,selectors:[["app-tree"]],inputs:{type:"type",data:"data",recursionKey:"recursionKey",displayKey:"displayKey",categoryType:"categoryType"},features:[A],decls:5,vars:6,consts:[[1,"theme-tree-box"],[1,"form-control",3,"placeholder","formControl"],["class","tree-main-ul",4,"ngIf"],[3,"class","image","text",4,"ngIf"],[1,"tree-main-ul"],[1,"cursor-pointer"],["role","presentation",1,"tree-icon","folder-icon"],[3,"node","displayKey","recursionKey","categoryType",4,"ngFor","ngForOf"],[3,"node","displayKey","recursionKey","categoryType"],[3,"image","text"]],template:function(r,o){r&1&&(p(0,"div",0),d(1,"input",1),m(2,"translate"),y(3,lt,9,4,"ul",2),l(),y(4,mt,1,4,"app-no-data",3)),r&2&&(n(),M("placeholder",c(2,4,"search_category")),a("formControl",o.treeSearch),n(2),a("ngIf",o.dataToShow==null?null:o.dataToShow.length),n(),a("ngIf",!(o.dataToShow!=null&&o.dataToShow.length)))},dependencies:[R,w,U,G,ve,Me,Le,D]});let e=t;return e})();var yt=e=>[e],ut=()=>[];function ft(e,t){e&1&&(p(0,"div",14),f(1),m(2,"translate"),l()),e&2&&(n(),z(" ",c(2,1,"name_is_required")," "))}function gt(e,t){e&1&&(p(0,"app-form-fields",2),m(1,"translate"),p(2,"div",15),d(3,"input",16),p(4,"span",17),f(5,"%"),l()(),p(6,"p",18),f(7),l()()),e&2&&(a("label",c(1,4,"commission_rate"))("for","commission_rate")("required",!1),n(7),T("*Define the percentage of earnings retained as commission."))}var ze=(()=>{let t=class t{constructor(i,r,o,_){this.store=i,this.route=r,this.router=o,this.formBuilder=_,this.categoryType="product",this.destroy$=new ee,this.form=this.formBuilder.group({name:new v("",[fe.required]),description:new v,parent_id:new v,type:new v(this.categoryType,[]),commission_rate:new v,category_image_id:new v,category_icon_id:new v,status:new v(!0)})}ngOnChanges(){this.form.controls.type.setValue(this.categoryType)}ngOnInit(){this.route.params.pipe(re(i=>i.id?this.store.dispatch(new je(i.id)).pipe(oe(()=>this.store.select(K.selectedCategory))):ie()),ne(this.destroy$)).subscribe(i=>{this.category=i,this.form.patchValue({name:this.category?.name,description:this.category?.description,parent_id:this.category?.parent_id,type:this.category?.type,commission_rate:this.category?.commission_rate,category_image_id:this.category?.category_image_id,category_icon_id:this.category?.category_icon_id,status:this.category?.status})})}selectItem(i){Array.isArray(i)&&i.length?this.form.controls.parent_id.setValue(i[0]):this.form.controls.parent_id.setValue("")}selectCategoryImage(i){Array.isArray(i)||this.form.controls.category_image_id.setValue(i?i.id:"")}selectCategoryIcon(i){Array.isArray(i)||this.form.controls.category_icon_id.setValue(i?i.id:"")}submit(){this.form.markAllAsTouched();let i=new Pe(this.form.value);this.type=="edit"&&this.category?.id&&(i=new Oe(this.form.value,this.category.id)),this.form.valid&&this.store.dispatch(i).subscribe({complete:()=>{this.type=="create"?(this.form.reset(),this.form.controls.category_image_id.setValue(""),this.form.controls.category_icon_id.setValue(""),this.form.controls.status.setValue(!0)):this.form.value.type==="product"?this.router.navigateByUrl("/category"):this.router.navigateByUrl("/blog/category")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(r){return new(r||t)(h(F),h(Q),h($),h(Ie))},t.\u0275cmp=C({type:t,selectors:[["app-form-category"]],inputs:{type:"type",categories:"categories",categoryType:"categoryType"},features:[A],decls:30,vars:56,consts:[[3,"gridClass","title"],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[3,"label","for","required",4,"ngIf"],[3,"selectedItem","selectSingle","selectedOption","options","subArrayKey"],[3,"selectedFiles","multipleImage","image"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"],[1,"input-group"],["id","commission_rate","type","number","min","0","max","100","oninput","if (value > 100) value = 100; if (value < 0) value = 0;","placeholder","Enter Commision Rate","formControlName","commission_rate","numbersOnly","",1,"form-control"],[1,"input-group-text"],[1,"help-text"]],template:function(r,o){r&1&&(p(0,"app-page-wrapper",0)(1,"form",1),g("ngSubmit",function(){return o.submit()}),p(2,"app-form-fields",2),m(3,"translate"),d(4,"input",3),m(5,"translate"),y(6,ft,3,3,"div",4),l(),p(7,"app-form-fields",2),m(8,"translate"),d(9,"textarea",5),m(10,"translate"),l(),y(11,gt,8,6,"app-form-fields",6),p(12,"app-form-fields",2),m(13,"translate"),p(14,"app-advanced-dropdown",7),g("selectedItem",function(b){return o.selectItem(b)}),l()(),p(15,"app-form-fields",2),m(16,"translate"),p(17,"app-image-upload",8),g("selectedFiles",function(b){return o.selectCategoryImage(b)}),l()(),p(18,"app-form-fields",2),m(19,"translate"),p(20,"app-image-upload",8),g("selectedFiles",function(b){return o.selectCategoryIcon(b)}),l()(),p(21,"app-form-fields",2),m(22,"translate"),p(23,"div",9)(24,"label",10),d(25,"input",11)(26,"span",12),l()()(),p(27,"app-button",13),f(28),m(29,"translate"),l()()()),r&2&&(a("gridClass","col-sm-12")("title",o.type+"_category"),n(),a("formGroup",o.form),n(),a("label",c(3,35,"name"))("for","name")("required",!0),n(2),M("placeholder",c(5,37,"enter_name")),n(2),a("ngIf",o.form.controls.name.touched&&(o.form.controls.name.errors==null?null:o.form.controls.name.errors.required)),n(),a("label",c(8,39,"description"))("for","description")("required",!1),n(2),M("placeholder",c(10,41,"enter_description")),n(2),a("ngIf",o.categoryType=="product"),n(),a("label",c(13,43,"select_parent"))("for","category")("required",!1),n(2),a("selectSingle",!0)("selectedOption",o.category&&o.category.parent_id?pe(53,yt,o.category.parent_id):ae(55,ut))("options",o.categories)("subArrayKey","subcategories"),n(),a("label",c(16,45,"image"))("for","image")("required",!1),n(2),a("multipleImage",!1)("image",o.category==null?null:o.category.category_image),n(),a("label",c(19,47,"icon"))("for","icon")("required",!1),n(2),a("multipleImage",!1)("image",o.category==null?null:o.category.category_icon),n(),a("label",c(22,49,"status"))("for","status")("required",!1),n(6),a("id","category_btn"),n(),z(" ",c(29,51,o.type=="create"?"save_category":"update_category")," "))},dependencies:[w,_e,U,he,ue,G,ge,be,we,Ce,Te,Ee,Be,H,ke,Ke,$e,D]});let e=t;return e})();var ht=["csvModal"];function vt(e,t){if(e&1){let s=N();p(0,"button",16),g("click",function(){I(s);let r=u(3);return S(r.CSVModal.openModal())}),f(1),m(2,"translate"),l()}e&2&&(n(),T(c(2,1,"Bulk Import")))}function Ct(e,t){if(e&1){let s=N();p(0,"button",16),g("click",function(){I(s);let r=u(3);return S(r.export())}),f(1),m(2,"translate"),l()}e&2&&(n(),T(c(2,1,"Export")))}function Tt(e,t){e&1&&(p(0,"button",17),f(1),m(2,"translate"),l()),e&2&&(n(),T(c(2,1,"create")))}function wt(e,t){if(e&1&&(p(0,"div",11)(1,"button",12),f(2," Action "),l(),p(3,"div",13),y(4,vt,3,3,"button",14)(5,Ct,3,3,"button",14)(6,Tt,3,3,"button",15),l()()),e&2){let s=u(2);n(4),a("ngIf",s.categoryType=="product"),n(),a("ngIf",s.categoryType=="product"),n(),a("ngIf",s.type=="edit")}}function bt(e,t){if(e&1&&(p(0,"div",9),y(1,wt,7,3,"div",10),l()),e&2){let s=u();n(),a("ngIf",s.categoryType=="product"||s.type=="edit")}}function It(e,t){if(e&1&&(d(0,"app-form-category",18),m(1,"async")),e&2){let s,i=u();a("categories",(s=c(1,3,i.category$))==null?null:s.data)("type",i.type)("categoryType",i.categoryType)}}var E=class E{constructor(t){this.store=t,this.type="create",this.categoryType="product"}ngOnInit(){this.store.dispatch(new Ae({type:this.categoryType}))}export(){this.store.dispatch(new Re)}};E.\u0275fac=function(s){return new(s||E)(h(F))},E.\u0275cmp=C({type:E,selectors:[["app-category"]],viewQuery:function(s,i){if(s&1&&j(ht,5),s&2){let r;O(r=q())&&(i.CSVModal=r.first)}},inputs:{type:"type",categoryType:"categoryType"},decls:10,vars:11,consts:[["csvModal",""],[1,"row"],[1,"col-xl-4","p-0"],[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"data","recursionKey","type","categoryType"],[1,"col-xl-8","p-0"],[3,"categories","type","categoryType",4,"hasPermission"],[3,"module"],["button",""],["ngbDropdown","","class","d-inline-block dropdown-box",4,"ngIf"],["ngbDropdown","",1,"d-inline-block","dropdown-box"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-outline"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"dropdown-menu","dropdown-menu-end"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",4,"ngIf"],["ngbDropdownItem","",3,"click"],["ngbDropdownItem",""],[3,"categories","type","categoryType"]],template:function(s,i){if(s&1&&(p(0,"div",1)(1,"div",2)(2,"app-page-wrapper",3),y(3,bt,2,1,"div",4),d(4,"app-tree",5),m(5,"async"),l()(),p(6,"div",6),y(7,It,2,5,"app-form-category",7),l()(),d(8,"app-import-csv-modal",8,0)),s&2){let r;n(2),a("gridClass","col-sm-12")("title","categories"),n(),a("hasPermission","category.create"),n(),a("data",(r=c(5,9,i.category$))==null?null:r.data)("recursionKey","subcategories")("type",i.type)("categoryType",i.categoryType),n(3),a("hasPermission","category."+i.type),n(),a("module","category")}},dependencies:[w,De,Fe,Ne,Se,xe,H,Qe,L,We,ze,le,D]});var x=E;te([ye(K.category)],x.prototype,"category$",void 0);var Je=(()=>{let t=class t{constructor(){this.categoryType="product"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=C({type:t,selectors:[["app-edit-category"]],inputs:{categoryType:"categoryType"},decls:1,vars:2,consts:[[3,"type","categoryType"]],template:function(r,o){r&1&&d(0,"app-category",0),r&2&&a("type","edit")("categoryType",o.categoryType)},dependencies:[x]});let e=t;return e})();var xt=[{path:"",component:x,canActivate:[X],data:{permission:"category.index"}},{path:"edit/:id",component:Je,canActivate:[X],data:{permission:["category.index","category.edit"]}}],Xe=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=k({type:t}),t.\u0275inj=B({imports:[J.forChild(xt),J]});let e=t;return e})();var ui=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=k({type:t}),t.\u0275inj=B({imports:[me,Xe,Ue,de.forFeature([K])]});let e=t;return e})();export{x as a,Je as b,ui as c};
