import{a as nh}from"./chunk-JF4YXBEL.js";import{a as eh,b as th}from"./chunk-M2LWZKN4.js";import{a as ds,b as ps}from"./chunk-MEBPK2N6.js";import{a as vl}from"./chunk-SYLZCP4O.js";import{a as hs}from"./chunk-XA3FHL27.js";import{a as Zu,g as Qu,k as fs,m as br}from"./chunk-O55BQOZL.js";import{a as Yu}from"./chunk-ISOQKGNC.js";import{A as as,Dc as Ju,F as ls,Fa as Gu,Ga as ju,H as Bu,J as Nu,Q as Fu,U as Wu,Ua as $u,aa as ml,ba as zu,ca as Uu,da as qu,fb as us,k as Au,ka as Hu,l as Du,ma as Vu,o as os,ob as Xu,rb as Ku,x as Ru,y as ss}from"./chunk-X2K52VJG.js";import{$ as _u,Aa as bu,Bc as Eu,Ca as L,Da as Ee,Db as Ke,Eb as Je,Fb as Ye,Ia as yu,Ib as Ci,Jb as Cu,Nb as pe,Nc as Lu,Ob as _e,Pb as vr,Pc as Ou,Qa as Xe,Rb as _r,Sa as J,Sc as gl,Ua as ns,Vc as cs,Wa as Pn,Xa as is,Y as Ko,Yb as xu,Z as Jo,ab as I,bb as P,cb as Y,d as vu,da as Yo,db as Yt,ea as Zo,eb as Zt,ga as Qo,gb as ot,h as Xo,ic as Su,jb as se,jc as ku,kb as $,kc as rs,la as ie,ma as re,na as es,nb as Tn,nc as Mu,oa as ts,ob as wu,qc as Pu,rb as $n,sb as Xn,sc as Tu,tb as Kn,u as dl,ub as zt,vb as pl,vc as Iu,wb as Z,xb as Ae,yb as xt}from"./chunk-V4SAOAZP.js";import{a as $o,b as pu,d as gu,e as mu,f as wi}from"./chunk-CWTPBX7D.js";var mh=gu((_s,Cl)=>{"use strict";(function(c,u){typeof _s=="object"&&typeof Cl=="object"?Cl.exports=u():typeof define=="function"&&define.amd?define([],u):typeof _s=="object"?_s.Pusher=u():c.Pusher=u()})(window,function(){return function(f){var c={};function u(l){if(c[l])return c[l].exports;var s=c[l]={i:l,l:!1,exports:{}};return f[l].call(s.exports,s,s.exports,u),s.l=!0,s.exports}return u.m=f,u.c=c,u.d=function(l,s,m){u.o(l,s)||Object.defineProperty(l,s,{enumerable:!0,get:m})},u.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},u.t=function(l,s){if(s&1&&(l=u(l)),s&8||s&4&&typeof l=="object"&&l&&l.__esModule)return l;var m=Object.create(null);if(u.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:l}),s&2&&typeof l!="string")for(var C in l)u.d(m,C,(function(A){return l[A]}).bind(null,C));return m},u.n=function(l){var s=l&&l.__esModule?function(){return l.default}:function(){return l};return u.d(s,"a",s),s},u.o=function(l,s){return Object.prototype.hasOwnProperty.call(l,s)},u.p="",u(u.s=2)}([function(f,c,u){"use strict";var l=this&&this.__extends||function(){var q=function(O,B){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ue){Q.__proto__=ue}||function(Q,ue){for(var Me in ue)ue.hasOwnProperty(Me)&&(Q[Me]=ue[Me])},q(O,B)};return function(O,B){q(O,B);function Q(){this.constructor=O}O.prototype=B===null?Object.create(B):(Q.prototype=B.prototype,new Q)}}();Object.defineProperty(c,"__esModule",{value:!0});var s=256,m=function(){function q(O){O===void 0&&(O="="),this._paddingCharacter=O}return q.prototype.encodedLength=function(O){return this._paddingCharacter?(O+2)/3*4|0:(O*8+5)/6|0},q.prototype.encode=function(O){for(var B="",Q=0;Q<O.length-2;Q+=3){var ue=O[Q]<<16|O[Q+1]<<8|O[Q+2];B+=this._encodeByte(ue>>>3*6&63),B+=this._encodeByte(ue>>>2*6&63),B+=this._encodeByte(ue>>>1*6&63),B+=this._encodeByte(ue>>>0*6&63)}var Me=O.length-Q;if(Me>0){var ue=O[Q]<<16|(Me===2?O[Q+1]<<8:0);B+=this._encodeByte(ue>>>3*6&63),B+=this._encodeByte(ue>>>2*6&63),Me===2?B+=this._encodeByte(ue>>>1*6&63):B+=this._paddingCharacter||"",B+=this._paddingCharacter||""}return B},q.prototype.maxDecodedLength=function(O){return this._paddingCharacter?O/4*3|0:(O*6+7)/8|0},q.prototype.decodedLength=function(O){return this.maxDecodedLength(O.length-this._getPaddingLength(O))},q.prototype.decode=function(O){if(O.length===0)return new Uint8Array(0);for(var B=this._getPaddingLength(O),Q=O.length-B,ue=new Uint8Array(this.maxDecodedLength(Q)),Me=0,xe=0,qe=0,Fe=0,He=0,mt=0,Ut=0;xe<Q-4;xe+=4)Fe=this._decodeChar(O.charCodeAt(xe+0)),He=this._decodeChar(O.charCodeAt(xe+1)),mt=this._decodeChar(O.charCodeAt(xe+2)),Ut=this._decodeChar(O.charCodeAt(xe+3)),ue[Me++]=Fe<<2|He>>>4,ue[Me++]=He<<4|mt>>>2,ue[Me++]=mt<<6|Ut,qe|=Fe&s,qe|=He&s,qe|=mt&s,qe|=Ut&s;if(xe<Q-1&&(Fe=this._decodeChar(O.charCodeAt(xe)),He=this._decodeChar(O.charCodeAt(xe+1)),ue[Me++]=Fe<<2|He>>>4,qe|=Fe&s,qe|=He&s),xe<Q-2&&(mt=this._decodeChar(O.charCodeAt(xe+2)),ue[Me++]=He<<4|mt>>>2,qe|=mt&s),xe<Q-3&&(Ut=this._decodeChar(O.charCodeAt(xe+3)),ue[Me++]=mt<<6|Ut,qe|=Ut&s),qe!==0)throw new Error("Base64Coder: incorrect characters for decoding");return ue},q.prototype._encodeByte=function(O){var B=O;return B+=65,B+=25-O>>>8&6,B+=51-O>>>8&-75,B+=61-O>>>8&-15,B+=62-O>>>8&3,String.fromCharCode(B)},q.prototype._decodeChar=function(O){var B=s;return B+=(42-O&O-44)>>>8&-s+O-43+62,B+=(46-O&O-48)>>>8&-s+O-47+63,B+=(47-O&O-58)>>>8&-s+O-48+52,B+=(64-O&O-91)>>>8&-s+O-65+0,B+=(96-O&O-123)>>>8&-s+O-97+26,B},q.prototype._getPaddingLength=function(O){var B=0;if(this._paddingCharacter){for(var Q=O.length-1;Q>=0&&O[Q]===this._paddingCharacter;Q--)B++;if(O.length<4||B>2)throw new Error("Base64Coder: incorrect padding")}return B},q}();c.Coder=m;var C=new m;function A(q){return C.encode(q)}c.encode=A;function z(q){return C.decode(q)}c.decode=z;var F=function(q){l(O,q);function O(){return q!==null&&q.apply(this,arguments)||this}return O.prototype._encodeByte=function(B){var Q=B;return Q+=65,Q+=25-B>>>8&6,Q+=51-B>>>8&-75,Q+=61-B>>>8&-13,Q+=62-B>>>8&49,String.fromCharCode(Q)},O.prototype._decodeChar=function(B){var Q=s;return Q+=(44-B&B-46)>>>8&-s+B-45+62,Q+=(94-B&B-96)>>>8&-s+B-95+63,Q+=(47-B&B-58)>>>8&-s+B-48+52,Q+=(64-B&B-91)>>>8&-s+B-65+0,Q+=(96-B&B-123)>>>8&-s+B-97+26,Q},O}(m);c.URLSafeCoder=F;var V=new F;function H(q){return V.encode(q)}c.encodeURLSafe=H;function G(q){return V.decode(q)}c.decodeURLSafe=G,c.encodedLength=function(q){return C.encodedLength(q)},c.maxDecodedLength=function(q){return C.maxDecodedLength(q)},c.decodedLength=function(q){return C.decodedLength(q)}},function(f,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var l="utf8: invalid string",s="utf8: invalid source encoding";function m(z){for(var F=new Uint8Array(C(z)),V=0,H=0;H<z.length;H++){var G=z.charCodeAt(H);G<128?F[V++]=G:G<2048?(F[V++]=192|G>>6,F[V++]=128|G&63):G<55296?(F[V++]=224|G>>12,F[V++]=128|G>>6&63,F[V++]=128|G&63):(H++,G=(G&1023)<<10,G|=z.charCodeAt(H)&1023,G+=65536,F[V++]=240|G>>18,F[V++]=128|G>>12&63,F[V++]=128|G>>6&63,F[V++]=128|G&63)}return F}c.encode=m;function C(z){for(var F=0,V=0;V<z.length;V++){var H=z.charCodeAt(V);if(H<128)F+=1;else if(H<2048)F+=2;else if(H<55296)F+=3;else if(H<=57343){if(V>=z.length-1)throw new Error(l);V++,F+=4}else throw new Error(l)}return F}c.encodedLength=C;function A(z){for(var F=[],V=0;V<z.length;V++){var H=z[V];if(H&128){var G=void 0;if(H<224){if(V>=z.length)throw new Error(s);var q=z[++V];if((q&192)!==128)throw new Error(s);H=(H&31)<<6|q&63,G=128}else if(H<240){if(V>=z.length-1)throw new Error(s);var q=z[++V],O=z[++V];if((q&192)!==128||(O&192)!==128)throw new Error(s);H=(H&15)<<12|(q&63)<<6|O&63,G=2048}else if(H<248){if(V>=z.length-2)throw new Error(s);var q=z[++V],O=z[++V],B=z[++V];if((q&192)!==128||(O&192)!==128||(B&192)!==128)throw new Error(s);H=(H&15)<<18|(q&63)<<12|(O&63)<<6|B&63,G=65536}else throw new Error(s);if(H<G||H>=55296&&H<=57343)throw new Error(s);if(H>=65536){if(H>1114111)throw new Error(s);H-=65536,F.push(String.fromCharCode(55296|H>>10)),H=56320|H&1023}}F.push(String.fromCharCode(H))}return F.join("")}c.decode=A},function(f,c,u){f.exports=u(3).default},function(f,c,u){"use strict";u.r(c);class l{constructor(i,o){this.lastId=0,this.prefix=i,this.name=o}create(i){this.lastId++;var o=this.lastId,g=this.prefix+o,v=this.name+"["+o+"]",k=!1,D=function(){k||(i.apply(null,arguments),k=!0)};return this[o]=D,{number:o,id:g,name:v,callback:D}}remove(i){delete this[i.number]}}var s=new l("_pusher_script_","Pusher.ScriptReceivers"),m={VERSION:"8.4.0-rc2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},C=m;class A{constructor(i){this.options=i,this.receivers=i.receivers||s,this.loading={}}load(i,o,g){var v=this;if(v.loading[i]&&v.loading[i].length>0)v.loading[i].push(g);else{v.loading[i]=[g];var k=te.createScriptRequest(v.getPath(i,o)),D=v.receivers.create(function(W){if(v.receivers.remove(D),v.loading[i]){var ee=v.loading[i];delete v.loading[i];for(var ge=function(Te){Te||k.cleanup()},me=0;me<ee.length;me++)ee[me](W,ge)}});k.send(D)}}getRoot(i){var o,g=te.getDocument().location.protocol;return i&&i.useTLS||g==="https:"?o=this.options.cdn_https:o=this.options.cdn_http,o.replace(/\/*$/,"")+"/"+this.options.version}getPath(i,o){return this.getRoot(o)+"/"+i+this.options.suffix+".js"}}var z=new l("_pusher_dependencies","Pusher.DependenciesReceivers"),F=new A({cdn_http:C.cdn_http,cdn_https:C.cdn_https,version:C.VERSION,suffix:C.dependency_suffix,receivers:z});let V={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var G={buildLogSuffix:function(a){let i="See:",o=V.urls[a];if(!o)return"";let g;return o.fullUrl?g=o.fullUrl:o.path&&(g=V.baseUrl+o.path),g?`${i} ${g}`:""}},q=function(a){return a.UserAuthentication="user-authentication",a.ChannelAuthorization="channel-authorization",a}(q||{});class O extends Error{constructor(i){super(i),Object.setPrototypeOf(this,new.target.prototype)}}class B extends Error{constructor(i){super(i),Object.setPrototypeOf(this,new.target.prototype)}}class Q extends Error{constructor(i){super(i),Object.setPrototypeOf(this,new.target.prototype)}}class ue extends Error{constructor(i){super(i),Object.setPrototypeOf(this,new.target.prototype)}}class Me extends Error{constructor(i){super(i),Object.setPrototypeOf(this,new.target.prototype)}}class xe extends Error{constructor(i){super(i),Object.setPrototypeOf(this,new.target.prototype)}}class qe extends Error{constructor(i){super(i),Object.setPrototypeOf(this,new.target.prototype)}}class Fe extends Error{constructor(i){super(i),Object.setPrototypeOf(this,new.target.prototype)}}class He extends Error{constructor(i,o){super(o),this.status=i,Object.setPrototypeOf(this,new.target.prototype)}}var Ut=function(a,i,o,g,v){let k=te.createXHR();k.open("POST",o.endpoint,!0),k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var D in o.headers)k.setRequestHeader(D,o.headers[D]);if(o.headersProvider!=null){let W=o.headersProvider();for(var D in W)k.setRequestHeader(D,W[D])}return k.onreadystatechange=function(){if(k.readyState===4)if(k.status===200){let W,ee=!1;try{W=JSON.parse(k.responseText),ee=!0}catch{v(new He(200,`JSON returned from ${g.toString()} endpoint was invalid, yet status code was 200. Data was: ${k.responseText}`),null)}ee&&v(null,W)}else{let W="";switch(g){case q.UserAuthentication:W=G.buildLogSuffix("authenticationEndpoint");break;case q.ChannelAuthorization:W=`Clients must be authorized to join private or presence channels. ${G.buildLogSuffix("authorizationEndpoint")}`;break}v(new He(k.status,`Unable to retrieve auth string from ${g.toString()} endpoint - received status: ${k.status} from ${o.endpoint}. ${W}`),null)}},k.send(i),k};function ys(a){return Qn(qt(a))}for(var En=String.fromCharCode,dn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xr={},Zn=0,ws=dn.length;Zn<ws;Zn++)xr[dn.charAt(Zn)]=Zn;var Qt=function(a){var i=a.charCodeAt(0);return i<128?a:i<2048?En(192|i>>>6)+En(128|i&63):En(224|i>>>12&15)+En(128|i>>>6&63)+En(128|i&63)},qt=function(a){return a.replace(/[^\x00-\x7F]/g,Qt)},Cs=function(a){var i=[0,2,1][a.length%3],o=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),g=[dn.charAt(o>>>18),dn.charAt(o>>>12&63),i>=2?"=":dn.charAt(o>>>6&63),i>=1?"=":dn.charAt(o&63)];return g.join("")},Qn=window.btoa||function(a){return a.replace(/[\s\S]{1,3}/g,Cs)};class St{constructor(i,o,g,v){this.clear=o,this.timer=i(()=>{this.timer&&(this.timer=v(this.timer))},g)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var Sr=St;function xs(a){window.clearTimeout(a)}function Ss(a){window.clearInterval(a)}class st extends Sr{constructor(i,o){super(setTimeout,xs,i,function(g){return o(),null})}}class ei extends Sr{constructor(i,o){super(setInterval,Ss,i,function(g){return o(),g})}}var ks={now(){return Date.now?Date.now():new Date().valueOf()},defer(a){return new st(0,a)},method(a,...i){var o=Array.prototype.slice.call(arguments,1);return function(g){return g[a].apply(g,o.concat(arguments))}}},Le=ks;function Be(a,...i){for(var o=0;o<i.length;o++){var g=i[o];for(var v in g)g[v]&&g[v].constructor&&g[v].constructor===Object?a[v]=Be(a[v]||{},g[v]):a[v]=g[v]}return a}function Ms(){for(var a=["Pusher"],i=0;i<arguments.length;i++)typeof arguments[i]=="string"?a.push(arguments[i]):a.push(ni(arguments[i]));return a.join(" : ")}function Ln(a,i){var o=Array.prototype.indexOf;if(a===null)return-1;if(o&&a.indexOf===o)return a.indexOf(i);for(var g=0,v=a.length;g<v;g++)if(a[g]===i)return g;return-1}function at(a,i){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&i(a[o],o,a)}function ki(a){var i=[];return at(a,function(o,g){i.push(g)}),i}function vt(a){var i=[];return at(a,function(o){i.push(o)}),i}function Lt(a,i,o){for(var g=0;g<a.length;g++)i.call(o||window,a[g],g,a)}function kr(a,i){for(var o=[],g=0;g<a.length;g++)o.push(i(a[g],g,a,o));return o}function Ot(a,i){var o={};return at(a,function(g,v){o[v]=i(g)}),o}function Mi(a,i){i=i||function(v){return!!v};for(var o=[],g=0;g<a.length;g++)i(a[g],g,a,o)&&o.push(a[g]);return o}function Mr(a,i){var o={};return at(a,function(g,v){(i&&i(g,v,a,o)||g)&&(o[v]=g)}),o}function On(a){var i=[];return at(a,function(o,g){i.push([g,o])}),i}function lt(a,i){for(var o=0;o<a.length;o++)if(i(a[o],o,a))return!0;return!1}function An(a,i){for(var o=0;o<a.length;o++)if(!i(a[o],o,a))return!1;return!0}function ti(a){return Ot(a,function(i){return typeof i=="object"&&(i=ni(i)),encodeURIComponent(ys(i.toString()))})}function Ps(a){var i=Mr(a,function(g){return g!==void 0}),o=kr(On(ti(i)),Le.method("join","=")).join("&");return o}function Dn(a){var i=[],o=[];return function g(v,k){var D,W,ee;switch(typeof v){case"object":if(!v)return null;for(D=0;D<i.length;D+=1)if(i[D]===v)return{$ref:o[D]};if(i.push(v),o.push(k),Object.prototype.toString.apply(v)==="[object Array]")for(ee=[],D=0;D<v.length;D+=1)ee[D]=g(v[D],k+"["+D+"]");else{ee={};for(W in v)Object.prototype.hasOwnProperty.call(v,W)&&(ee[W]=g(v[W],k+"["+JSON.stringify(W)+"]"))}return ee;case"number":case"string":case"boolean":return v}}(a,"$")}function ni(a){try{return JSON.stringify(a)}catch{return JSON.stringify(Dn(a))}}class Rn{constructor(){this.globalLog=i=>{window.console&&window.console.log&&window.console.log(i)}}debug(...i){this.log(this.globalLog,i)}warn(...i){this.log(this.globalLogWarn,i)}error(...i){this.log(this.globalLogError,i)}globalLogWarn(i){window.console&&window.console.warn?window.console.warn(i):this.globalLog(i)}globalLogError(i){window.console&&window.console.error?window.console.error(i):this.globalLogWarn(i)}log(i,...o){var g=Ms.apply(this,arguments);Zi.log?Zi.log(g):Zi.logToConsole&&i.bind(this)(g)}}var be=new Rn,Pi=function(a,i,o,g,v){(o.headers!==void 0||o.headersProvider!=null)&&be.warn(`To send headers with the ${g.toString()} request, you must use AJAX, rather than JSONP.`);var k=a.nextAuthCallbackID.toString();a.nextAuthCallbackID++;var D=a.getDocument(),W=D.createElement("script");a.auth_callbacks[k]=function(me){v(null,me)};var ee="Pusher.auth_callbacks['"+k+"']";W.src=o.endpoint+"?callback="+encodeURIComponent(ee)+"&"+i;var ge=D.getElementsByTagName("head")[0]||D.documentElement;ge.insertBefore(W,ge.firstChild)},Ti=Pi;class Ii{constructor(i){this.src=i}send(i){var o=this,g="Error loading "+o.src;o.script=document.createElement("script"),o.script.id=i.id,o.script.src=o.src,o.script.type="text/javascript",o.script.charset="UTF-8",o.script.addEventListener?(o.script.onerror=function(){i.callback(g)},o.script.onload=function(){i.callback(null)}):o.script.onreadystatechange=function(){(o.script.readyState==="loaded"||o.script.readyState==="complete")&&i.callback(null)},o.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(o.errorScript=document.createElement("script"),o.errorScript.id=i.id+"_error",o.errorScript.text=i.name+"('"+g+"');",o.script.async=o.errorScript.async=!1):o.script.async=!0;var v=document.getElementsByTagName("head")[0];v.insertBefore(o.script,v.firstChild),o.errorScript&&v.insertBefore(o.errorScript,o.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class Ei{constructor(i,o){this.url=i,this.data=o}send(i){if(!this.request){var o=Ps(this.data),g=this.url+"/"+i.number+"?"+o;this.request=te.createScriptRequest(g),this.request.send(i)}}cleanup(){this.request&&this.request.cleanup()}}var Li=function(a,i){return function(o,g){var v="http"+(i?"s":"")+"://",k=v+(a.host||a.options.host)+a.options.path,D=te.createJSONPRequest(k,o),W=te.ScriptReceivers.create(function(ee,ge){s.remove(W),D.cleanup(),ge&&ge.host&&(a.host=ge.host),g&&g(ee,ge)});D.send(W)}},Oi={name:"jsonp",getAgent:Li},Ai=Oi;function Bn(a,i,o){var g=a+(i.useTLS?"s":""),v=i.useTLS?i.hostTLS:i.hostNonTLS;return g+"://"+v+o}function Nn(a,i){var o="/app/"+a,g="?protocol="+C.PROTOCOL+"&client=js&version="+C.VERSION+(i?"&"+i:"");return o+g}var Ts={getInitial:function(a,i){var o=(i.httpPath||"")+Nn(a,"flash=false");return Bn("ws",i,o)}},Is={getInitial:function(a,i){var o=(i.httpPath||"/pusher")+Nn(a);return Bn("http",i,o)}},Es={getInitial:function(a,i){return Bn("http",i,i.httpPath||"/pusher")},getPath:function(a,i){return Nn(a)}};class Pr{constructor(){this._callbacks={}}get(i){return this._callbacks[ii(i)]}add(i,o,g){var v=ii(i);this._callbacks[v]=this._callbacks[v]||[],this._callbacks[v].push({fn:o,context:g})}remove(i,o,g){if(!i&&!o&&!g){this._callbacks={};return}var v=i?[ii(i)]:ki(this._callbacks);o||g?this.removeCallback(v,o,g):this.removeAllCallbacks(v)}removeCallback(i,o,g){Lt(i,function(v){this._callbacks[v]=Mi(this._callbacks[v]||[],function(k){return o&&o!==k.fn||g&&g!==k.context}),this._callbacks[v].length===0&&delete this._callbacks[v]},this)}removeAllCallbacks(i){Lt(i,function(o){delete this._callbacks[o]},this)}}function ii(a){return"_"+a}class At{constructor(i){this.callbacks=new Pr,this.global_callbacks=[],this.failThrough=i}bind(i,o,g){return this.callbacks.add(i,o,g),this}bind_global(i){return this.global_callbacks.push(i),this}unbind(i,o,g){return this.callbacks.remove(i,o,g),this}unbind_global(i){return i?(this.global_callbacks=Mi(this.global_callbacks||[],o=>o!==i),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(i,o,g){for(var v=0;v<this.global_callbacks.length;v++)this.global_callbacks[v](i,o);var k=this.callbacks.get(i),D=[];if(g?D.push(o,g):o&&D.push(o),k&&k.length>0)for(var v=0;v<k.length;v++)k[v].fn.apply(k[v].context||window,D);else this.failThrough&&this.failThrough(i,o);return this}}class Ls extends At{constructor(i,o,g,v,k){super(),this.initialize=te.transportConnectionInitializer,this.hooks=i,this.name=o,this.priority=g,this.key=v,this.options=k,this.state="new",this.timeline=k.timeline,this.activityTimeout=k.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var i=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(i,this.options)}catch(o){return Le.defer(()=>{this.onError(o),this.changeState("closed")}),!1}return this.bindListeners(),be.debug("Connecting",{transport:this.name,url:i}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(i){return this.state==="open"?(Le.defer(()=>{this.socket&&this.socket.send(i)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(i){this.emit("error",{type:"WebSocketError",error:i}),this.timeline.error(this.buildTimelineMessage({error:i.toString()}))}onClose(i){i?this.changeState("closed",{code:i.code,reason:i.reason,wasClean:i.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(i){this.emit("message",i)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=i=>{this.onError(i)},this.socket.onclose=i=>{this.onClose(i)},this.socket.onmessage=i=>{this.onMessage(i)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(i,o){this.state=i,this.timeline.info(this.buildTimelineMessage({state:i,params:o})),this.emit(i,o)}buildTimelineMessage(i){return Be({cid:this.id},i)}}class pn{constructor(i){this.hooks=i}isSupported(i){return this.hooks.isSupported(i)}createConnection(i,o,g,v){return new Ls(this.hooks,i,o,g,v)}}var Os=new pn({urls:Ts,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!te.getWebSocketAPI()},isSupported:function(){return!!te.getWebSocketAPI()},getSocket:function(a){return te.createWebSocket(a)}}),Di={urls:Is,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Tr=Be({getSocket:function(a){return te.HTTPFactory.createStreamingSocket(a)}},Di),Ir=Be({getSocket:function(a){return te.HTTPFactory.createPollingSocket(a)}},Di),Er={isSupported:function(){return te.isXHRSupported()}},Ri=new pn(Be({},Tr,Er)),As=new pn(Be({},Ir,Er)),Bi={ws:Os,xhr_streaming:Ri,xhr_polling:As},ri=Bi,Ds=new pn({file:"sockjs",urls:Es,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(a,i){return new window.SockJS(a,null,{js_path:F.getPath("sockjs",{useTLS:i.useTLS}),ignore_null_origin:i.ignoreNullOrigin})},beforeOpen:function(a,i){a.send(JSON.stringify({path:i}))}}),Lr={isSupported:function(a){var i=te.isXDRSupported(a.useTLS);return i}},Rs=new pn(Be({},Tr,Lr)),Bs=new pn(Be({},Ir,Lr));ri.xdr_streaming=Rs,ri.xdr_polling=Bs,ri.sockjs=Ds;var Ns=ri;class Fs extends At{constructor(){super();var i=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){i.emit("online")},!1),window.addEventListener("offline",function(){i.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var Ws=new Fs;class Or{constructor(i,o,g){this.manager=i,this.transport=o,this.minPingDelay=g.minPingDelay,this.maxPingDelay=g.maxPingDelay,this.pingDelay=void 0}createConnection(i,o,g,v){v=Be({},v,{activityTimeout:this.pingDelay});var k=this.transport.createConnection(i,o,g,v),D=null,W=function(){k.unbind("open",W),k.bind("closed",ee),D=Le.now()},ee=ge=>{if(k.unbind("closed",ee),ge.code===1002||ge.code===1003)this.manager.reportDeath();else if(!ge.wasClean&&D){var me=Le.now()-D;me<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(me/2,this.minPingDelay))}};return k.bind("open",W),k}isSupported(i){return this.manager.isAlive()&&this.transport.isSupported(i)}}let Ar={decodeMessage:function(a){try{var i=JSON.parse(a.data),o=i.data;if(typeof o=="string")try{o=JSON.parse(i.data)}catch{}var g={event:i.event,channel:i.channel,data:o};return i.user_id&&(g.user_id=i.user_id),g}catch(v){throw{type:"MessageParseError",error:v,data:a.data}}},encodeMessage:function(a){return JSON.stringify(a)},processHandshake:function(a){var i=Ar.decodeMessage(a);if(i.event==="pusher:connection_established"){if(!i.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:i.data.socket_id,activityTimeout:i.data.activity_timeout*1e3}}else{if(i.event==="pusher:error")return{action:this.getCloseAction(i.data),error:this.getCloseError(i.data)};throw"Invalid handshake"}},getCloseAction:function(a){return a.code<4e3?a.code>=1002&&a.code<=1004?"backoff":null:a.code===4e3?"tls_only":a.code<4100?"refused":a.code<4200?"backoff":a.code<4300?"retry":"refused"},getCloseError:function(a){return a.code!==1e3&&a.code!==1001?{type:"PusherError",data:{code:a.code,message:a.reason||a.message}}:null}};var en=Ar;class zs extends At{constructor(i,o){super(),this.id=i,this.transport=o,this.activityTimeout=o.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(i){return this.transport.send(i)}send_event(i,o,g){var v={event:i,data:o};return g&&(v.channel=g),be.debug("Event sent",v),this.send(en.encodeMessage(v))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var i={message:g=>{var v;try{v=en.decodeMessage(g)}catch(k){this.emit("error",{type:"MessageParseError",error:k,data:g.data})}if(v!==void 0){switch(be.debug("Event recd",v),v.event){case"pusher:error":this.emit("error",{type:"PusherError",data:v.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",v)}},activity:()=>{this.emit("activity")},error:g=>{this.emit("error",g)},closed:g=>{o(),g&&g.code&&this.handleCloseEvent(g),this.transport=null,this.emit("closed")}},o=()=>{at(i,(g,v)=>{this.transport.unbind(v,g)})};at(i,(g,v)=>{this.transport.bind(v,g)})}handleCloseEvent(i){var o=en.getCloseAction(i),g=en.getCloseError(i);g&&this.emit("error",g),o&&this.emit(o,{action:o,error:g})}}class Us{constructor(i,o){this.transport=i,this.callback=o,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=i=>{this.unbindListeners();var o;try{o=en.processHandshake(i)}catch(g){this.finish("error",{error:g}),this.transport.close();return}o.action==="connected"?this.finish("connected",{connection:new zs(o.id,this.transport),activityTimeout:o.activityTimeout}):(this.finish(o.action,{error:o.error}),this.transport.close())},this.onClosed=i=>{this.unbindListeners();var o=en.getCloseAction(i)||"backoff",g=en.getCloseError(i);this.finish(o,{error:g})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(i,o){this.callback(Be({transport:this.transport,action:i},o))}}class qs{constructor(i,o){this.timeline=i,this.options=o||{}}send(i,o){this.timeline.isEmpty()||this.timeline.send(te.TimelineTransport.getAgent(this,i),o)}}class Ni extends At{constructor(i,o){super(function(g,v){be.debug("No callbacks on "+i+" for "+g)}),this.name=i,this.pusher=o,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(i,o){return o(null,{auth:""})}trigger(i,o){if(i.indexOf("client-")!==0)throw new O("Event '"+i+"' does not start with 'client-'");if(!this.subscribed){var g=G.buildLogSuffix("triggeringClientEvents");be.warn(`Client event triggered before channel 'subscription_succeeded' event . ${g}`)}return this.pusher.send_event(i,o,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(i){var o=i.event,g=i.data;if(o==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(i);else if(o==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(i);else if(o.indexOf("pusher_internal:")!==0){var v={};this.emit(o,g,v)}}handleSubscriptionSucceededEvent(i){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",i.data)}handleSubscriptionCountEvent(i){i.data.subscription_count&&(this.subscriptionCount=i.data.subscription_count),this.emit("pusher:subscription_count",i.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(i,o)=>{i?(this.subscriptionPending=!1,be.error(i.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:i.message},i instanceof He?{status:i.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:o.auth,channel_data:o.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class gn extends Ni{authorize(i,o){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:i},o)}}class Hs{constructor(){this.reset()}get(i){return Object.prototype.hasOwnProperty.call(this.members,i)?{id:i,info:this.members[i]}:null}each(i){at(this.members,(o,g)=>{i(this.get(g))})}setMyID(i){this.myID=i}onSubscription(i){this.members=i.presence.hash,this.count=i.presence.count,this.me=this.get(this.myID)}addMember(i){return this.get(i.user_id)===null&&this.count++,this.members[i.user_id]=i.user_info,this.get(i.user_id)}removeMember(i){var o=this.get(i.user_id);return o&&(delete this.members[i.user_id],this.count--),o}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var oi=function(a,i,o,g){function v(k){return k instanceof o?k:new o(function(D){D(k)})}return new(o||(o=Promise))(function(k,D){function W(me){try{ge(g.next(me))}catch(Te){D(Te)}}function ee(me){try{ge(g.throw(me))}catch(Te){D(Te)}}function ge(me){me.done?k(me.value):v(me.value).then(W,ee)}ge((g=g.apply(a,i||[])).next())})};class Vs extends gn{constructor(i,o){super(i,o),this.members=new Hs}authorize(i,o){super.authorize(i,(g,v)=>oi(this,void 0,void 0,function*(){if(!g)if(v=v,v.channel_data!=null){var k=JSON.parse(v.channel_data);this.members.setMyID(k.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let D=G.buildLogSuffix("authorizationEndpoint");be.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${D}, or the user should be signed in.`),o("Invalid auth response");return}o(g,v)}))}handleEvent(i){var o=i.event;if(o.indexOf("pusher_internal:")===0)this.handleInternalEvent(i);else{var g=i.data,v={};i.user_id&&(v.user_id=i.user_id),this.emit(o,g,v)}}handleInternalEvent(i){var o=i.event,g=i.data;switch(o){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(i);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(i);break;case"pusher_internal:member_added":var v=this.members.addMember(g);this.emit("pusher:member_added",v);break;case"pusher_internal:member_removed":var k=this.members.removeMember(g);k&&this.emit("pusher:member_removed",k);break}}handleSubscriptionSucceededEvent(i){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(i.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Gs=u(1),Fi=u(0);class Dr extends gn{constructor(i,o,g){super(i,o),this.key=null,this.nacl=g}authorize(i,o){super.authorize(i,(g,v)=>{if(g){o(g,v);return}let k=v.shared_secret;if(!k){o(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Fi.decode)(k),delete v.shared_secret,o(null,v)})}trigger(i,o){throw new xe("Client events are not currently supported for encrypted channels")}handleEvent(i){var o=i.event,g=i.data;if(o.indexOf("pusher_internal:")===0||o.indexOf("pusher:")===0){super.handleEvent(i);return}this.handleEncryptedEvent(o,g)}handleEncryptedEvent(i,o){if(!this.key){be.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!o.ciphertext||!o.nonce){be.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+o);return}let g=Object(Fi.decode)(o.ciphertext);if(g.length<this.nacl.secretbox.overheadLength){be.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${g.length}`);return}let v=Object(Fi.decode)(o.nonce);if(v.length<this.nacl.secretbox.nonceLength){be.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${v.length}`);return}let k=this.nacl.secretbox.open(g,v,this.key);if(k===null){be.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(D,W)=>{if(D){be.error(`Failed to make a request to the authEndpoint: ${W}. Unable to fetch new key, so dropping encrypted event`);return}if(k=this.nacl.secretbox.open(g,v,this.key),k===null){be.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(i,this.getDataToEmit(k))});return}this.emit(i,this.getDataToEmit(k))}getDataToEmit(i){let o=Object(Gs.decode)(i);try{return JSON.parse(o)}catch{return o}}}class Rr extends At{constructor(i,o){super(),this.state="initialized",this.connection=null,this.key=i,this.options=o,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var g=te.getNetwork();g.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),g.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}switchCluster(i){this.key=i,this.updateStrategy(),this.retryIn(0)}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(i){return this.connection?this.connection.send(i):!1}send_event(i,o,g){return this.connection?this.connection.send_event(i,o,g):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var i=(o,g)=>{o?this.runner=this.strategy.connect(0,i):g.action==="error"?(this.emit("error",{type:"HandshakeError",error:g.error}),this.timeline.error({handshakeError:g.error})):(this.abortConnecting(),this.handshakeCallbacks[g.action](g))};this.runner=this.strategy.connect(0,i)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var i=this.abandonConnection();i.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(i){this.timeline.info({action:"retry",delay:i}),i>0&&this.emit("connecting_in",Math.round(i/1e3)),this.retryTimer=new st(i||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new st(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new st(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new st(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(i){return Be({},i,{message:o=>{this.resetActivityCheck(),this.emit("message",o)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:o=>{this.emit("error",o)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(i){return Be({},i,{connected:o=>{this.activityTimeout=Math.min(this.options.activityTimeout,o.activityTimeout,o.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(o.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let i=o=>g=>{g.error&&this.emit("error",{type:"WebSocketError",error:g.error}),o(g)};return{tls_only:i(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:i(()=>{this.disconnect()}),backoff:i(()=>{this.retryIn(1e3)}),retry:i(()=>{this.retryIn(0)})}}setConnection(i){this.connection=i;for(var o in this.connectionCallbacks)this.connection.bind(o,this.connectionCallbacks[o]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var i in this.connectionCallbacks)this.connection.unbind(i,this.connectionCallbacks[i]);var o=this.connection;return this.connection=null,o}}updateState(i,o){var g=this.state;if(this.state=i,g!==i){var v=i;v==="connected"&&(v+=" with new socket ID "+o.socket_id),be.debug("State changed",g+" -> "+v),this.timeline.info({state:i,params:o}),this.emit("state_change",{previous:g,current:i}),this.emit(i,o)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class Br{constructor(){this.channels={}}add(i,o){return this.channels[i]||(this.channels[i]=js(i,o)),this.channels[i]}all(){return vt(this.channels)}find(i){return this.channels[i]}remove(i){var o=this.channels[i];return delete this.channels[i],o}disconnect(){at(this.channels,function(i){i.disconnect()})}}function js(a,i){if(a.indexOf("private-encrypted-")===0){if(i.config.nacl)return Dt.createEncryptedChannel(a,i,i.config.nacl);let o="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",g=G.buildLogSuffix("encryptedChannelSupport");throw new xe(`${o}. ${g}`)}else{if(a.indexOf("private-")===0)return Dt.createPrivateChannel(a,i);if(a.indexOf("presence-")===0)return Dt.createPresenceChannel(a,i);if(a.indexOf("#")===0)throw new B('Cannot create a channel with name "'+a+'".');return Dt.createChannel(a,i)}}var $s={createChannels(){return new Br},createConnectionManager(a,i){return new Rr(a,i)},createChannel(a,i){return new Ni(a,i)},createPrivateChannel(a,i){return new gn(a,i)},createPresenceChannel(a,i){return new Vs(a,i)},createEncryptedChannel(a,i,o){return new Dr(a,i,o)},createTimelineSender(a,i){return new qs(a,i)},createHandshake(a,i){return new Us(a,i)},createAssistantToTheTransportManager(a,i,o){return new Or(a,i,o)}},Dt=$s;class Nr{constructor(i){this.options=i||{},this.livesLeft=this.options.lives||1/0}getAssistant(i){return Dt.createAssistantToTheTransportManager(this,i,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Ht{constructor(i,o){this.strategies=i,this.loop=!!o.loop,this.failFast=!!o.failFast,this.timeout=o.timeout,this.timeoutLimit=o.timeoutLimit}isSupported(){return lt(this.strategies,Le.method("isSupported"))}connect(i,o){var g=this.strategies,v=0,k=this.timeout,D=null,W=(ee,ge)=>{ge?o(null,ge):(v=v+1,this.loop&&(v=v%g.length),v<g.length?(k&&(k=k*2,this.timeoutLimit&&(k=Math.min(k,this.timeoutLimit))),D=this.tryStrategy(g[v],i,{timeout:k,failFast:this.failFast},W)):o(!0))};return D=this.tryStrategy(g[v],i,{timeout:k,failFast:this.failFast},W),{abort:function(){D.abort()},forceMinPriority:function(ee){i=ee,D&&D.forceMinPriority(ee)}}}tryStrategy(i,o,g,v){var k=null,D=null;return g.timeout>0&&(k=new st(g.timeout,function(){D.abort(),v(!0)})),D=i.connect(o,function(W,ee){W&&k&&k.isRunning()&&!g.failFast||(k&&k.ensureAborted(),v(W,ee))}),{abort:function(){k&&k.ensureAborted(),D.abort()},forceMinPriority:function(W){D.forceMinPriority(W)}}}}class si{constructor(i){this.strategies=i}isSupported(){return lt(this.strategies,Le.method("isSupported"))}connect(i,o){return Fr(this.strategies,i,function(g,v){return function(k,D){if(v[g].error=k,k){Wi(v)&&o(!0);return}Lt(v,function(W){W.forceMinPriority(D.transport.priority)}),o(null,D)}})}}function Fr(a,i,o){var g=kr(a,function(v,k,D,W){return v.connect(i,o(k,W))});return{abort:function(){Lt(g,Xs)},forceMinPriority:function(v){Lt(g,function(k){k.forceMinPriority(v)})}}}function Wi(a){return An(a,function(i){return!!i.error})}function Xs(a){!a.error&&!a.aborted&&(a.abort(),a.aborted=!0)}class Wr{constructor(i,o,g){this.strategy=i,this.transports=o,this.ttl=g.ttl||1800*1e3,this.usingTLS=g.useTLS,this.timeline=g.timeline}isSupported(){return this.strategy.isSupported()}connect(i,o){var g=this.usingTLS,v=zr(g),k=v&&v.cacheSkipCount?v.cacheSkipCount:0,D=[this.strategy];if(v&&v.timestamp+this.ttl>=Le.now()){var W=this.transports[v.transport];W&&(["ws","wss"].includes(v.transport)||k>3?(this.timeline.info({cached:!0,transport:v.transport,latency:v.latency}),D.push(new Ht([W],{timeout:v.latency*2+1e3,failFast:!0}))):k++)}var ee=Le.now(),ge=D.pop().connect(i,function me(Te,ci){Te?(zi(g),D.length>0?(ee=Le.now(),ge=D.pop().connect(i,me)):o(Te)):(Ks(g,ci.transport.name,Le.now()-ee,k),o(null,ci))});return{abort:function(){ge.abort()},forceMinPriority:function(me){i=me,ge&&ge.forceMinPriority(me)}}}}function mn(a){return"pusherTransport"+(a?"TLS":"NonTLS")}function zr(a){var i=te.getLocalStorage();if(i)try{var o=i[mn(a)];if(o)return JSON.parse(o)}catch{zi(a)}return null}function Ks(a,i,o,g){var v=te.getLocalStorage();if(v)try{v[mn(a)]=ni({timestamp:Le.now(),transport:i,latency:o,cacheSkipCount:g})}catch{}}function zi(a){var i=te.getLocalStorage();if(i)try{delete i[mn(a)]}catch{}}class Fn{constructor(i,{delay:o}){this.strategy=i,this.options={delay:o}}isSupported(){return this.strategy.isSupported()}connect(i,o){var g=this.strategy,v,k=new st(this.options.delay,function(){v=g.connect(i,o)});return{abort:function(){k.ensureAborted(),v&&v.abort()},forceMinPriority:function(D){i=D,v&&v.forceMinPriority(D)}}}}class tn{constructor(i,o,g){this.test=i,this.trueBranch=o,this.falseBranch=g}isSupported(){var i=this.test()?this.trueBranch:this.falseBranch;return i.isSupported()}connect(i,o){var g=this.test()?this.trueBranch:this.falseBranch;return g.connect(i,o)}}class Js{constructor(i){this.strategy=i}isSupported(){return this.strategy.isSupported()}connect(i,o){var g=this.strategy.connect(i,function(v,k){k&&g.abort(),o(v,k)});return g}}function vn(a){return function(){return a.isSupported()}}var Ui=function(a,i,o){var g={};function v(ao,nr,lo,$t,ui){var co=o(a,ao,nr,lo,$t,ui);return g[ao]=co,co}var k=Object.assign({},i,{hostNonTLS:a.wsHost+":"+a.wsPort,hostTLS:a.wsHost+":"+a.wssPort,httpPath:a.wsPath}),D=Object.assign({},k,{useTLS:!0}),W=Object.assign({},i,{hostNonTLS:a.httpHost+":"+a.httpPort,hostTLS:a.httpHost+":"+a.httpsPort,httpPath:a.httpPath}),ee={loop:!0,timeout:15e3,timeoutLimit:6e4},ge=new Nr({minPingDelay:1e4,maxPingDelay:a.activityTimeout}),me=new Nr({lives:2,minPingDelay:1e4,maxPingDelay:a.activityTimeout}),Te=v("ws","ws",3,k,ge),ci=v("wss","ws",3,D,ge),to=v("sockjs","sockjs",1,W),Ze=v("xhr_streaming","xhr_streaming",1,W,me),Qi=v("xdr_streaming","xdr_streaming",1,W,me),bn=v("xhr_polling","xhr_polling",1,W),no=v("xdr_polling","xdr_polling",1,W),er=new Ht([Te],ee),va=new Ht([ci],ee),_a=new Ht([to],ee),ro=new Ht([new tn(vn(Ze),Ze,Qi)],ee),oo=new Ht([new tn(vn(bn),bn,no)],ee),so=new Ht([new tn(vn(ro),new si([ro,new Fn(oo,{delay:4e3})]),oo)],ee),jt=new tn(vn(so),so,_a),tr;return i.useTLS?tr=new si([er,new Fn(jt,{delay:2e3})]):tr=new si([er,new Fn(va,{delay:2e3}),new Fn(jt,{delay:5e3})]),new Wr(new Js(new tn(vn(Te),tr,jt)),g,{ttl:18e5,timeline:i.timeline,useTLS:i.useTLS})},qi=Ui,_n=function(){var a=this;a.timeline.info(a.buildTimelineMessage({transport:a.name+(a.options.useTLS?"s":"")})),a.hooks.isInitialized()?a.changeState("initialized"):a.hooks.file?(a.changeState("initializing"),F.load(a.hooks.file,{useTLS:a.options.useTLS},function(i,o){a.hooks.isInitialized()?(a.changeState("initialized"),o(!0)):(i&&a.onError(i),a.onClose(),o(!1))})):a.onClose()},Ur={getRequest:function(a){var i=new window.XDomainRequest;return i.ontimeout=function(){a.emit("error",new Q),a.close()},i.onerror=function(o){a.emit("error",o),a.close()},i.onprogress=function(){i.responseText&&i.responseText.length>0&&a.onChunk(200,i.responseText)},i.onload=function(){i.responseText&&i.responseText.length>0&&a.onChunk(200,i.responseText),a.emit("finished",200),a.close()},i},abortRequest:function(a){a.ontimeout=a.onerror=a.onprogress=a.onload=null,a.abort()}},qr=Ur;let Ys=256*1024;class Hr extends At{constructor(i,o,g){super(),this.hooks=i,this.method=o,this.url=g}start(i){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},te.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(i)}close(){this.unloader&&(te.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(i,o){for(;;){var g=this.advanceBuffer(o);if(g)this.emit("chunk",{status:i,data:g});else break}this.isBufferTooLong(o)&&this.emit("buffer_too_long")}advanceBuffer(i){var o=i.slice(this.position),g=o.indexOf(`
`);return g!==-1?(this.position+=g+1,o.slice(0,g)):null}isBufferTooLong(i){return this.position===i.length&&i.length>Ys}}var Hi=function(a){return a[a.CONNECTING=0]="CONNECTING",a[a.OPEN=1]="OPEN",a[a.CLOSED=3]="CLOSED",a}(Hi||{}),Vt=Hi,Vr=1;class Zs{constructor(i,o){this.hooks=i,this.session=Gr(1e3)+"/"+na(8),this.location=Qs(o),this.readyState=Vt.CONNECTING,this.openStream()}send(i){return this.sendRaw(JSON.stringify([i]))}ping(){this.hooks.sendHeartbeat(this)}close(i,o){this.onClose(i,o,!0)}sendRaw(i){if(this.readyState===Vt.OPEN)try{return te.createSocketRequest("POST",Vi(ea(this.location,this.session))).start(i),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(i,o,g){this.closeStream(),this.readyState=Vt.CLOSED,this.onclose&&this.onclose({code:i,reason:o,wasClean:g})}onChunk(i){if(i.status===200){this.readyState===Vt.OPEN&&this.onActivity();var o,g=i.data.slice(0,1);switch(g){case"o":o=JSON.parse(i.data.slice(1)||"{}"),this.onOpen(o);break;case"a":o=JSON.parse(i.data.slice(1)||"[]");for(var v=0;v<o.length;v++)this.onEvent(o[v]);break;case"m":o=JSON.parse(i.data.slice(1)||"null"),this.onEvent(o);break;case"h":this.hooks.onHeartbeat(this);break;case"c":o=JSON.parse(i.data.slice(1)||"[]"),this.onClose(o[0],o[1],!0);break}}}onOpen(i){this.readyState===Vt.CONNECTING?(i&&i.hostname&&(this.location.base=ta(this.location.base,i.hostname)),this.readyState=Vt.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(i){this.readyState===Vt.OPEN&&this.onmessage&&this.onmessage({data:i})}onActivity(){this.onactivity&&this.onactivity()}onError(i){this.onerror&&this.onerror(i)}openStream(){this.stream=te.createSocketRequest("POST",Vi(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",i=>{this.onChunk(i)}),this.stream.bind("finished",i=>{this.hooks.onFinished(this,i)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(i){Le.defer(()=>{this.onError(i),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function Qs(a){var i=/([^\?]*)\/*(\??.*)/.exec(a);return{base:i[1],queryString:i[2]}}function ea(a,i){return a.base+"/"+i+"/xhr_send"}function Vi(a){var i=a.indexOf("?")===-1?"?":"&";return a+i+"t="+ +new Date+"&n="+Vr++}function ta(a,i){var o=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(a);return o[1]+i+o[3]}function Gr(a){return te.randomInt(a)}function na(a){for(var i=[],o=0;o<a;o++)i.push(Gr(32).toString(32));return i.join("")}var ia=Zs,Gi={getReceiveURL:function(a,i){return a.base+"/"+i+"/xhr_streaming"+a.queryString},onHeartbeat:function(a){a.sendRaw("[]")},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,i){a.onClose(1006,"Connection interrupted ("+i+")",!1)}},ra=Gi,oa={getReceiveURL:function(a,i){return a.base+"/"+i+"/xhr"+a.queryString},onHeartbeat:function(){},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,i){i===200?a.reconnect():a.onClose(1006,"Connection interrupted ("+i+")",!1)}},sa=oa,aa={getRequest:function(a){var i=te.getXHRAPI(),o=new i;return o.onreadystatechange=o.onprogress=function(){switch(o.readyState){case 3:o.responseText&&o.responseText.length>0&&a.onChunk(o.status,o.responseText);break;case 4:o.responseText&&o.responseText.length>0&&a.onChunk(o.status,o.responseText),a.emit("finished",o.status),a.close();break}},o},abortRequest:function(a){a.onreadystatechange=null,a.abort()}},la=aa,Se={createStreamingSocket(a){return this.createSocket(ra,a)},createPollingSocket(a){return this.createSocket(sa,a)},createSocket(a,i){return new ia(a,i)},createXHR(a,i){return this.createRequest(la,a,i)},createRequest(a,i,o){return new Hr(a,i,o)}},we=Se;we.createXDR=function(a,i){return this.createRequest(qr,a,i)};var ca=we,ua={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:s,DependenciesReceivers:z,getDefaultStrategy:qi,Transports:Ns,transportConnectionInitializer:_n,HTTPFactory:ca,TimelineTransport:Ai,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(a){window.Pusher=a;var i=()=>{this.onDocumentBody(a.ready)};window.JSON?i():F.load("json2",{},i)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:Ut,jsonp:Ti}},onDocumentBody(a){document.body?a():setTimeout(()=>{this.onDocumentBody(a)},0)},createJSONPRequest(a,i){return new Ei(a,i)},createScriptRequest(a){return new Ii(a)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var a=this.getXHRAPI();return new a},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return Ws},createWebSocket(a){var i=this.getWebSocketAPI();return new i(a)},createSocketRequest(a,i){if(this.isXHRSupported())return this.HTTPFactory.createXHR(a,i);if(this.isXDRSupported(i.indexOf("https:")===0))return this.HTTPFactory.createXDR(a,i);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var a=this.getXHRAPI();return!!a&&new a().withCredentials!==void 0},isXDRSupported(a){var i=a?"https:":"http:",o=this.getProtocol();return!!window.XDomainRequest&&o===i},addUnloadListener(a){window.addEventListener!==void 0?window.addEventListener("unload",a,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",a)},removeUnloadListener(a){window.addEventListener!==void 0?window.removeEventListener("unload",a,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",a)},randomInt(a){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*a)}},te=ua,jr=function(a){return a[a.ERROR=3]="ERROR",a[a.INFO=6]="INFO",a[a.DEBUG=7]="DEBUG",a}(jr||{}),ai=jr;class ha{constructor(i,o,g){this.key=i,this.session=o,this.events=[],this.options=g||{},this.sent=0,this.uniqueID=0}log(i,o){i<=this.options.level&&(this.events.push(Be({},o,{timestamp:Le.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(i){this.log(ai.ERROR,i)}info(i){this.log(ai.INFO,i)}debug(i){this.log(ai.DEBUG,i)}isEmpty(){return this.events.length===0}send(i,o){var g=Be({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],i(g,(v,k)=>{v||this.sent++,o&&o(v,k)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class $r{constructor(i,o,g,v){this.name=i,this.priority=o,this.transport=g,this.options=v||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(i,o){if(this.isSupported()){if(this.priority<i)return Xr(new ue,o)}else return Xr(new Fe,o);var g=!1,v=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),k=null,D=function(){v.unbind("initialized",D),v.connect()},W=function(){k=Dt.createHandshake(v,function(Te){g=!0,me(),o(null,Te)})},ee=function(Te){me(),o(Te)},ge=function(){me();var Te;Te=ni(v),o(new Me(Te))},me=function(){v.unbind("initialized",D),v.unbind("open",W),v.unbind("error",ee),v.unbind("closed",ge)};return v.bind("initialized",D),v.bind("open",W),v.bind("error",ee),v.bind("closed",ge),v.initialize(),{abort:()=>{g||(me(),k?k.close():v.close())},forceMinPriority:Te=>{g||this.priority<Te&&(k?k.close():v.close())}}}}function Xr(a,i){return Le.defer(function(){i(a)}),{abort:function(){},forceMinPriority:function(){}}}let{Transports:Ne}=te;var ji=function(a,i,o,g,v,k){var D=Ne[o];if(!D)throw new qe(o);var W=(!a.enabledTransports||Ln(a.enabledTransports,i)!==-1)&&(!a.disabledTransports||Ln(a.disabledTransports,i)===-1),ee;return W?(v=Object.assign({ignoreNullOrigin:a.ignoreNullOrigin},v),ee=new $r(i,g,k?k.getAssistant(D):D,v)):ee=nn,ee},nn={isSupported:function(){return!1},connect:function(a,i){var o=Le.defer(function(){i(new Fe)});return{abort:function(){o.ensureAborted()},forceMinPriority:function(){}}}};function Kr(a){if(a==null)throw"You must pass an options object";if(a.cluster==null)throw"Options object must provide a cluster";"disableStats"in a&&be.warn("The disableStats option is deprecated in favor of enableStats")}let $i=(a,i)=>{var o="socket_id="+encodeURIComponent(a.socketId);for(var g in i.params)o+="&"+encodeURIComponent(g)+"="+encodeURIComponent(i.params[g]);if(i.paramsProvider!=null){let v=i.paramsProvider();for(var g in v)o+="&"+encodeURIComponent(g)+"="+encodeURIComponent(v[g])}return o};var Jr=a=>{if(typeof te.getAuthorizers()[a.transport]>"u")throw`'${a.transport}' is not a recognized auth transport`;return(i,o)=>{let g=$i(i,a);te.getAuthorizers()[a.transport](te,g,a,q.UserAuthentication,o)}};let Yr=(a,i)=>{var o="socket_id="+encodeURIComponent(a.socketId);o+="&channel_name="+encodeURIComponent(a.channelName);for(var g in i.params)o+="&"+encodeURIComponent(g)+"="+encodeURIComponent(i.params[g]);if(i.paramsProvider!=null){let v=i.paramsProvider();for(var g in v)o+="&"+encodeURIComponent(g)+"="+encodeURIComponent(v[g])}return o};var Zr=a=>{if(typeof te.getAuthorizers()[a.transport]>"u")throw`'${a.transport}' is not a recognized auth transport`;return(i,o)=>{let g=Yr(i,a);te.getAuthorizers()[a.transport](te,g,a,q.ChannelAuthorization,o)}};let Qr=(a,i,o)=>{let g={authTransport:i.transport,authEndpoint:i.endpoint,auth:{params:i.params,headers:i.headers}};return(v,k)=>{let D=a.channel(v.channelName);o(D,g).authorize(v.socketId,k)}};function Xi(a,i){let o={activityTimeout:a.activityTimeout||C.activityTimeout,cluster:a.cluster,httpPath:a.httpPath||C.httpPath,httpPort:a.httpPort||C.httpPort,httpsPort:a.httpsPort||C.httpsPort,pongTimeout:a.pongTimeout||C.pongTimeout,statsHost:a.statsHost||C.stats_host,unavailableTimeout:a.unavailableTimeout||C.unavailableTimeout,wsPath:a.wsPath||C.wsPath,wsPort:a.wsPort||C.wsPort,wssPort:a.wssPort||C.wssPort,enableStats:eo(a),httpHost:tt(a),useTLS:pa(a),wsHost:da(a),userAuthenticator:li(a),channelAuthorizer:Pe(a,i)};return"disabledTransports"in a&&(o.disabledTransports=a.disabledTransports),"enabledTransports"in a&&(o.enabledTransports=a.enabledTransports),"ignoreNullOrigin"in a&&(o.ignoreNullOrigin=a.ignoreNullOrigin),"timelineParams"in a&&(o.timelineParams=a.timelineParams),"nacl"in a&&(o.nacl=a.nacl),o}function tt(a){return a.httpHost?a.httpHost:a.cluster?`sockjs-${a.cluster}.pusher.com`:C.httpHost}function da(a){return a.wsHost?a.wsHost:ct(a.cluster)}function ct(a){return`ws-${a}.pusher.com`}function pa(a){return te.getProtocol()==="https:"?!0:a.forceTLS!==!1}function eo(a){return"enableStats"in a?a.enableStats:"disableStats"in a?!a.disableStats:!1}let Rt=a=>"customHandler"in a&&a.customHandler!=null;function li(a){let i=Object.assign(Object.assign({},C.userAuthentication),a.userAuthentication);return Rt(i)?i.customHandler:Jr(i)}function Ki(a,i){let o;if("channelAuthorization"in a)o=Object.assign(Object.assign({},C.channelAuthorization),a.channelAuthorization);else if(o={transport:a.authTransport||C.authTransport,endpoint:a.authEndpoint||C.authEndpoint},"auth"in a&&("params"in a.auth&&(o.params=a.auth.params),"headers"in a.auth&&(o.headers=a.auth.headers)),"authorizer"in a)return{customHandler:Qr(i,o,a.authorizer)};return o}function Pe(a,i){let o=Ki(a,i);return Rt(o)?o.customHandler:Zr(o)}class Gt extends At{constructor(i){super(function(o,g){be.debug(`No callbacks on watchlist events for ${o}`)}),this.pusher=i,this.bindWatchlistInternalEvent()}handleEvent(i){i.data.events.forEach(o=>{this.emit(o.name,o)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",i=>{var o=i.event;o==="pusher_internal:watchlist_events"&&this.handleEvent(i)})}}function Ji(){let a,i;return{promise:new Promise((g,v)=>{a=g,i=v}),resolve:a,reject:i}}var ga=Ji;class Yi extends At{constructor(i){super(function(o,g){be.debug("No callbacks on user for "+o)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(o,g)=>{if(o){be.warn(`Error during signin: ${o}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:g.auth,user_data:g.user_data})},this.pusher=i,this.pusher.connection.bind("state_change",({previous:o,current:g})=>{o!=="connected"&&g==="connected"&&this._signin(),o==="connected"&&g!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new Gt(i),this.pusher.connection.bind("message",o=>{var g=o.event;g==="pusher:signin_success"&&this._onSigninSuccess(o.data),this.serverToUserChannel&&this.serverToUserChannel.name===o.channel&&this.serverToUserChannel.handleEvent(o)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(i){try{this.user_data=JSON.parse(i.user_data)}catch{be.error(`Failed parsing user data after signin: ${i.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){be.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){let i=o=>{o.subscriptionPending&&o.subscriptionCancelled?o.reinstateSubscription():!o.subscriptionPending&&this.pusher.connection.state==="connected"&&o.subscribe()};this.serverToUserChannel=new Ni(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((o,g)=>{o.indexOf("pusher_internal:")===0||o.indexOf("pusher:")===0||this.emit(o,g)}),i(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;let{promise:i,resolve:o,reject:g}=ga();i.done=!1;let v=()=>{i.done=!0};i.then(v).catch(v),this.signinDonePromise=i,this._signinDoneResolve=o}}class We{static ready(){We.isReady=!0;for(var i=0,o=We.instances.length;i<o;i++)We.instances[i].connect()}static getClientFeatures(){return ki(Mr({ws:te.Transports.ws},function(i){return i.isSupported({})}))}constructor(i,o){ma(i),Kr(o),this.key=i,this.options=o,this.config=Xi(this.options,this),this.channels=Dt.createChannels(),this.global_emitter=new At,this.sessionID=te.randomInt(1e9),this.timeline=new ha(this.key,this.sessionID,{cluster:this.config.cluster,features:We.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:ai.INFO,version:C.VERSION}),this.config.enableStats&&(this.timelineSender=Dt.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+te.TimelineTransport.name}));var g=v=>te.getDefaultStrategy(this.config,v,ji);this.connection=Dt.createConnectionManager(this.key,{getStrategy:g,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",v=>{var k=v.event,D=k.indexOf("pusher_internal:")===0;if(v.channel){var W=this.channel(v.channel);W&&W.handleEvent(v)}D||this.global_emitter.emit(v.event,v.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",v=>{be.warn(v)}),We.instances.push(this),this.timeline.info({instances:We.instances.length}),this.user=new Yi(this),We.isReady&&this.connect()}switchCluster(i){let{appKey:o,cluster:g}=i;this.key=o,this.options=Object.assign(Object.assign({},this.options),{cluster:g}),this.config=Xi(this.options,this),this.connection.switchCluster(this.key)}channel(i){return this.channels.find(i)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var i=this.connection.isUsingTLS(),o=this.timelineSender;this.timelineSenderTimer=new ei(6e4,function(){o.send(i)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(i,o,g){return this.global_emitter.bind(i,o,g),this}unbind(i,o,g){return this.global_emitter.unbind(i,o,g),this}bind_global(i){return this.global_emitter.bind_global(i),this}unbind_global(i){return this.global_emitter.unbind_global(i),this}unbind_all(i){return this.global_emitter.unbind_all(),this}subscribeAll(){var i;for(i in this.channels.channels)this.channels.channels.hasOwnProperty(i)&&this.subscribe(i)}subscribe(i){var o=this.channels.add(i,this);return o.subscriptionPending&&o.subscriptionCancelled?o.reinstateSubscription():!o.subscriptionPending&&this.connection.state==="connected"&&o.subscribe(),o}unsubscribe(i){var o=this.channels.find(i);o&&o.subscriptionPending?o.cancelSubscription():(o=this.channels.remove(i),o&&o.subscribed&&o.unsubscribe())}send_event(i,o,g){return this.connection.send_event(i,o,g)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}We.instances=[],We.isReady=!1,We.logToConsole=!1,We.Runtime=te,We.ScriptReceivers=te.ScriptReceivers,We.DependenciesReceivers=te.DependenciesReceivers,We.auth_callbacks=te.auth_callbacks;var Zi=c.default=We;function ma(a){if(a==null)throw"You must pass your app key when you instantiate Pusher."}te.setup(We)}])})});var vh=gu((xi,Cr)=>{"use strict";(function(){var f,c="4.17.21",u=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",m="Invalid `variable` option passed into `_.template`",C="__lodash_hash_undefined__",A=500,z="__lodash_placeholder__",F=1,V=2,H=4,G=1,q=2,O=1,B=2,Q=4,ue=8,Me=16,xe=32,qe=64,Fe=128,He=256,mt=512,Ut=30,ys="...",En=800,dn=16,xr=1,Zn=2,ws=3,Qt=1/0,qt=9007199254740991,Cs=17976931348623157e292,Qn=NaN,St=4294967295,Sr=St-1,xs=St>>>1,Ss=[["ary",Fe],["bind",O],["bindKey",B],["curry",ue],["curryRight",Me],["flip",mt],["partial",xe],["partialRight",qe],["rearg",He]],st="[object Arguments]",ei="[object Array]",ks="[object AsyncFunction]",Le="[object Boolean]",Be="[object Date]",Ms="[object DOMException]",Ln="[object Error]",at="[object Function]",ki="[object GeneratorFunction]",vt="[object Map]",Lt="[object Number]",kr="[object Null]",Ot="[object Object]",Mi="[object Promise]",Mr="[object Proxy]",On="[object RegExp]",lt="[object Set]",An="[object String]",ti="[object Symbol]",Ps="[object Undefined]",Dn="[object WeakMap]",ni="[object WeakSet]",Rn="[object ArrayBuffer]",be="[object DataView]",Pi="[object Float32Array]",Ti="[object Float64Array]",Ii="[object Int8Array]",Ei="[object Int16Array]",Li="[object Int32Array]",Oi="[object Uint8Array]",Ai="[object Uint8ClampedArray]",Bn="[object Uint16Array]",Nn="[object Uint32Array]",Ts=/\b__p \+= '';/g,Is=/\b(__p \+=) '' \+/g,Es=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pr=/&(?:amp|lt|gt|quot|#39);/g,ii=/[&<>"']/g,At=RegExp(Pr.source),Ls=RegExp(ii.source),pn=/<%-([\s\S]+?)%>/g,Os=/<%([\s\S]+?)%>/g,Di=/<%=([\s\S]+?)%>/g,Tr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ir=/^\w*$/,Er=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ri=/[\\^$.*+?()[\]{}|]/g,As=RegExp(Ri.source),Bi=/^\s+/,ri=/\s/,Ds=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Lr=/\{\n\/\* \[wrapped with (.+)\] \*/,Rs=/,? & /,Bs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ns=/[()=,{}\[\]\/\s]/,Fs=/\\(\\)?/g,Ws=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,Ar=/^[-+]0x[0-9a-f]+$/i,en=/^0b[01]+$/i,zs=/^\[object .+?Constructor\]$/,Us=/^0o[0-7]+$/i,qs=/^(?:0|[1-9]\d*)$/,Ni=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gn=/($^)/,Hs=/['\n\r\u2028\u2029\\]/g,oi="\\ud800-\\udfff",Vs="\\u0300-\\u036f",Gs="\\ufe20-\\ufe2f",Fi="\\u20d0-\\u20ff",Dr=Vs+Gs+Fi,Rr="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",js="\\xac\\xb1\\xd7\\xf7",$s="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Dt="\\u2000-\\u206f",Nr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ht="A-Z\\xc0-\\xd6\\xd8-\\xde",si="\\ufe0e\\ufe0f",Fr=js+$s+Dt+Nr,Wi="['\u2019]",Xs="["+oi+"]",Wr="["+Fr+"]",mn="["+Dr+"]",zr="\\d+",Ks="["+Rr+"]",zi="["+Br+"]",Fn="[^"+oi+Fr+zr+Rr+Br+Ht+"]",tn="\\ud83c[\\udffb-\\udfff]",Js="(?:"+mn+"|"+tn+")",vn="[^"+oi+"]",Ui="(?:\\ud83c[\\udde6-\\uddff]){2}",qi="[\\ud800-\\udbff][\\udc00-\\udfff]",_n="["+Ht+"]",Ur="\\u200d",qr="(?:"+zi+"|"+Fn+")",Ys="(?:"+_n+"|"+Fn+")",Hr="(?:"+Wi+"(?:d|ll|m|re|s|t|ve))?",Hi="(?:"+Wi+"(?:D|LL|M|RE|S|T|VE))?",Vt=Js+"?",Vr="["+si+"]?",Zs="(?:"+Ur+"(?:"+[vn,Ui,qi].join("|")+")"+Vr+Vt+")*",Qs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ea="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vi=Vr+Vt+Zs,ta="(?:"+[Ks,Ui,qi].join("|")+")"+Vi,Gr="(?:"+[vn+mn+"?",mn,Ui,qi,Xs].join("|")+")",na=RegExp(Wi,"g"),ia=RegExp(mn,"g"),Gi=RegExp(tn+"(?="+tn+")|"+Gr+Vi,"g"),ra=RegExp([_n+"?"+zi+"+"+Hr+"(?="+[Wr,_n,"$"].join("|")+")",Ys+"+"+Hi+"(?="+[Wr,_n+qr,"$"].join("|")+")",_n+"?"+qr+"+"+Hr,_n+"+"+Hi,ea,Qs,zr,ta].join("|"),"g"),oa=RegExp("["+Ur+oi+Dr+si+"]"),sa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],la=-1,Se={};Se[Pi]=Se[Ti]=Se[Ii]=Se[Ei]=Se[Li]=Se[Oi]=Se[Ai]=Se[Bn]=Se[Nn]=!0,Se[st]=Se[ei]=Se[Rn]=Se[Le]=Se[be]=Se[Be]=Se[Ln]=Se[at]=Se[vt]=Se[Lt]=Se[Ot]=Se[On]=Se[lt]=Se[An]=Se[Dn]=!1;var we={};we[st]=we[ei]=we[Rn]=we[be]=we[Le]=we[Be]=we[Pi]=we[Ti]=we[Ii]=we[Ei]=we[Li]=we[vt]=we[Lt]=we[Ot]=we[On]=we[lt]=we[An]=we[ti]=we[Oi]=we[Ai]=we[Bn]=we[Nn]=!0,we[Ln]=we[at]=we[Dn]=!1;var ca={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ai=parseFloat,ha=parseInt,$r=typeof global=="object"&&global&&global.Object===Object&&global,Xr=typeof self=="object"&&self&&self.Object===Object&&self,Ne=$r||Xr||Function("return this")(),ji=typeof xi=="object"&&xi&&!xi.nodeType&&xi,nn=ji&&typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,Kr=nn&&nn.exports===ji,$i=Kr&&$r.process,_t=function(){try{var y=nn&&nn.require&&nn.require("util").types;return y||$i&&$i.binding&&$i.binding("util")}catch{}}(),Jr=_t&&_t.isArrayBuffer,Yr=_t&&_t.isDate,fa=_t&&_t.isMap,Zr=_t&&_t.isRegExp,Qr=_t&&_t.isSet,Xi=_t&&_t.isTypedArray;function tt(y,S,x){switch(x.length){case 0:return y.call(S);case 1:return y.call(S,x[0]);case 2:return y.call(S,x[0],x[1]);case 3:return y.call(S,x[0],x[1],x[2])}return y.apply(S,x)}function da(y,S,x,N){for(var ne=-1,ve=y==null?0:y.length;++ne<ve;){var ze=y[ne];S(N,ze,x(ze),y)}return N}function ct(y,S){for(var x=-1,N=y==null?0:y.length;++x<N&&S(y[x],x,y)!==!1;);return y}function pa(y,S){for(var x=y==null?0:y.length;x--&&S(y[x],x,y)!==!1;);return y}function eo(y,S){for(var x=-1,N=y==null?0:y.length;++x<N;)if(!S(y[x],x,y))return!1;return!0}function Rt(y,S){for(var x=-1,N=y==null?0:y.length,ne=0,ve=[];++x<N;){var ze=y[x];S(ze,x,y)&&(ve[ne++]=ze)}return ve}function li(y,S){var x=y==null?0:y.length;return!!x&&o(y,S,0)>-1}function Ki(y,S,x){for(var N=-1,ne=y==null?0:y.length;++N<ne;)if(x(S,y[N]))return!0;return!1}function Pe(y,S){for(var x=-1,N=y==null?0:y.length,ne=Array(N);++x<N;)ne[x]=S(y[x],x,y);return ne}function Gt(y,S){for(var x=-1,N=S.length,ne=y.length;++x<N;)y[ne+x]=S[x];return y}function Ji(y,S,x,N){var ne=-1,ve=y==null?0:y.length;for(N&&ve&&(x=y[++ne]);++ne<ve;)x=S(x,y[ne],ne,y);return x}function ga(y,S,x,N){var ne=y==null?0:y.length;for(N&&ne&&(x=y[--ne]);ne--;)x=S(x,y[ne],ne,y);return x}function Yi(y,S){for(var x=-1,N=y==null?0:y.length;++x<N;)if(S(y[x],x,y))return!0;return!1}var We=D("length");function Zi(y){return y.split("")}function ma(y){return y.match(Bs)||[]}function a(y,S,x){var N;return x(y,function(ne,ve,ze){if(S(ne,ve,ze))return N=ve,!1}),N}function i(y,S,x,N){for(var ne=y.length,ve=x+(N?1:-1);N?ve--:++ve<ne;)if(S(y[ve],ve,y))return ve;return-1}function o(y,S,x){return S===S?xh(y,S,x):i(y,v,x)}function g(y,S,x,N){for(var ne=x-1,ve=y.length;++ne<ve;)if(N(y[ne],S))return ne;return-1}function v(y){return y!==y}function k(y,S){var x=y==null?0:y.length;return x?me(y,S)/x:Qn}function D(y){return function(S){return S==null?f:S[y]}}function W(y){return function(S){return y==null?f:y[S]}}function ee(y,S,x,N,ne){return ne(y,function(ve,ze,ke){x=N?(N=!1,ve):S(x,ve,ze,ke)}),x}function ge(y,S){var x=y.length;for(y.sort(S);x--;)y[x]=y[x].value;return y}function me(y,S){for(var x,N=-1,ne=y.length;++N<ne;){var ve=S(y[N]);ve!==f&&(x=x===f?ve:x+ve)}return x}function Te(y,S){for(var x=-1,N=Array(y);++x<y;)N[x]=S(x);return N}function ci(y,S){return Pe(S,function(x){return[x,y[x]]})}function to(y){return y&&y.slice(0,Sl(y)+1).replace(Bi,"")}function Ze(y){return function(S){return y(S)}}function Qi(y,S){return Pe(S,function(x){return y[x]})}function bn(y,S){return y.has(S)}function no(y,S){for(var x=-1,N=y.length;++x<N&&o(S,y[x],0)>-1;);return x}function er(y,S){for(var x=y.length;x--&&o(S,y[x],0)>-1;);return x}function va(y,S){for(var x=y.length,N=0;x--;)y[x]===S&&++N;return N}var _a=W(ca),ro=W(ua);function oo(y){return"\\"+jr[y]}function so(y,S){return y==null?f:y[S]}function jt(y){return oa.test(y)}function tr(y){return sa.test(y)}function ao(y){for(var S,x=[];!(S=y.next()).done;)x.push(S.value);return x}function nr(y){var S=-1,x=Array(y.size);return y.forEach(function(N,ne){x[++S]=[ne,N]}),x}function lo(y,S){return function(x){return y(S(x))}}function $t(y,S){for(var x=-1,N=y.length,ne=0,ve=[];++x<N;){var ze=y[x];(ze===S||ze===z)&&(y[x]=z,ve[ne++]=x)}return ve}function ui(y){var S=-1,x=Array(y.size);return y.forEach(function(N){x[++S]=N}),x}function co(y){var S=-1,x=Array(y.size);return y.forEach(function(N){x[++S]=[N,N]}),x}function xh(y,S,x){for(var N=x-1,ne=y.length;++N<ne;)if(y[N]===S)return N;return-1}function Sh(y,S,x){for(var N=x+1;N--;)if(y[N]===S)return N;return N}function hi(y){return jt(y)?Mh(y):We(y)}function Bt(y){return jt(y)?Ph(y):Zi(y)}function Sl(y){for(var S=y.length;S--&&ri.test(y.charAt(S)););return S}var kh=W(te);function Mh(y){for(var S=Gi.lastIndex=0;Gi.test(y);)++S;return S}function Ph(y){return y.match(Gi)||[]}function Th(y){return y.match(ra)||[]}var Ih=function y(S){S=S==null?Ne:yn.defaults(Ne.Object(),S,yn.pick(Ne,aa));var x=S.Array,N=S.Date,ne=S.Error,ve=S.Function,ze=S.Math,ke=S.Object,ba=S.RegExp,Eh=S.String,kt=S.TypeError,uo=x.prototype,Lh=ve.prototype,fi=ke.prototype,ho=S["__core-js_shared__"],fo=Lh.toString,Ce=fi.hasOwnProperty,Oh=0,kl=function(){var e=/[^.]+$/.exec(ho&&ho.keys&&ho.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),po=fi.toString,Ah=fo.call(ke),Dh=Ne._,Rh=ba("^"+fo.call(Ce).replace(Ri,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),go=Kr?S.Buffer:f,wn=S.Symbol,mo=S.Uint8Array,Ml=go?go.allocUnsafe:f,vo=lo(ke.getPrototypeOf,ke),Pl=ke.create,Tl=fi.propertyIsEnumerable,_o=uo.splice,Il=wn?wn.isConcatSpreadable:f,ir=wn?wn.iterator:f,Wn=wn?wn.toStringTag:f,bo=function(){try{var e=Vn(ke,"defineProperty");return e({},"",{}),e}catch{}}(),Bh=S.clearTimeout!==Ne.clearTimeout&&S.clearTimeout,Nh=N&&N.now!==Ne.Date.now&&N.now,Fh=S.setTimeout!==Ne.setTimeout&&S.setTimeout,yo=ze.ceil,wo=ze.floor,ya=ke.getOwnPropertySymbols,Wh=go?go.isBuffer:f,El=S.isFinite,zh=uo.join,Uh=lo(ke.keys,ke),Ue=ze.max,Qe=ze.min,qh=N.now,Hh=S.parseInt,Ll=ze.random,Vh=uo.reverse,wa=Vn(S,"DataView"),rr=Vn(S,"Map"),Ca=Vn(S,"Promise"),di=Vn(S,"Set"),or=Vn(S,"WeakMap"),sr=Vn(ke,"create"),Co=or&&new or,pi={},Gh=Gn(wa),jh=Gn(rr),$h=Gn(Ca),Xh=Gn(di),Kh=Gn(or),xo=wn?wn.prototype:f,ar=xo?xo.valueOf:f,Ol=xo?xo.toString:f;function d(e){if(Oe(e)&&!oe(e)&&!(e instanceof fe)){if(e instanceof Mt)return e;if(Ce.call(e,"__wrapped__"))return Ac(e)}return new Mt(e)}var gi=function(){function e(){}return function(t){if(!Ie(t))return{};if(Pl)return Pl(t);e.prototype=t;var n=new e;return e.prototype=f,n}}();function So(){}function Mt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=f}d.templateSettings={escape:pn,evaluate:Os,interpolate:Di,variable:"",imports:{_:d}},d.prototype=So.prototype,d.prototype.constructor=d,Mt.prototype=gi(So.prototype),Mt.prototype.constructor=Mt;function fe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=St,this.__views__=[]}function Jh(){var e=new fe(this.__wrapped__);return e.__actions__=ut(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ut(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ut(this.__views__),e}function Yh(){if(this.__filtered__){var e=new fe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Zh(){var e=this.__wrapped__.value(),t=this.__dir__,n=oe(e),r=t<0,h=n?e.length:0,p=hd(0,h,this.__views__),_=p.start,b=p.end,w=b-_,M=r?b:_-1,T=this.__iteratees__,E=T.length,R=0,U=Qe(w,this.__takeCount__);if(!n||!r&&h==w&&U==w)return nc(e,this.__actions__);var X=[];e:for(;w--&&R<U;){M+=t;for(var le=-1,K=e[M];++le<E;){var he=T[le],de=he.iteratee,wt=he.type,rt=de(K);if(wt==Zn)K=rt;else if(!rt){if(wt==xr)continue e;break e}}X[R++]=K}return X}fe.prototype=gi(So.prototype),fe.prototype.constructor=fe;function zn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qh(){this.__data__=sr?sr(null):{},this.size=0}function ef(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function tf(e){var t=this.__data__;if(sr){var n=t[e];return n===C?f:n}return Ce.call(t,e)?t[e]:f}function nf(e){var t=this.__data__;return sr?t[e]!==f:Ce.call(t,e)}function rf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sr&&t===f?C:t,this}zn.prototype.clear=Qh,zn.prototype.delete=ef,zn.prototype.get=tf,zn.prototype.has=nf,zn.prototype.set=rf;function rn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function of(){this.__data__=[],this.size=0}function sf(e){var t=this.__data__,n=ko(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():_o.call(t,n,1),--this.size,!0}function af(e){var t=this.__data__,n=ko(t,e);return n<0?f:t[n][1]}function lf(e){return ko(this.__data__,e)>-1}function cf(e,t){var n=this.__data__,r=ko(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}rn.prototype.clear=of,rn.prototype.delete=sf,rn.prototype.get=af,rn.prototype.has=lf,rn.prototype.set=cf;function on(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function uf(){this.size=0,this.__data__={hash:new zn,map:new(rr||rn),string:new zn}}function hf(e){var t=No(this,e).delete(e);return this.size-=t?1:0,t}function ff(e){return No(this,e).get(e)}function df(e){return No(this,e).has(e)}function pf(e,t){var n=No(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}on.prototype.clear=uf,on.prototype.delete=hf,on.prototype.get=ff,on.prototype.has=df,on.prototype.set=pf;function Un(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new on;++t<n;)this.add(e[t])}function gf(e){return this.__data__.set(e,C),this}function mf(e){return this.__data__.has(e)}Un.prototype.add=Un.prototype.push=gf,Un.prototype.has=mf;function Nt(e){var t=this.__data__=new rn(e);this.size=t.size}function vf(){this.__data__=new rn,this.size=0}function _f(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function bf(e){return this.__data__.get(e)}function yf(e){return this.__data__.has(e)}function wf(e,t){var n=this.__data__;if(n instanceof rn){var r=n.__data__;if(!rr||r.length<u-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new on(r)}return n.set(e,t),this.size=n.size,this}Nt.prototype.clear=vf,Nt.prototype.delete=_f,Nt.prototype.get=bf,Nt.prototype.has=yf,Nt.prototype.set=wf;function Al(e,t){var n=oe(e),r=!n&&jn(e),h=!n&&!r&&Mn(e),p=!n&&!r&&!h&&bi(e),_=n||r||h||p,b=_?Te(e.length,Eh):[],w=b.length;for(var M in e)(t||Ce.call(e,M))&&!(_&&(M=="length"||h&&(M=="offset"||M=="parent")||p&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||cn(M,w)))&&b.push(M);return b}function Dl(e){var t=e.length;return t?e[Aa(0,t-1)]:f}function Cf(e,t){return Fo(ut(e),qn(t,0,e.length))}function xf(e){return Fo(ut(e))}function xa(e,t,n){(n!==f&&!Ft(e[t],n)||n===f&&!(t in e))&&sn(e,t,n)}function lr(e,t,n){var r=e[t];(!(Ce.call(e,t)&&Ft(r,n))||n===f&&!(t in e))&&sn(e,t,n)}function ko(e,t){for(var n=e.length;n--;)if(Ft(e[n][0],t))return n;return-1}function Sf(e,t,n,r){return Cn(e,function(h,p,_){t(r,h,n(h),_)}),r}function Rl(e,t){return e&&Kt(t,Ve(t),e)}function kf(e,t){return e&&Kt(t,ft(t),e)}function sn(e,t,n){t=="__proto__"&&bo?bo(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Sa(e,t){for(var n=-1,r=t.length,h=x(r),p=e==null;++n<r;)h[n]=p?f:rl(e,t[n]);return h}function qn(e,t,n){return e===e&&(n!==f&&(e=e<=n?e:n),t!==f&&(e=e>=t?e:t)),e}function Pt(e,t,n,r,h,p){var _,b=t&F,w=t&V,M=t&H;if(n&&(_=h?n(e,r,h,p):n(e)),_!==f)return _;if(!Ie(e))return e;var T=oe(e);if(T){if(_=dd(e),!b)return ut(e,_)}else{var E=et(e),R=E==at||E==ki;if(Mn(e))return oc(e,b);if(E==Ot||E==st||R&&!h){if(_=w||R?{}:Sc(e),!b)return w?nd(e,kf(_,e)):td(e,Rl(_,e))}else{if(!we[E])return h?e:{};_=pd(e,E,b)}}p||(p=new Nt);var U=p.get(e);if(U)return U;p.set(e,_),Qc(e)?e.forEach(function(K){_.add(Pt(K,t,n,K,e,p))}):Yc(e)&&e.forEach(function(K,he){_.set(he,Pt(K,t,n,he,e,p))});var X=M?w?Va:Ha:w?ft:Ve,le=T?f:X(e);return ct(le||e,function(K,he){le&&(he=K,K=e[he]),lr(_,he,Pt(K,t,n,he,e,p))}),_}function Mf(e){var t=Ve(e);return function(n){return Bl(n,e,t)}}function Bl(e,t,n){var r=n.length;if(e==null)return!r;for(e=ke(e);r--;){var h=n[r],p=t[h],_=e[h];if(_===f&&!(h in e)||!p(_))return!1}return!0}function Nl(e,t,n){if(typeof e!="function")throw new kt(s);return gr(function(){e.apply(f,n)},t)}function cr(e,t,n,r){var h=-1,p=li,_=!0,b=e.length,w=[],M=t.length;if(!b)return w;n&&(t=Pe(t,Ze(n))),r?(p=Ki,_=!1):t.length>=u&&(p=bn,_=!1,t=new Un(t));e:for(;++h<b;){var T=e[h],E=n==null?T:n(T);if(T=r||T!==0?T:0,_&&E===E){for(var R=M;R--;)if(t[R]===E)continue e;w.push(T)}else p(t,E,r)||w.push(T)}return w}var Cn=uc(Xt),Fl=uc(Ma,!0);function Pf(e,t){var n=!0;return Cn(e,function(r,h,p){return n=!!t(r,h,p),n}),n}function Mo(e,t,n){for(var r=-1,h=e.length;++r<h;){var p=e[r],_=t(p);if(_!=null&&(b===f?_===_&&!yt(_):n(_,b)))var b=_,w=p}return w}function Tf(e,t,n,r){var h=e.length;for(n=ae(n),n<0&&(n=-n>h?0:h+n),r=r===f||r>h?h:ae(r),r<0&&(r+=h),r=n>r?0:tu(r);n<r;)e[n++]=t;return e}function Wl(e,t){var n=[];return Cn(e,function(r,h,p){t(r,h,p)&&n.push(r)}),n}function $e(e,t,n,r,h){var p=-1,_=e.length;for(n||(n=md),h||(h=[]);++p<_;){var b=e[p];t>0&&n(b)?t>1?$e(b,t-1,n,r,h):Gt(h,b):r||(h[h.length]=b)}return h}var ka=hc(),zl=hc(!0);function Xt(e,t){return e&&ka(e,t,Ve)}function Ma(e,t){return e&&zl(e,t,Ve)}function Po(e,t){return Rt(t,function(n){return un(e[n])})}function Hn(e,t){t=Sn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Jt(t[n++])];return n&&n==r?e:f}function Ul(e,t,n){var r=t(e);return oe(e)?r:Gt(r,n(e))}function nt(e){return e==null?e===f?Ps:kr:Wn&&Wn in ke(e)?ud(e):xd(e)}function Pa(e,t){return e>t}function If(e,t){return e!=null&&Ce.call(e,t)}function Ef(e,t){return e!=null&&t in ke(e)}function Lf(e,t,n){return e>=Qe(t,n)&&e<Ue(t,n)}function Ta(e,t,n){for(var r=n?Ki:li,h=e[0].length,p=e.length,_=p,b=x(p),w=1/0,M=[];_--;){var T=e[_];_&&t&&(T=Pe(T,Ze(t))),w=Qe(T.length,w),b[_]=!n&&(t||h>=120&&T.length>=120)?new Un(_&&T):f}T=e[0];var E=-1,R=b[0];e:for(;++E<h&&M.length<w;){var U=T[E],X=t?t(U):U;if(U=n||U!==0?U:0,!(R?bn(R,X):r(M,X,n))){for(_=p;--_;){var le=b[_];if(!(le?bn(le,X):r(e[_],X,n)))continue e}R&&R.push(X),M.push(U)}}return M}function Of(e,t,n,r){return Xt(e,function(h,p,_){t(r,n(h),p,_)}),r}function ur(e,t,n){t=Sn(t,e),e=Tc(e,t);var r=e==null?e:e[Jt(It(t))];return r==null?f:tt(r,e,n)}function ql(e){return Oe(e)&&nt(e)==st}function Af(e){return Oe(e)&&nt(e)==Rn}function Df(e){return Oe(e)&&nt(e)==Be}function hr(e,t,n,r,h){return e===t?!0:e==null||t==null||!Oe(e)&&!Oe(t)?e!==e&&t!==t:Rf(e,t,n,r,hr,h)}function Rf(e,t,n,r,h,p){var _=oe(e),b=oe(t),w=_?ei:et(e),M=b?ei:et(t);w=w==st?Ot:w,M=M==st?Ot:M;var T=w==Ot,E=M==Ot,R=w==M;if(R&&Mn(e)){if(!Mn(t))return!1;_=!0,T=!1}if(R&&!T)return p||(p=new Nt),_||bi(e)?wc(e,t,n,r,h,p):ld(e,t,w,n,r,h,p);if(!(n&G)){var U=T&&Ce.call(e,"__wrapped__"),X=E&&Ce.call(t,"__wrapped__");if(U||X){var le=U?e.value():e,K=X?t.value():t;return p||(p=new Nt),h(le,K,n,r,p)}}return R?(p||(p=new Nt),cd(e,t,n,r,h,p)):!1}function Bf(e){return Oe(e)&&et(e)==vt}function Ia(e,t,n,r){var h=n.length,p=h,_=!r;if(e==null)return!p;for(e=ke(e);h--;){var b=n[h];if(_&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++h<p;){b=n[h];var w=b[0],M=e[w],T=b[1];if(_&&b[2]){if(M===f&&!(w in e))return!1}else{var E=new Nt;if(r)var R=r(M,T,w,e,t,E);if(!(R===f?hr(T,M,G|q,r,E):R))return!1}}return!0}function Hl(e){if(!Ie(e)||_d(e))return!1;var t=un(e)?Rh:zs;return t.test(Gn(e))}function Nf(e){return Oe(e)&&nt(e)==On}function Ff(e){return Oe(e)&&et(e)==lt}function Wf(e){return Oe(e)&&Vo(e.length)&&!!Se[nt(e)]}function Vl(e){return typeof e=="function"?e:e==null?dt:typeof e=="object"?oe(e)?$l(e[0],e[1]):jl(e):fu(e)}function Ea(e){if(!pr(e))return Uh(e);var t=[];for(var n in ke(e))Ce.call(e,n)&&n!="constructor"&&t.push(n);return t}function zf(e){if(!Ie(e))return Cd(e);var t=pr(e),n=[];for(var r in e)r=="constructor"&&(t||!Ce.call(e,r))||n.push(r);return n}function La(e,t){return e<t}function Gl(e,t){var n=-1,r=ht(e)?x(e.length):[];return Cn(e,function(h,p,_){r[++n]=t(h,p,_)}),r}function jl(e){var t=ja(e);return t.length==1&&t[0][2]?Mc(t[0][0],t[0][1]):function(n){return n===e||Ia(n,e,t)}}function $l(e,t){return Xa(e)&&kc(t)?Mc(Jt(e),t):function(n){var r=rl(n,e);return r===f&&r===t?ol(n,e):hr(t,r,G|q)}}function To(e,t,n,r,h){e!==t&&ka(t,function(p,_){if(h||(h=new Nt),Ie(p))Uf(e,t,_,n,To,r,h);else{var b=r?r(Ja(e,_),p,_+"",e,t,h):f;b===f&&(b=p),xa(e,_,b)}},ft)}function Uf(e,t,n,r,h,p,_){var b=Ja(e,n),w=Ja(t,n),M=_.get(w);if(M){xa(e,n,M);return}var T=p?p(b,w,n+"",e,t,_):f,E=T===f;if(E){var R=oe(w),U=!R&&Mn(w),X=!R&&!U&&bi(w);T=w,R||U||X?oe(b)?T=b:De(b)?T=ut(b):U?(E=!1,T=oc(w,!0)):X?(E=!1,T=sc(w,!0)):T=[]:mr(w)||jn(w)?(T=b,jn(b)?T=nu(b):(!Ie(b)||un(b))&&(T=Sc(w))):E=!1}E&&(_.set(w,T),h(T,w,r,p,_),_.delete(w)),xa(e,n,T)}function Xl(e,t){var n=e.length;if(n)return t+=t<0?n:0,cn(t,n)?e[t]:f}function Kl(e,t,n){t.length?t=Pe(t,function(p){return oe(p)?function(_){return Hn(_,p.length===1?p[0]:p)}:p}):t=[dt];var r=-1;t=Pe(t,Ze(j()));var h=Gl(e,function(p,_,b){var w=Pe(t,function(M){return M(p)});return{criteria:w,index:++r,value:p}});return ge(h,function(p,_){return ed(p,_,n)})}function qf(e,t){return Jl(e,t,function(n,r){return ol(e,r)})}function Jl(e,t,n){for(var r=-1,h=t.length,p={};++r<h;){var _=t[r],b=Hn(e,_);n(b,_)&&fr(p,Sn(_,e),b)}return p}function Hf(e){return function(t){return Hn(t,e)}}function Oa(e,t,n,r){var h=r?g:o,p=-1,_=t.length,b=e;for(e===t&&(t=ut(t)),n&&(b=Pe(e,Ze(n)));++p<_;)for(var w=0,M=t[p],T=n?n(M):M;(w=h(b,T,w,r))>-1;)b!==e&&_o.call(b,w,1),_o.call(e,w,1);return e}function Yl(e,t){for(var n=e?t.length:0,r=n-1;n--;){var h=t[n];if(n==r||h!==p){var p=h;cn(h)?_o.call(e,h,1):Ba(e,h)}}return e}function Aa(e,t){return e+wo(Ll()*(t-e+1))}function Vf(e,t,n,r){for(var h=-1,p=Ue(yo((t-e)/(n||1)),0),_=x(p);p--;)_[r?p:++h]=e,e+=n;return _}function Da(e,t){var n="";if(!e||t<1||t>qt)return n;do t%2&&(n+=e),t=wo(t/2),t&&(e+=e);while(t);return n}function ce(e,t){return Ya(Pc(e,t,dt),e+"")}function Gf(e){return Dl(yi(e))}function jf(e,t){var n=yi(e);return Fo(n,qn(t,0,n.length))}function fr(e,t,n,r){if(!Ie(e))return e;t=Sn(t,e);for(var h=-1,p=t.length,_=p-1,b=e;b!=null&&++h<p;){var w=Jt(t[h]),M=n;if(w==="__proto__"||w==="constructor"||w==="prototype")return e;if(h!=_){var T=b[w];M=r?r(T,w,b):f,M===f&&(M=Ie(T)?T:cn(t[h+1])?[]:{})}lr(b,w,M),b=b[w]}return e}var Zl=Co?function(e,t){return Co.set(e,t),e}:dt,$f=bo?function(e,t){return bo(e,"toString",{configurable:!0,enumerable:!1,value:al(t),writable:!0})}:dt;function Xf(e){return Fo(yi(e))}function Tt(e,t,n){var r=-1,h=e.length;t<0&&(t=-t>h?0:h+t),n=n>h?h:n,n<0&&(n+=h),h=t>n?0:n-t>>>0,t>>>=0;for(var p=x(h);++r<h;)p[r]=e[r+t];return p}function Kf(e,t){var n;return Cn(e,function(r,h,p){return n=t(r,h,p),!n}),!!n}function Io(e,t,n){var r=0,h=e==null?r:e.length;if(typeof t=="number"&&t===t&&h<=xs){for(;r<h;){var p=r+h>>>1,_=e[p];_!==null&&!yt(_)&&(n?_<=t:_<t)?r=p+1:h=p}return h}return Ra(e,t,dt,n)}function Ra(e,t,n,r){var h=0,p=e==null?0:e.length;if(p===0)return 0;t=n(t);for(var _=t!==t,b=t===null,w=yt(t),M=t===f;h<p;){var T=wo((h+p)/2),E=n(e[T]),R=E!==f,U=E===null,X=E===E,le=yt(E);if(_)var K=r||X;else M?K=X&&(r||R):b?K=X&&R&&(r||!U):w?K=X&&R&&!U&&(r||!le):U||le?K=!1:K=r?E<=t:E<t;K?h=T+1:p=T}return Qe(p,Sr)}function Ql(e,t){for(var n=-1,r=e.length,h=0,p=[];++n<r;){var _=e[n],b=t?t(_):_;if(!n||!Ft(b,w)){var w=b;p[h++]=_===0?0:_}}return p}function ec(e){return typeof e=="number"?e:yt(e)?Qn:+e}function bt(e){if(typeof e=="string")return e;if(oe(e))return Pe(e,bt)+"";if(yt(e))return Ol?Ol.call(e):"";var t=e+"";return t=="0"&&1/e==-Qt?"-0":t}function xn(e,t,n){var r=-1,h=li,p=e.length,_=!0,b=[],w=b;if(n)_=!1,h=Ki;else if(p>=u){var M=t?null:sd(e);if(M)return ui(M);_=!1,h=bn,w=new Un}else w=t?[]:b;e:for(;++r<p;){var T=e[r],E=t?t(T):T;if(T=n||T!==0?T:0,_&&E===E){for(var R=w.length;R--;)if(w[R]===E)continue e;t&&w.push(E),b.push(T)}else h(w,E,n)||(w!==b&&w.push(E),b.push(T))}return b}function Ba(e,t){return t=Sn(t,e),e=Tc(e,t),e==null||delete e[Jt(It(t))]}function tc(e,t,n,r){return fr(e,t,n(Hn(e,t)),r)}function Eo(e,t,n,r){for(var h=e.length,p=r?h:-1;(r?p--:++p<h)&&t(e[p],p,e););return n?Tt(e,r?0:p,r?p+1:h):Tt(e,r?p+1:0,r?h:p)}function nc(e,t){var n=e;return n instanceof fe&&(n=n.value()),Ji(t,function(r,h){return h.func.apply(h.thisArg,Gt([r],h.args))},n)}function Na(e,t,n){var r=e.length;if(r<2)return r?xn(e[0]):[];for(var h=-1,p=x(r);++h<r;)for(var _=e[h],b=-1;++b<r;)b!=h&&(p[h]=cr(p[h]||_,e[b],t,n));return xn($e(p,1),t,n)}function ic(e,t,n){for(var r=-1,h=e.length,p=t.length,_={};++r<h;){var b=r<p?t[r]:f;n(_,e[r],b)}return _}function Fa(e){return De(e)?e:[]}function Wa(e){return typeof e=="function"?e:dt}function Sn(e,t){return oe(e)?e:Xa(e,t)?[e]:Oc(ye(e))}var Jf=ce;function kn(e,t,n){var r=e.length;return n=n===f?r:n,!t&&n>=r?e:Tt(e,t,n)}var rc=Bh||function(e){return Ne.clearTimeout(e)};function oc(e,t){if(t)return e.slice();var n=e.length,r=Ml?Ml(n):new e.constructor(n);return e.copy(r),r}function za(e){var t=new e.constructor(e.byteLength);return new mo(t).set(new mo(e)),t}function Yf(e,t){var n=t?za(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Zf(e){var t=new e.constructor(e.source,Or.exec(e));return t.lastIndex=e.lastIndex,t}function Qf(e){return ar?ke(ar.call(e)):{}}function sc(e,t){var n=t?za(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ac(e,t){if(e!==t){var n=e!==f,r=e===null,h=e===e,p=yt(e),_=t!==f,b=t===null,w=t===t,M=yt(t);if(!b&&!M&&!p&&e>t||p&&_&&w&&!b&&!M||r&&_&&w||!n&&w||!h)return 1;if(!r&&!p&&!M&&e<t||M&&n&&h&&!r&&!p||b&&n&&h||!_&&h||!w)return-1}return 0}function ed(e,t,n){for(var r=-1,h=e.criteria,p=t.criteria,_=h.length,b=n.length;++r<_;){var w=ac(h[r],p[r]);if(w){if(r>=b)return w;var M=n[r];return w*(M=="desc"?-1:1)}}return e.index-t.index}function lc(e,t,n,r){for(var h=-1,p=e.length,_=n.length,b=-1,w=t.length,M=Ue(p-_,0),T=x(w+M),E=!r;++b<w;)T[b]=t[b];for(;++h<_;)(E||h<p)&&(T[n[h]]=e[h]);for(;M--;)T[b++]=e[h++];return T}function cc(e,t,n,r){for(var h=-1,p=e.length,_=-1,b=n.length,w=-1,M=t.length,T=Ue(p-b,0),E=x(T+M),R=!r;++h<T;)E[h]=e[h];for(var U=h;++w<M;)E[U+w]=t[w];for(;++_<b;)(R||h<p)&&(E[U+n[_]]=e[h++]);return E}function ut(e,t){var n=-1,r=e.length;for(t||(t=x(r));++n<r;)t[n]=e[n];return t}function Kt(e,t,n,r){var h=!n;n||(n={});for(var p=-1,_=t.length;++p<_;){var b=t[p],w=r?r(n[b],e[b],b,n,e):f;w===f&&(w=e[b]),h?sn(n,b,w):lr(n,b,w)}return n}function td(e,t){return Kt(e,$a(e),t)}function nd(e,t){return Kt(e,Cc(e),t)}function Lo(e,t){return function(n,r){var h=oe(n)?da:Sf,p=t?t():{};return h(n,e,j(r,2),p)}}function mi(e){return ce(function(t,n){var r=-1,h=n.length,p=h>1?n[h-1]:f,_=h>2?n[2]:f;for(p=e.length>3&&typeof p=="function"?(h--,p):f,_&&it(n[0],n[1],_)&&(p=h<3?f:p,h=1),t=ke(t);++r<h;){var b=n[r];b&&e(t,b,r,p)}return t})}function uc(e,t){return function(n,r){if(n==null)return n;if(!ht(n))return e(n,r);for(var h=n.length,p=t?h:-1,_=ke(n);(t?p--:++p<h)&&r(_[p],p,_)!==!1;);return n}}function hc(e){return function(t,n,r){for(var h=-1,p=ke(t),_=r(t),b=_.length;b--;){var w=_[e?b:++h];if(n(p[w],w,p)===!1)break}return t}}function id(e,t,n){var r=t&O,h=dr(e);function p(){var _=this&&this!==Ne&&this instanceof p?h:e;return _.apply(r?n:this,arguments)}return p}function fc(e){return function(t){t=ye(t);var n=jt(t)?Bt(t):f,r=n?n[0]:t.charAt(0),h=n?kn(n,1).join(""):t.slice(1);return r[e]()+h}}function vi(e){return function(t){return Ji(uu(cu(t).replace(na,"")),e,"")}}function dr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=gi(e.prototype),r=e.apply(n,t);return Ie(r)?r:n}}function rd(e,t,n){var r=dr(e);function h(){for(var p=arguments.length,_=x(p),b=p,w=_i(h);b--;)_[b]=arguments[b];var M=p<3&&_[0]!==w&&_[p-1]!==w?[]:$t(_,w);if(p-=M.length,p<n)return vc(e,t,Oo,h.placeholder,f,_,M,f,f,n-p);var T=this&&this!==Ne&&this instanceof h?r:e;return tt(T,this,_)}return h}function dc(e){return function(t,n,r){var h=ke(t);if(!ht(t)){var p=j(n,3);t=Ve(t),n=function(b){return p(h[b],b,h)}}var _=e(t,n,r);return _>-1?h[p?t[_]:_]:f}}function pc(e){return ln(function(t){var n=t.length,r=n,h=Mt.prototype.thru;for(e&&t.reverse();r--;){var p=t[r];if(typeof p!="function")throw new kt(s);if(h&&!_&&Bo(p)=="wrapper")var _=new Mt([],!0)}for(r=_?r:n;++r<n;){p=t[r];var b=Bo(p),w=b=="wrapper"?Ga(p):f;w&&Ka(w[0])&&w[1]==(Fe|ue|xe|He)&&!w[4].length&&w[9]==1?_=_[Bo(w[0])].apply(_,w[3]):_=p.length==1&&Ka(p)?_[b]():_.thru(p)}return function(){var M=arguments,T=M[0];if(_&&M.length==1&&oe(T))return _.plant(T).value();for(var E=0,R=n?t[E].apply(this,M):T;++E<n;)R=t[E].call(this,R);return R}})}function Oo(e,t,n,r,h,p,_,b,w,M){var T=t&Fe,E=t&O,R=t&B,U=t&(ue|Me),X=t&mt,le=R?f:dr(e);function K(){for(var he=arguments.length,de=x(he),wt=he;wt--;)de[wt]=arguments[wt];if(U)var rt=_i(K),Ct=va(de,rt);if(r&&(de=lc(de,r,h,U)),p&&(de=cc(de,p,_,U)),he-=Ct,U&&he<M){var Re=$t(de,rt);return vc(e,t,Oo,K.placeholder,n,de,Re,b,w,M-he)}var Wt=E?n:this,fn=R?Wt[e]:e;return he=de.length,b?de=Sd(de,b):X&&he>1&&de.reverse(),T&&w<he&&(de.length=w),this&&this!==Ne&&this instanceof K&&(fn=le||dr(fn)),fn.apply(Wt,de)}return K}function gc(e,t){return function(n,r){return Of(n,e,t(r),{})}}function Ao(e,t){return function(n,r){var h;if(n===f&&r===f)return t;if(n!==f&&(h=n),r!==f){if(h===f)return r;typeof n=="string"||typeof r=="string"?(n=bt(n),r=bt(r)):(n=ec(n),r=ec(r)),h=e(n,r)}return h}}function Ua(e){return ln(function(t){return t=Pe(t,Ze(j())),ce(function(n){var r=this;return e(t,function(h){return tt(h,r,n)})})})}function Do(e,t){t=t===f?" ":bt(t);var n=t.length;if(n<2)return n?Da(t,e):t;var r=Da(t,yo(e/hi(t)));return jt(t)?kn(Bt(r),0,e).join(""):r.slice(0,e)}function od(e,t,n,r){var h=t&O,p=dr(e);function _(){for(var b=-1,w=arguments.length,M=-1,T=r.length,E=x(T+w),R=this&&this!==Ne&&this instanceof _?p:e;++M<T;)E[M]=r[M];for(;w--;)E[M++]=arguments[++b];return tt(R,h?n:this,E)}return _}function mc(e){return function(t,n,r){return r&&typeof r!="number"&&it(t,n,r)&&(n=r=f),t=hn(t),n===f?(n=t,t=0):n=hn(n),r=r===f?t<n?1:-1:hn(r),Vf(t,n,r,e)}}function Ro(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Et(t),n=Et(n)),e(t,n)}}function vc(e,t,n,r,h,p,_,b,w,M){var T=t&ue,E=T?_:f,R=T?f:_,U=T?p:f,X=T?f:p;t|=T?xe:qe,t&=~(T?qe:xe),t&Q||(t&=~(O|B));var le=[e,t,h,U,E,X,R,b,w,M],K=n.apply(f,le);return Ka(e)&&Ic(K,le),K.placeholder=r,Ec(K,e,t)}function qa(e){var t=ze[e];return function(n,r){if(n=Et(n),r=r==null?0:Qe(ae(r),292),r&&El(n)){var h=(ye(n)+"e").split("e"),p=t(h[0]+"e"+(+h[1]+r));return h=(ye(p)+"e").split("e"),+(h[0]+"e"+(+h[1]-r))}return t(n)}}var sd=di&&1/ui(new di([,-0]))[1]==Qt?function(e){return new di(e)}:ul;function _c(e){return function(t){var n=et(t);return n==vt?nr(t):n==lt?co(t):ci(t,e(t))}}function an(e,t,n,r,h,p,_,b){var w=t&B;if(!w&&typeof e!="function")throw new kt(s);var M=r?r.length:0;if(M||(t&=~(xe|qe),r=h=f),_=_===f?_:Ue(ae(_),0),b=b===f?b:ae(b),M-=h?h.length:0,t&qe){var T=r,E=h;r=h=f}var R=w?f:Ga(e),U=[e,t,n,r,h,T,E,p,_,b];if(R&&wd(U,R),e=U[0],t=U[1],n=U[2],r=U[3],h=U[4],b=U[9]=U[9]===f?w?0:e.length:Ue(U[9]-M,0),!b&&t&(ue|Me)&&(t&=~(ue|Me)),!t||t==O)var X=id(e,t,n);else t==ue||t==Me?X=rd(e,t,b):(t==xe||t==(O|xe))&&!h.length?X=od(e,t,n,r):X=Oo.apply(f,U);var le=R?Zl:Ic;return Ec(le(X,U),e,t)}function bc(e,t,n,r){return e===f||Ft(e,fi[n])&&!Ce.call(r,n)?t:e}function yc(e,t,n,r,h,p){return Ie(e)&&Ie(t)&&(p.set(t,e),To(e,t,f,yc,p),p.delete(t)),e}function ad(e){return mr(e)?f:e}function wc(e,t,n,r,h,p){var _=n&G,b=e.length,w=t.length;if(b!=w&&!(_&&w>b))return!1;var M=p.get(e),T=p.get(t);if(M&&T)return M==t&&T==e;var E=-1,R=!0,U=n&q?new Un:f;for(p.set(e,t),p.set(t,e);++E<b;){var X=e[E],le=t[E];if(r)var K=_?r(le,X,E,t,e,p):r(X,le,E,e,t,p);if(K!==f){if(K)continue;R=!1;break}if(U){if(!Yi(t,function(he,de){if(!bn(U,de)&&(X===he||h(X,he,n,r,p)))return U.push(de)})){R=!1;break}}else if(!(X===le||h(X,le,n,r,p))){R=!1;break}}return p.delete(e),p.delete(t),R}function ld(e,t,n,r,h,p,_){switch(n){case be:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Rn:return!(e.byteLength!=t.byteLength||!p(new mo(e),new mo(t)));case Le:case Be:case Lt:return Ft(+e,+t);case Ln:return e.name==t.name&&e.message==t.message;case On:case An:return e==t+"";case vt:var b=nr;case lt:var w=r&G;if(b||(b=ui),e.size!=t.size&&!w)return!1;var M=_.get(e);if(M)return M==t;r|=q,_.set(e,t);var T=wc(b(e),b(t),r,h,p,_);return _.delete(e),T;case ti:if(ar)return ar.call(e)==ar.call(t)}return!1}function cd(e,t,n,r,h,p){var _=n&G,b=Ha(e),w=b.length,M=Ha(t),T=M.length;if(w!=T&&!_)return!1;for(var E=w;E--;){var R=b[E];if(!(_?R in t:Ce.call(t,R)))return!1}var U=p.get(e),X=p.get(t);if(U&&X)return U==t&&X==e;var le=!0;p.set(e,t),p.set(t,e);for(var K=_;++E<w;){R=b[E];var he=e[R],de=t[R];if(r)var wt=_?r(de,he,R,t,e,p):r(he,de,R,e,t,p);if(!(wt===f?he===de||h(he,de,n,r,p):wt)){le=!1;break}K||(K=R=="constructor")}if(le&&!K){var rt=e.constructor,Ct=t.constructor;rt!=Ct&&"constructor"in e&&"constructor"in t&&!(typeof rt=="function"&&rt instanceof rt&&typeof Ct=="function"&&Ct instanceof Ct)&&(le=!1)}return p.delete(e),p.delete(t),le}function ln(e){return Ya(Pc(e,f,Bc),e+"")}function Ha(e){return Ul(e,Ve,$a)}function Va(e){return Ul(e,ft,Cc)}var Ga=Co?function(e){return Co.get(e)}:ul;function Bo(e){for(var t=e.name+"",n=pi[t],r=Ce.call(pi,t)?n.length:0;r--;){var h=n[r],p=h.func;if(p==null||p==e)return h.name}return t}function _i(e){var t=Ce.call(d,"placeholder")?d:e;return t.placeholder}function j(){var e=d.iteratee||ll;return e=e===ll?Vl:e,arguments.length?e(arguments[0],arguments[1]):e}function No(e,t){var n=e.__data__;return vd(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ja(e){for(var t=Ve(e),n=t.length;n--;){var r=t[n],h=e[r];t[n]=[r,h,kc(h)]}return t}function Vn(e,t){var n=so(e,t);return Hl(n)?n:f}function ud(e){var t=Ce.call(e,Wn),n=e[Wn];try{e[Wn]=f;var r=!0}catch{}var h=po.call(e);return r&&(t?e[Wn]=n:delete e[Wn]),h}var $a=ya?function(e){return e==null?[]:(e=ke(e),Rt(ya(e),function(t){return Tl.call(e,t)}))}:hl,Cc=ya?function(e){for(var t=[];e;)Gt(t,$a(e)),e=vo(e);return t}:hl,et=nt;(wa&&et(new wa(new ArrayBuffer(1)))!=be||rr&&et(new rr)!=vt||Ca&&et(Ca.resolve())!=Mi||di&&et(new di)!=lt||or&&et(new or)!=Dn)&&(et=function(e){var t=nt(e),n=t==Ot?e.constructor:f,r=n?Gn(n):"";if(r)switch(r){case Gh:return be;case jh:return vt;case $h:return Mi;case Xh:return lt;case Kh:return Dn}return t});function hd(e,t,n){for(var r=-1,h=n.length;++r<h;){var p=n[r],_=p.size;switch(p.type){case"drop":e+=_;break;case"dropRight":t-=_;break;case"take":t=Qe(t,e+_);break;case"takeRight":e=Ue(e,t-_);break}}return{start:e,end:t}}function fd(e){var t=e.match(Lr);return t?t[1].split(Rs):[]}function xc(e,t,n){t=Sn(t,e);for(var r=-1,h=t.length,p=!1;++r<h;){var _=Jt(t[r]);if(!(p=e!=null&&n(e,_)))break;e=e[_]}return p||++r!=h?p:(h=e==null?0:e.length,!!h&&Vo(h)&&cn(_,h)&&(oe(e)||jn(e)))}function dd(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Ce.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Sc(e){return typeof e.constructor=="function"&&!pr(e)?gi(vo(e)):{}}function pd(e,t,n){var r=e.constructor;switch(t){case Rn:return za(e);case Le:case Be:return new r(+e);case be:return Yf(e,n);case Pi:case Ti:case Ii:case Ei:case Li:case Oi:case Ai:case Bn:case Nn:return sc(e,n);case vt:return new r;case Lt:case An:return new r(e);case On:return Zf(e);case lt:return new r;case ti:return Qf(e)}}function gd(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ds,`{
/* [wrapped with `+t+`] */
`)}function md(e){return oe(e)||jn(e)||!!(Il&&e&&e[Il])}function cn(e,t){var n=typeof e;return t=t??qt,!!t&&(n=="number"||n!="symbol"&&qs.test(e))&&e>-1&&e%1==0&&e<t}function it(e,t,n){if(!Ie(n))return!1;var r=typeof t;return(r=="number"?ht(n)&&cn(t,n.length):r=="string"&&t in n)?Ft(n[t],e):!1}function Xa(e,t){if(oe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||yt(e)?!0:Ir.test(e)||!Tr.test(e)||t!=null&&e in ke(t)}function vd(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ka(e){var t=Bo(e),n=d[t];if(typeof n!="function"||!(t in fe.prototype))return!1;if(e===n)return!0;var r=Ga(n);return!!r&&e===r[0]}function _d(e){return!!kl&&kl in e}var bd=ho?un:fl;function pr(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||fi;return e===n}function kc(e){return e===e&&!Ie(e)}function Mc(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==f||e in ke(n))}}function yd(e){var t=qo(e,function(r){return n.size===A&&n.clear(),r}),n=t.cache;return t}function wd(e,t){var n=e[1],r=t[1],h=n|r,p=h<(O|B|Fe),_=r==Fe&&n==ue||r==Fe&&n==He&&e[7].length<=t[8]||r==(Fe|He)&&t[7].length<=t[8]&&n==ue;if(!(p||_))return e;r&O&&(e[2]=t[2],h|=n&O?0:Q);var b=t[3];if(b){var w=e[3];e[3]=w?lc(w,b,t[4]):b,e[4]=w?$t(e[3],z):t[4]}return b=t[5],b&&(w=e[5],e[5]=w?cc(w,b,t[6]):b,e[6]=w?$t(e[5],z):t[6]),b=t[7],b&&(e[7]=b),r&Fe&&(e[8]=e[8]==null?t[8]:Qe(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=h,e}function Cd(e){var t=[];if(e!=null)for(var n in ke(e))t.push(n);return t}function xd(e){return po.call(e)}function Pc(e,t,n){return t=Ue(t===f?e.length-1:t,0),function(){for(var r=arguments,h=-1,p=Ue(r.length-t,0),_=x(p);++h<p;)_[h]=r[t+h];h=-1;for(var b=x(t+1);++h<t;)b[h]=r[h];return b[t]=n(_),tt(e,this,b)}}function Tc(e,t){return t.length<2?e:Hn(e,Tt(t,0,-1))}function Sd(e,t){for(var n=e.length,r=Qe(t.length,n),h=ut(e);r--;){var p=t[r];e[r]=cn(p,n)?h[p]:f}return e}function Ja(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Ic=Lc(Zl),gr=Fh||function(e,t){return Ne.setTimeout(e,t)},Ya=Lc($f);function Ec(e,t,n){var r=t+"";return Ya(e,gd(r,kd(fd(r),n)))}function Lc(e){var t=0,n=0;return function(){var r=qh(),h=dn-(r-n);if(n=r,h>0){if(++t>=En)return arguments[0]}else t=0;return e.apply(f,arguments)}}function Fo(e,t){var n=-1,r=e.length,h=r-1;for(t=t===f?r:t;++n<t;){var p=Aa(n,h),_=e[p];e[p]=e[n],e[n]=_}return e.length=t,e}var Oc=yd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Er,function(n,r,h,p){t.push(h?p.replace(Fs,"$1"):r||n)}),t});function Jt(e){if(typeof e=="string"||yt(e))return e;var t=e+"";return t=="0"&&1/e==-Qt?"-0":t}function Gn(e){if(e!=null){try{return fo.call(e)}catch{}try{return e+""}catch{}}return""}function kd(e,t){return ct(Ss,function(n){var r="_."+n[0];t&n[1]&&!li(e,r)&&e.push(r)}),e.sort()}function Ac(e){if(e instanceof fe)return e.clone();var t=new Mt(e.__wrapped__,e.__chain__);return t.__actions__=ut(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Md(e,t,n){(n?it(e,t,n):t===f)?t=1:t=Ue(ae(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var h=0,p=0,_=x(yo(r/t));h<r;)_[p++]=Tt(e,h,h+=t);return _}function Pd(e){for(var t=-1,n=e==null?0:e.length,r=0,h=[];++t<n;){var p=e[t];p&&(h[r++]=p)}return h}function Td(){var e=arguments.length;if(!e)return[];for(var t=x(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Gt(oe(n)?ut(n):[n],$e(t,1))}var Id=ce(function(e,t){return De(e)?cr(e,$e(t,1,De,!0)):[]}),Ed=ce(function(e,t){var n=It(t);return De(n)&&(n=f),De(e)?cr(e,$e(t,1,De,!0),j(n,2)):[]}),Ld=ce(function(e,t){var n=It(t);return De(n)&&(n=f),De(e)?cr(e,$e(t,1,De,!0),f,n):[]});function Od(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===f?1:ae(t),Tt(e,t<0?0:t,r)):[]}function Ad(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===f?1:ae(t),t=r-t,Tt(e,0,t<0?0:t)):[]}function Dd(e,t){return e&&e.length?Eo(e,j(t,3),!0,!0):[]}function Rd(e,t){return e&&e.length?Eo(e,j(t,3),!0):[]}function Bd(e,t,n,r){var h=e==null?0:e.length;return h?(n&&typeof n!="number"&&it(e,t,n)&&(n=0,r=h),Tf(e,t,n,r)):[]}function Dc(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var h=n==null?0:ae(n);return h<0&&(h=Ue(r+h,0)),i(e,j(t,3),h)}function Rc(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var h=r-1;return n!==f&&(h=ae(n),h=n<0?Ue(r+h,0):Qe(h,r-1)),i(e,j(t,3),h,!0)}function Bc(e){var t=e==null?0:e.length;return t?$e(e,1):[]}function Nd(e){var t=e==null?0:e.length;return t?$e(e,Qt):[]}function Fd(e,t){var n=e==null?0:e.length;return n?(t=t===f?1:ae(t),$e(e,t)):[]}function Wd(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var h=e[t];r[h[0]]=h[1]}return r}function Nc(e){return e&&e.length?e[0]:f}function zd(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var h=n==null?0:ae(n);return h<0&&(h=Ue(r+h,0)),o(e,t,h)}function Ud(e){var t=e==null?0:e.length;return t?Tt(e,0,-1):[]}var qd=ce(function(e){var t=Pe(e,Fa);return t.length&&t[0]===e[0]?Ta(t):[]}),Hd=ce(function(e){var t=It(e),n=Pe(e,Fa);return t===It(n)?t=f:n.pop(),n.length&&n[0]===e[0]?Ta(n,j(t,2)):[]}),Vd=ce(function(e){var t=It(e),n=Pe(e,Fa);return t=typeof t=="function"?t:f,t&&n.pop(),n.length&&n[0]===e[0]?Ta(n,f,t):[]});function Gd(e,t){return e==null?"":zh.call(e,t)}function It(e){var t=e==null?0:e.length;return t?e[t-1]:f}function jd(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var h=r;return n!==f&&(h=ae(n),h=h<0?Ue(r+h,0):Qe(h,r-1)),t===t?Sh(e,t,h):i(e,v,h,!0)}function $d(e,t){return e&&e.length?Xl(e,ae(t)):f}var Xd=ce(Fc);function Fc(e,t){return e&&e.length&&t&&t.length?Oa(e,t):e}function Kd(e,t,n){return e&&e.length&&t&&t.length?Oa(e,t,j(n,2)):e}function Jd(e,t,n){return e&&e.length&&t&&t.length?Oa(e,t,f,n):e}var Yd=ln(function(e,t){var n=e==null?0:e.length,r=Sa(e,t);return Yl(e,Pe(t,function(h){return cn(h,n)?+h:h}).sort(ac)),r});function Zd(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,h=[],p=e.length;for(t=j(t,3);++r<p;){var _=e[r];t(_,r,e)&&(n.push(_),h.push(r))}return Yl(e,h),n}function Za(e){return e==null?e:Vh.call(e)}function Qd(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&it(e,t,n)?(t=0,n=r):(t=t==null?0:ae(t),n=n===f?r:ae(n)),Tt(e,t,n)):[]}function ep(e,t){return Io(e,t)}function tp(e,t,n){return Ra(e,t,j(n,2))}function np(e,t){var n=e==null?0:e.length;if(n){var r=Io(e,t);if(r<n&&Ft(e[r],t))return r}return-1}function ip(e,t){return Io(e,t,!0)}function rp(e,t,n){return Ra(e,t,j(n,2),!0)}function op(e,t){var n=e==null?0:e.length;if(n){var r=Io(e,t,!0)-1;if(Ft(e[r],t))return r}return-1}function sp(e){return e&&e.length?Ql(e):[]}function ap(e,t){return e&&e.length?Ql(e,j(t,2)):[]}function lp(e){var t=e==null?0:e.length;return t?Tt(e,1,t):[]}function cp(e,t,n){return e&&e.length?(t=n||t===f?1:ae(t),Tt(e,0,t<0?0:t)):[]}function up(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===f?1:ae(t),t=r-t,Tt(e,t<0?0:t,r)):[]}function hp(e,t){return e&&e.length?Eo(e,j(t,3),!1,!0):[]}function fp(e,t){return e&&e.length?Eo(e,j(t,3)):[]}var dp=ce(function(e){return xn($e(e,1,De,!0))}),pp=ce(function(e){var t=It(e);return De(t)&&(t=f),xn($e(e,1,De,!0),j(t,2))}),gp=ce(function(e){var t=It(e);return t=typeof t=="function"?t:f,xn($e(e,1,De,!0),f,t)});function mp(e){return e&&e.length?xn(e):[]}function vp(e,t){return e&&e.length?xn(e,j(t,2)):[]}function _p(e,t){return t=typeof t=="function"?t:f,e&&e.length?xn(e,f,t):[]}function Qa(e){if(!(e&&e.length))return[];var t=0;return e=Rt(e,function(n){if(De(n))return t=Ue(n.length,t),!0}),Te(t,function(n){return Pe(e,D(n))})}function Wc(e,t){if(!(e&&e.length))return[];var n=Qa(e);return t==null?n:Pe(n,function(r){return tt(t,f,r)})}var bp=ce(function(e,t){return De(e)?cr(e,t):[]}),yp=ce(function(e){return Na(Rt(e,De))}),wp=ce(function(e){var t=It(e);return De(t)&&(t=f),Na(Rt(e,De),j(t,2))}),Cp=ce(function(e){var t=It(e);return t=typeof t=="function"?t:f,Na(Rt(e,De),f,t)}),xp=ce(Qa);function Sp(e,t){return ic(e||[],t||[],lr)}function kp(e,t){return ic(e||[],t||[],fr)}var Mp=ce(function(e){var t=e.length,n=t>1?e[t-1]:f;return n=typeof n=="function"?(e.pop(),n):f,Wc(e,n)});function zc(e){var t=d(e);return t.__chain__=!0,t}function Pp(e,t){return t(e),e}function Wo(e,t){return t(e)}var Tp=ln(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,h=function(p){return Sa(p,e)};return t>1||this.__actions__.length||!(r instanceof fe)||!cn(n)?this.thru(h):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Wo,args:[h],thisArg:f}),new Mt(r,this.__chain__).thru(function(p){return t&&!p.length&&p.push(f),p}))});function Ip(){return zc(this)}function Ep(){return new Mt(this.value(),this.__chain__)}function Lp(){this.__values__===f&&(this.__values__=eu(this.value()));var e=this.__index__>=this.__values__.length,t=e?f:this.__values__[this.__index__++];return{done:e,value:t}}function Op(){return this}function Ap(e){for(var t,n=this;n instanceof So;){var r=Ac(n);r.__index__=0,r.__values__=f,t?h.__wrapped__=r:t=r;var h=r;n=n.__wrapped__}return h.__wrapped__=e,t}function Dp(){var e=this.__wrapped__;if(e instanceof fe){var t=e;return this.__actions__.length&&(t=new fe(this)),t=t.reverse(),t.__actions__.push({func:Wo,args:[Za],thisArg:f}),new Mt(t,this.__chain__)}return this.thru(Za)}function Rp(){return nc(this.__wrapped__,this.__actions__)}var Bp=Lo(function(e,t,n){Ce.call(e,n)?++e[n]:sn(e,n,1)});function Np(e,t,n){var r=oe(e)?eo:Pf;return n&&it(e,t,n)&&(t=f),r(e,j(t,3))}function Fp(e,t){var n=oe(e)?Rt:Wl;return n(e,j(t,3))}var Wp=dc(Dc),zp=dc(Rc);function Up(e,t){return $e(zo(e,t),1)}function qp(e,t){return $e(zo(e,t),Qt)}function Hp(e,t,n){return n=n===f?1:ae(n),$e(zo(e,t),n)}function Uc(e,t){var n=oe(e)?ct:Cn;return n(e,j(t,3))}function qc(e,t){var n=oe(e)?pa:Fl;return n(e,j(t,3))}var Vp=Lo(function(e,t,n){Ce.call(e,n)?e[n].push(t):sn(e,n,[t])});function Gp(e,t,n,r){e=ht(e)?e:yi(e),n=n&&!r?ae(n):0;var h=e.length;return n<0&&(n=Ue(h+n,0)),Go(e)?n<=h&&e.indexOf(t,n)>-1:!!h&&o(e,t,n)>-1}var jp=ce(function(e,t,n){var r=-1,h=typeof t=="function",p=ht(e)?x(e.length):[];return Cn(e,function(_){p[++r]=h?tt(t,_,n):ur(_,t,n)}),p}),$p=Lo(function(e,t,n){sn(e,n,t)});function zo(e,t){var n=oe(e)?Pe:Gl;return n(e,j(t,3))}function Xp(e,t,n,r){return e==null?[]:(oe(t)||(t=t==null?[]:[t]),n=r?f:n,oe(n)||(n=n==null?[]:[n]),Kl(e,t,n))}var Kp=Lo(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Jp(e,t,n){var r=oe(e)?Ji:ee,h=arguments.length<3;return r(e,j(t,4),n,h,Cn)}function Yp(e,t,n){var r=oe(e)?ga:ee,h=arguments.length<3;return r(e,j(t,4),n,h,Fl)}function Zp(e,t){var n=oe(e)?Rt:Wl;return n(e,Ho(j(t,3)))}function Qp(e){var t=oe(e)?Dl:Gf;return t(e)}function eg(e,t,n){(n?it(e,t,n):t===f)?t=1:t=ae(t);var r=oe(e)?Cf:jf;return r(e,t)}function tg(e){var t=oe(e)?xf:Xf;return t(e)}function ng(e){if(e==null)return 0;if(ht(e))return Go(e)?hi(e):e.length;var t=et(e);return t==vt||t==lt?e.size:Ea(e).length}function ig(e,t,n){var r=oe(e)?Yi:Kf;return n&&it(e,t,n)&&(t=f),r(e,j(t,3))}var rg=ce(function(e,t){if(e==null)return[];var n=t.length;return n>1&&it(e,t[0],t[1])?t=[]:n>2&&it(t[0],t[1],t[2])&&(t=[t[0]]),Kl(e,$e(t,1),[])}),Uo=Nh||function(){return Ne.Date.now()};function og(e,t){if(typeof t!="function")throw new kt(s);return e=ae(e),function(){if(--e<1)return t.apply(this,arguments)}}function Hc(e,t,n){return t=n?f:t,t=e&&t==null?e.length:t,an(e,Fe,f,f,f,f,t)}function Vc(e,t){var n;if(typeof t!="function")throw new kt(s);return e=ae(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=f),n}}var el=ce(function(e,t,n){var r=O;if(n.length){var h=$t(n,_i(el));r|=xe}return an(e,r,t,n,h)}),Gc=ce(function(e,t,n){var r=O|B;if(n.length){var h=$t(n,_i(Gc));r|=xe}return an(t,r,e,n,h)});function jc(e,t,n){t=n?f:t;var r=an(e,ue,f,f,f,f,f,t);return r.placeholder=jc.placeholder,r}function $c(e,t,n){t=n?f:t;var r=an(e,Me,f,f,f,f,f,t);return r.placeholder=$c.placeholder,r}function Xc(e,t,n){var r,h,p,_,b,w,M=0,T=!1,E=!1,R=!0;if(typeof e!="function")throw new kt(s);t=Et(t)||0,Ie(n)&&(T=!!n.leading,E="maxWait"in n,p=E?Ue(Et(n.maxWait)||0,t):p,R="trailing"in n?!!n.trailing:R);function U(Re){var Wt=r,fn=h;return r=h=f,M=Re,_=e.apply(fn,Wt),_}function X(Re){return M=Re,b=gr(he,t),T?U(Re):_}function le(Re){var Wt=Re-w,fn=Re-M,du=t-Wt;return E?Qe(du,p-fn):du}function K(Re){var Wt=Re-w,fn=Re-M;return w===f||Wt>=t||Wt<0||E&&fn>=p}function he(){var Re=Uo();if(K(Re))return de(Re);b=gr(he,le(Re))}function de(Re){return b=f,R&&r?U(Re):(r=h=f,_)}function wt(){b!==f&&rc(b),M=0,r=w=h=b=f}function rt(){return b===f?_:de(Uo())}function Ct(){var Re=Uo(),Wt=K(Re);if(r=arguments,h=this,w=Re,Wt){if(b===f)return X(w);if(E)return rc(b),b=gr(he,t),U(w)}return b===f&&(b=gr(he,t)),_}return Ct.cancel=wt,Ct.flush=rt,Ct}var sg=ce(function(e,t){return Nl(e,1,t)}),ag=ce(function(e,t,n){return Nl(e,Et(t)||0,n)});function lg(e){return an(e,mt)}function qo(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new kt(s);var n=function(){var r=arguments,h=t?t.apply(this,r):r[0],p=n.cache;if(p.has(h))return p.get(h);var _=e.apply(this,r);return n.cache=p.set(h,_)||p,_};return n.cache=new(qo.Cache||on),n}qo.Cache=on;function Ho(e){if(typeof e!="function")throw new kt(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function cg(e){return Vc(2,e)}var ug=Jf(function(e,t){t=t.length==1&&oe(t[0])?Pe(t[0],Ze(j())):Pe($e(t,1),Ze(j()));var n=t.length;return ce(function(r){for(var h=-1,p=Qe(r.length,n);++h<p;)r[h]=t[h].call(this,r[h]);return tt(e,this,r)})}),tl=ce(function(e,t){var n=$t(t,_i(tl));return an(e,xe,f,t,n)}),Kc=ce(function(e,t){var n=$t(t,_i(Kc));return an(e,qe,f,t,n)}),hg=ln(function(e,t){return an(e,He,f,f,f,t)});function fg(e,t){if(typeof e!="function")throw new kt(s);return t=t===f?t:ae(t),ce(e,t)}function dg(e,t){if(typeof e!="function")throw new kt(s);return t=t==null?0:Ue(ae(t),0),ce(function(n){var r=n[t],h=kn(n,0,t);return r&&Gt(h,r),tt(e,this,h)})}function pg(e,t,n){var r=!0,h=!0;if(typeof e!="function")throw new kt(s);return Ie(n)&&(r="leading"in n?!!n.leading:r,h="trailing"in n?!!n.trailing:h),Xc(e,t,{leading:r,maxWait:t,trailing:h})}function gg(e){return Hc(e,1)}function mg(e,t){return tl(Wa(t),e)}function vg(){if(!arguments.length)return[];var e=arguments[0];return oe(e)?e:[e]}function _g(e){return Pt(e,H)}function bg(e,t){return t=typeof t=="function"?t:f,Pt(e,H,t)}function yg(e){return Pt(e,F|H)}function wg(e,t){return t=typeof t=="function"?t:f,Pt(e,F|H,t)}function Cg(e,t){return t==null||Bl(e,t,Ve(t))}function Ft(e,t){return e===t||e!==e&&t!==t}var xg=Ro(Pa),Sg=Ro(function(e,t){return e>=t}),jn=ql(function(){return arguments}())?ql:function(e){return Oe(e)&&Ce.call(e,"callee")&&!Tl.call(e,"callee")},oe=x.isArray,kg=Jr?Ze(Jr):Af;function ht(e){return e!=null&&Vo(e.length)&&!un(e)}function De(e){return Oe(e)&&ht(e)}function Mg(e){return e===!0||e===!1||Oe(e)&&nt(e)==Le}var Mn=Wh||fl,Pg=Yr?Ze(Yr):Df;function Tg(e){return Oe(e)&&e.nodeType===1&&!mr(e)}function Ig(e){if(e==null)return!0;if(ht(e)&&(oe(e)||typeof e=="string"||typeof e.splice=="function"||Mn(e)||bi(e)||jn(e)))return!e.length;var t=et(e);if(t==vt||t==lt)return!e.size;if(pr(e))return!Ea(e).length;for(var n in e)if(Ce.call(e,n))return!1;return!0}function Eg(e,t){return hr(e,t)}function Lg(e,t,n){n=typeof n=="function"?n:f;var r=n?n(e,t):f;return r===f?hr(e,t,f,n):!!r}function nl(e){if(!Oe(e))return!1;var t=nt(e);return t==Ln||t==Ms||typeof e.message=="string"&&typeof e.name=="string"&&!mr(e)}function Og(e){return typeof e=="number"&&El(e)}function un(e){if(!Ie(e))return!1;var t=nt(e);return t==at||t==ki||t==ks||t==Mr}function Jc(e){return typeof e=="number"&&e==ae(e)}function Vo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qt}function Ie(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Oe(e){return e!=null&&typeof e=="object"}var Yc=fa?Ze(fa):Bf;function Ag(e,t){return e===t||Ia(e,t,ja(t))}function Dg(e,t,n){return n=typeof n=="function"?n:f,Ia(e,t,ja(t),n)}function Rg(e){return Zc(e)&&e!=+e}function Bg(e){if(bd(e))throw new ne(l);return Hl(e)}function Ng(e){return e===null}function Fg(e){return e==null}function Zc(e){return typeof e=="number"||Oe(e)&&nt(e)==Lt}function mr(e){if(!Oe(e)||nt(e)!=Ot)return!1;var t=vo(e);if(t===null)return!0;var n=Ce.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&fo.call(n)==Ah}var il=Zr?Ze(Zr):Nf;function Wg(e){return Jc(e)&&e>=-qt&&e<=qt}var Qc=Qr?Ze(Qr):Ff;function Go(e){return typeof e=="string"||!oe(e)&&Oe(e)&&nt(e)==An}function yt(e){return typeof e=="symbol"||Oe(e)&&nt(e)==ti}var bi=Xi?Ze(Xi):Wf;function zg(e){return e===f}function Ug(e){return Oe(e)&&et(e)==Dn}function qg(e){return Oe(e)&&nt(e)==ni}var Hg=Ro(La),Vg=Ro(function(e,t){return e<=t});function eu(e){if(!e)return[];if(ht(e))return Go(e)?Bt(e):ut(e);if(ir&&e[ir])return ao(e[ir]());var t=et(e),n=t==vt?nr:t==lt?ui:yi;return n(e)}function hn(e){if(!e)return e===0?e:0;if(e=Et(e),e===Qt||e===-Qt){var t=e<0?-1:1;return t*Cs}return e===e?e:0}function ae(e){var t=hn(e),n=t%1;return t===t?n?t-n:t:0}function tu(e){return e?qn(ae(e),0,St):0}function Et(e){if(typeof e=="number")return e;if(yt(e))return Qn;if(Ie(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ie(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=to(e);var n=en.test(e);return n||Us.test(e)?ha(e.slice(2),n?2:8):Ar.test(e)?Qn:+e}function nu(e){return Kt(e,ft(e))}function Gg(e){return e?qn(ae(e),-qt,qt):e===0?e:0}function ye(e){return e==null?"":bt(e)}var jg=mi(function(e,t){if(pr(t)||ht(t)){Kt(t,Ve(t),e);return}for(var n in t)Ce.call(t,n)&&lr(e,n,t[n])}),iu=mi(function(e,t){Kt(t,ft(t),e)}),jo=mi(function(e,t,n,r){Kt(t,ft(t),e,r)}),$g=mi(function(e,t,n,r){Kt(t,Ve(t),e,r)}),Xg=ln(Sa);function Kg(e,t){var n=gi(e);return t==null?n:Rl(n,t)}var Jg=ce(function(e,t){e=ke(e);var n=-1,r=t.length,h=r>2?t[2]:f;for(h&&it(t[0],t[1],h)&&(r=1);++n<r;)for(var p=t[n],_=ft(p),b=-1,w=_.length;++b<w;){var M=_[b],T=e[M];(T===f||Ft(T,fi[M])&&!Ce.call(e,M))&&(e[M]=p[M])}return e}),Yg=ce(function(e){return e.push(f,yc),tt(ru,f,e)});function Zg(e,t){return a(e,j(t,3),Xt)}function Qg(e,t){return a(e,j(t,3),Ma)}function e0(e,t){return e==null?e:ka(e,j(t,3),ft)}function t0(e,t){return e==null?e:zl(e,j(t,3),ft)}function n0(e,t){return e&&Xt(e,j(t,3))}function i0(e,t){return e&&Ma(e,j(t,3))}function r0(e){return e==null?[]:Po(e,Ve(e))}function o0(e){return e==null?[]:Po(e,ft(e))}function rl(e,t,n){var r=e==null?f:Hn(e,t);return r===f?n:r}function s0(e,t){return e!=null&&xc(e,t,If)}function ol(e,t){return e!=null&&xc(e,t,Ef)}var a0=gc(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=po.call(t)),e[t]=n},al(dt)),l0=gc(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=po.call(t)),Ce.call(e,t)?e[t].push(n):e[t]=[n]},j),c0=ce(ur);function Ve(e){return ht(e)?Al(e):Ea(e)}function ft(e){return ht(e)?Al(e,!0):zf(e)}function u0(e,t){var n={};return t=j(t,3),Xt(e,function(r,h,p){sn(n,t(r,h,p),r)}),n}function h0(e,t){var n={};return t=j(t,3),Xt(e,function(r,h,p){sn(n,h,t(r,h,p))}),n}var f0=mi(function(e,t,n){To(e,t,n)}),ru=mi(function(e,t,n,r){To(e,t,n,r)}),d0=ln(function(e,t){var n={};if(e==null)return n;var r=!1;t=Pe(t,function(p){return p=Sn(p,e),r||(r=p.length>1),p}),Kt(e,Va(e),n),r&&(n=Pt(n,F|V|H,ad));for(var h=t.length;h--;)Ba(n,t[h]);return n});function p0(e,t){return ou(e,Ho(j(t)))}var g0=ln(function(e,t){return e==null?{}:qf(e,t)});function ou(e,t){if(e==null)return{};var n=Pe(Va(e),function(r){return[r]});return t=j(t),Jl(e,n,function(r,h){return t(r,h[0])})}function m0(e,t,n){t=Sn(t,e);var r=-1,h=t.length;for(h||(h=1,e=f);++r<h;){var p=e==null?f:e[Jt(t[r])];p===f&&(r=h,p=n),e=un(p)?p.call(e):p}return e}function v0(e,t,n){return e==null?e:fr(e,t,n)}function _0(e,t,n,r){return r=typeof r=="function"?r:f,e==null?e:fr(e,t,n,r)}var su=_c(Ve),au=_c(ft);function b0(e,t,n){var r=oe(e),h=r||Mn(e)||bi(e);if(t=j(t,4),n==null){var p=e&&e.constructor;h?n=r?new p:[]:Ie(e)?n=un(p)?gi(vo(e)):{}:n={}}return(h?ct:Xt)(e,function(_,b,w){return t(n,_,b,w)}),n}function y0(e,t){return e==null?!0:Ba(e,t)}function w0(e,t,n){return e==null?e:tc(e,t,Wa(n))}function C0(e,t,n,r){return r=typeof r=="function"?r:f,e==null?e:tc(e,t,Wa(n),r)}function yi(e){return e==null?[]:Qi(e,Ve(e))}function x0(e){return e==null?[]:Qi(e,ft(e))}function S0(e,t,n){return n===f&&(n=t,t=f),n!==f&&(n=Et(n),n=n===n?n:0),t!==f&&(t=Et(t),t=t===t?t:0),qn(Et(e),t,n)}function k0(e,t,n){return t=hn(t),n===f?(n=t,t=0):n=hn(n),e=Et(e),Lf(e,t,n)}function M0(e,t,n){if(n&&typeof n!="boolean"&&it(e,t,n)&&(t=n=f),n===f&&(typeof t=="boolean"?(n=t,t=f):typeof e=="boolean"&&(n=e,e=f)),e===f&&t===f?(e=0,t=1):(e=hn(e),t===f?(t=e,e=0):t=hn(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var h=Ll();return Qe(e+h*(t-e+ai("1e-"+((h+"").length-1))),t)}return Aa(e,t)}var P0=vi(function(e,t,n){return t=t.toLowerCase(),e+(n?lu(t):t)});function lu(e){return sl(ye(e).toLowerCase())}function cu(e){return e=ye(e),e&&e.replace(Ni,_a).replace(ia,"")}function T0(e,t,n){e=ye(e),t=bt(t);var r=e.length;n=n===f?r:qn(ae(n),0,r);var h=n;return n-=t.length,n>=0&&e.slice(n,h)==t}function I0(e){return e=ye(e),e&&Ls.test(e)?e.replace(ii,ro):e}function E0(e){return e=ye(e),e&&As.test(e)?e.replace(Ri,"\\$&"):e}var L0=vi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),O0=vi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),A0=fc("toLowerCase");function D0(e,t,n){e=ye(e),t=ae(t);var r=t?hi(e):0;if(!t||r>=t)return e;var h=(t-r)/2;return Do(wo(h),n)+e+Do(yo(h),n)}function R0(e,t,n){e=ye(e),t=ae(t);var r=t?hi(e):0;return t&&r<t?e+Do(t-r,n):e}function B0(e,t,n){e=ye(e),t=ae(t);var r=t?hi(e):0;return t&&r<t?Do(t-r,n)+e:e}function N0(e,t,n){return n||t==null?t=0:t&&(t=+t),Hh(ye(e).replace(Bi,""),t||0)}function F0(e,t,n){return(n?it(e,t,n):t===f)?t=1:t=ae(t),Da(ye(e),t)}function W0(){var e=arguments,t=ye(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var z0=vi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function U0(e,t,n){return n&&typeof n!="number"&&it(e,t,n)&&(t=n=f),n=n===f?St:n>>>0,n?(e=ye(e),e&&(typeof t=="string"||t!=null&&!il(t))&&(t=bt(t),!t&&jt(e))?kn(Bt(e),0,n):e.split(t,n)):[]}var q0=vi(function(e,t,n){return e+(n?" ":"")+sl(t)});function H0(e,t,n){return e=ye(e),n=n==null?0:qn(ae(n),0,e.length),t=bt(t),e.slice(n,n+t.length)==t}function V0(e,t,n){var r=d.templateSettings;n&&it(e,t,n)&&(t=f),e=ye(e),t=jo({},t,r,bc);var h=jo({},t.imports,r.imports,bc),p=Ve(h),_=Qi(h,p),b,w,M=0,T=t.interpolate||gn,E="__p += '",R=ba((t.escape||gn).source+"|"+T.source+"|"+(T===Di?Ws:gn).source+"|"+(t.evaluate||gn).source+"|$","g"),U="//# sourceURL="+(Ce.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++la+"]")+`
`;e.replace(R,function(K,he,de,wt,rt,Ct){return de||(de=wt),E+=e.slice(M,Ct).replace(Hs,oo),he&&(b=!0,E+=`' +
__e(`+he+`) +
'`),rt&&(w=!0,E+=`';
`+rt+`;
__p += '`),de&&(E+=`' +
((__t = (`+de+`)) == null ? '' : __t) +
'`),M=Ct+K.length,K}),E+=`';
`;var X=Ce.call(t,"variable")&&t.variable;if(!X)E=`with (obj) {
`+E+`
}
`;else if(Ns.test(X))throw new ne(m);E=(w?E.replace(Ts,""):E).replace(Is,"$1").replace(Es,"$1;"),E="function("+(X||"obj")+`) {
`+(X?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(w?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+E+`return __p
}`;var le=hu(function(){return ve(p,U+"return "+E).apply(f,_)});if(le.source=E,nl(le))throw le;return le}function G0(e){return ye(e).toLowerCase()}function j0(e){return ye(e).toUpperCase()}function $0(e,t,n){if(e=ye(e),e&&(n||t===f))return to(e);if(!e||!(t=bt(t)))return e;var r=Bt(e),h=Bt(t),p=no(r,h),_=er(r,h)+1;return kn(r,p,_).join("")}function X0(e,t,n){if(e=ye(e),e&&(n||t===f))return e.slice(0,Sl(e)+1);if(!e||!(t=bt(t)))return e;var r=Bt(e),h=er(r,Bt(t))+1;return kn(r,0,h).join("")}function K0(e,t,n){if(e=ye(e),e&&(n||t===f))return e.replace(Bi,"");if(!e||!(t=bt(t)))return e;var r=Bt(e),h=no(r,Bt(t));return kn(r,h).join("")}function J0(e,t){var n=Ut,r=ys;if(Ie(t)){var h="separator"in t?t.separator:h;n="length"in t?ae(t.length):n,r="omission"in t?bt(t.omission):r}e=ye(e);var p=e.length;if(jt(e)){var _=Bt(e);p=_.length}if(n>=p)return e;var b=n-hi(r);if(b<1)return r;var w=_?kn(_,0,b).join(""):e.slice(0,b);if(h===f)return w+r;if(_&&(b+=w.length-b),il(h)){if(e.slice(b).search(h)){var M,T=w;for(h.global||(h=ba(h.source,ye(Or.exec(h))+"g")),h.lastIndex=0;M=h.exec(T);)var E=M.index;w=w.slice(0,E===f?b:E)}}else if(e.indexOf(bt(h),b)!=b){var R=w.lastIndexOf(h);R>-1&&(w=w.slice(0,R))}return w+r}function Y0(e){return e=ye(e),e&&At.test(e)?e.replace(Pr,kh):e}var Z0=vi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),sl=fc("toUpperCase");function uu(e,t,n){return e=ye(e),t=n?f:t,t===f?tr(e)?Th(e):ma(e):e.match(t)||[]}var hu=ce(function(e,t){try{return tt(e,f,t)}catch(n){return nl(n)?n:new ne(n)}}),Q0=ln(function(e,t){return ct(t,function(n){n=Jt(n),sn(e,n,el(e[n],e))}),e});function em(e){var t=e==null?0:e.length,n=j();return e=t?Pe(e,function(r){if(typeof r[1]!="function")throw new kt(s);return[n(r[0]),r[1]]}):[],ce(function(r){for(var h=-1;++h<t;){var p=e[h];if(tt(p[0],this,r))return tt(p[1],this,r)}})}function tm(e){return Mf(Pt(e,F))}function al(e){return function(){return e}}function nm(e,t){return e==null||e!==e?t:e}var im=pc(),rm=pc(!0);function dt(e){return e}function ll(e){return Vl(typeof e=="function"?e:Pt(e,F))}function om(e){return jl(Pt(e,F))}function sm(e,t){return $l(e,Pt(t,F))}var am=ce(function(e,t){return function(n){return ur(n,e,t)}}),lm=ce(function(e,t){return function(n){return ur(e,n,t)}});function cl(e,t,n){var r=Ve(t),h=Po(t,r);n==null&&!(Ie(t)&&(h.length||!r.length))&&(n=t,t=e,e=this,h=Po(t,Ve(t)));var p=!(Ie(n)&&"chain"in n)||!!n.chain,_=un(e);return ct(h,function(b){var w=t[b];e[b]=w,_&&(e.prototype[b]=function(){var M=this.__chain__;if(p||M){var T=e(this.__wrapped__),E=T.__actions__=ut(this.__actions__);return E.push({func:w,args:arguments,thisArg:e}),T.__chain__=M,T}return w.apply(e,Gt([this.value()],arguments))})}),e}function cm(){return Ne._===this&&(Ne._=Dh),this}function ul(){}function um(e){return e=ae(e),ce(function(t){return Xl(t,e)})}var hm=Ua(Pe),fm=Ua(eo),dm=Ua(Yi);function fu(e){return Xa(e)?D(Jt(e)):Hf(e)}function pm(e){return function(t){return e==null?f:Hn(e,t)}}var gm=mc(),mm=mc(!0);function hl(){return[]}function fl(){return!1}function vm(){return{}}function _m(){return""}function bm(){return!0}function ym(e,t){if(e=ae(e),e<1||e>qt)return[];var n=St,r=Qe(e,St);t=j(t),e-=St;for(var h=Te(r,t);++n<e;)t(n);return h}function wm(e){return oe(e)?Pe(e,Jt):yt(e)?[e]:ut(Oc(ye(e)))}function Cm(e){var t=++Oh;return ye(e)+t}var xm=Ao(function(e,t){return e+t},0),Sm=qa("ceil"),km=Ao(function(e,t){return e/t},1),Mm=qa("floor");function Pm(e){return e&&e.length?Mo(e,dt,Pa):f}function Tm(e,t){return e&&e.length?Mo(e,j(t,2),Pa):f}function Im(e){return k(e,dt)}function Em(e,t){return k(e,j(t,2))}function Lm(e){return e&&e.length?Mo(e,dt,La):f}function Om(e,t){return e&&e.length?Mo(e,j(t,2),La):f}var Am=Ao(function(e,t){return e*t},1),Dm=qa("round"),Rm=Ao(function(e,t){return e-t},0);function Bm(e){return e&&e.length?me(e,dt):0}function Nm(e,t){return e&&e.length?me(e,j(t,2)):0}return d.after=og,d.ary=Hc,d.assign=jg,d.assignIn=iu,d.assignInWith=jo,d.assignWith=$g,d.at=Xg,d.before=Vc,d.bind=el,d.bindAll=Q0,d.bindKey=Gc,d.castArray=vg,d.chain=zc,d.chunk=Md,d.compact=Pd,d.concat=Td,d.cond=em,d.conforms=tm,d.constant=al,d.countBy=Bp,d.create=Kg,d.curry=jc,d.curryRight=$c,d.debounce=Xc,d.defaults=Jg,d.defaultsDeep=Yg,d.defer=sg,d.delay=ag,d.difference=Id,d.differenceBy=Ed,d.differenceWith=Ld,d.drop=Od,d.dropRight=Ad,d.dropRightWhile=Dd,d.dropWhile=Rd,d.fill=Bd,d.filter=Fp,d.flatMap=Up,d.flatMapDeep=qp,d.flatMapDepth=Hp,d.flatten=Bc,d.flattenDeep=Nd,d.flattenDepth=Fd,d.flip=lg,d.flow=im,d.flowRight=rm,d.fromPairs=Wd,d.functions=r0,d.functionsIn=o0,d.groupBy=Vp,d.initial=Ud,d.intersection=qd,d.intersectionBy=Hd,d.intersectionWith=Vd,d.invert=a0,d.invertBy=l0,d.invokeMap=jp,d.iteratee=ll,d.keyBy=$p,d.keys=Ve,d.keysIn=ft,d.map=zo,d.mapKeys=u0,d.mapValues=h0,d.matches=om,d.matchesProperty=sm,d.memoize=qo,d.merge=f0,d.mergeWith=ru,d.method=am,d.methodOf=lm,d.mixin=cl,d.negate=Ho,d.nthArg=um,d.omit=d0,d.omitBy=p0,d.once=cg,d.orderBy=Xp,d.over=hm,d.overArgs=ug,d.overEvery=fm,d.overSome=dm,d.partial=tl,d.partialRight=Kc,d.partition=Kp,d.pick=g0,d.pickBy=ou,d.property=fu,d.propertyOf=pm,d.pull=Xd,d.pullAll=Fc,d.pullAllBy=Kd,d.pullAllWith=Jd,d.pullAt=Yd,d.range=gm,d.rangeRight=mm,d.rearg=hg,d.reject=Zp,d.remove=Zd,d.rest=fg,d.reverse=Za,d.sampleSize=eg,d.set=v0,d.setWith=_0,d.shuffle=tg,d.slice=Qd,d.sortBy=rg,d.sortedUniq=sp,d.sortedUniqBy=ap,d.split=U0,d.spread=dg,d.tail=lp,d.take=cp,d.takeRight=up,d.takeRightWhile=hp,d.takeWhile=fp,d.tap=Pp,d.throttle=pg,d.thru=Wo,d.toArray=eu,d.toPairs=su,d.toPairsIn=au,d.toPath=wm,d.toPlainObject=nu,d.transform=b0,d.unary=gg,d.union=dp,d.unionBy=pp,d.unionWith=gp,d.uniq=mp,d.uniqBy=vp,d.uniqWith=_p,d.unset=y0,d.unzip=Qa,d.unzipWith=Wc,d.update=w0,d.updateWith=C0,d.values=yi,d.valuesIn=x0,d.without=bp,d.words=uu,d.wrap=mg,d.xor=yp,d.xorBy=wp,d.xorWith=Cp,d.zip=xp,d.zipObject=Sp,d.zipObjectDeep=kp,d.zipWith=Mp,d.entries=su,d.entriesIn=au,d.extend=iu,d.extendWith=jo,cl(d,d),d.add=xm,d.attempt=hu,d.camelCase=P0,d.capitalize=lu,d.ceil=Sm,d.clamp=S0,d.clone=_g,d.cloneDeep=yg,d.cloneDeepWith=wg,d.cloneWith=bg,d.conformsTo=Cg,d.deburr=cu,d.defaultTo=nm,d.divide=km,d.endsWith=T0,d.eq=Ft,d.escape=I0,d.escapeRegExp=E0,d.every=Np,d.find=Wp,d.findIndex=Dc,d.findKey=Zg,d.findLast=zp,d.findLastIndex=Rc,d.findLastKey=Qg,d.floor=Mm,d.forEach=Uc,d.forEachRight=qc,d.forIn=e0,d.forInRight=t0,d.forOwn=n0,d.forOwnRight=i0,d.get=rl,d.gt=xg,d.gte=Sg,d.has=s0,d.hasIn=ol,d.head=Nc,d.identity=dt,d.includes=Gp,d.indexOf=zd,d.inRange=k0,d.invoke=c0,d.isArguments=jn,d.isArray=oe,d.isArrayBuffer=kg,d.isArrayLike=ht,d.isArrayLikeObject=De,d.isBoolean=Mg,d.isBuffer=Mn,d.isDate=Pg,d.isElement=Tg,d.isEmpty=Ig,d.isEqual=Eg,d.isEqualWith=Lg,d.isError=nl,d.isFinite=Og,d.isFunction=un,d.isInteger=Jc,d.isLength=Vo,d.isMap=Yc,d.isMatch=Ag,d.isMatchWith=Dg,d.isNaN=Rg,d.isNative=Bg,d.isNil=Fg,d.isNull=Ng,d.isNumber=Zc,d.isObject=Ie,d.isObjectLike=Oe,d.isPlainObject=mr,d.isRegExp=il,d.isSafeInteger=Wg,d.isSet=Qc,d.isString=Go,d.isSymbol=yt,d.isTypedArray=bi,d.isUndefined=zg,d.isWeakMap=Ug,d.isWeakSet=qg,d.join=Gd,d.kebabCase=L0,d.last=It,d.lastIndexOf=jd,d.lowerCase=O0,d.lowerFirst=A0,d.lt=Hg,d.lte=Vg,d.max=Pm,d.maxBy=Tm,d.mean=Im,d.meanBy=Em,d.min=Lm,d.minBy=Om,d.stubArray=hl,d.stubFalse=fl,d.stubObject=vm,d.stubString=_m,d.stubTrue=bm,d.multiply=Am,d.nth=$d,d.noConflict=cm,d.noop=ul,d.now=Uo,d.pad=D0,d.padEnd=R0,d.padStart=B0,d.parseInt=N0,d.random=M0,d.reduce=Jp,d.reduceRight=Yp,d.repeat=F0,d.replace=W0,d.result=m0,d.round=Dm,d.runInContext=y,d.sample=Qp,d.size=ng,d.snakeCase=z0,d.some=ig,d.sortedIndex=ep,d.sortedIndexBy=tp,d.sortedIndexOf=np,d.sortedLastIndex=ip,d.sortedLastIndexBy=rp,d.sortedLastIndexOf=op,d.startCase=q0,d.startsWith=H0,d.subtract=Rm,d.sum=Bm,d.sumBy=Nm,d.template=V0,d.times=ym,d.toFinite=hn,d.toInteger=ae,d.toLength=tu,d.toLower=G0,d.toNumber=Et,d.toSafeInteger=Gg,d.toString=ye,d.toUpper=j0,d.trim=$0,d.trimEnd=X0,d.trimStart=K0,d.truncate=J0,d.unescape=Y0,d.uniqueId=Cm,d.upperCase=Z0,d.upperFirst=sl,d.each=Uc,d.eachRight=qc,d.first=Nc,cl(d,function(){var e={};return Xt(d,function(t,n){Ce.call(d.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),d.VERSION=c,ct(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){d[e].placeholder=d}),ct(["drop","take"],function(e,t){fe.prototype[e]=function(n){n=n===f?1:Ue(ae(n),0);var r=this.__filtered__&&!t?new fe(this):this.clone();return r.__filtered__?r.__takeCount__=Qe(n,r.__takeCount__):r.__views__.push({size:Qe(n,St),type:e+(r.__dir__<0?"Right":"")}),r},fe.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),ct(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==xr||n==ws;fe.prototype[e]=function(h){var p=this.clone();return p.__iteratees__.push({iteratee:j(h,3),type:n}),p.__filtered__=p.__filtered__||r,p}}),ct(["head","last"],function(e,t){var n="take"+(t?"Right":"");fe.prototype[e]=function(){return this[n](1).value()[0]}}),ct(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");fe.prototype[e]=function(){return this.__filtered__?new fe(this):this[n](1)}}),fe.prototype.compact=function(){return this.filter(dt)},fe.prototype.find=function(e){return this.filter(e).head()},fe.prototype.findLast=function(e){return this.reverse().find(e)},fe.prototype.invokeMap=ce(function(e,t){return typeof e=="function"?new fe(this):this.map(function(n){return ur(n,e,t)})}),fe.prototype.reject=function(e){return this.filter(Ho(j(e)))},fe.prototype.slice=function(e,t){e=ae(e);var n=this;return n.__filtered__&&(e>0||t<0)?new fe(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==f&&(t=ae(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},fe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},fe.prototype.toArray=function(){return this.take(St)},Xt(fe.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),h=d[r?"take"+(t=="last"?"Right":""):t],p=r||/^find/.test(t);h&&(d.prototype[t]=function(){var _=this.__wrapped__,b=r?[1]:arguments,w=_ instanceof fe,M=b[0],T=w||oe(_),E=function(he){var de=h.apply(d,Gt([he],b));return r&&R?de[0]:de};T&&n&&typeof M=="function"&&M.length!=1&&(w=T=!1);var R=this.__chain__,U=!!this.__actions__.length,X=p&&!R,le=w&&!U;if(!p&&T){_=le?_:new fe(this);var K=e.apply(_,b);return K.__actions__.push({func:Wo,args:[E],thisArg:f}),new Mt(K,R)}return X&&le?e.apply(this,b):(K=this.thru(E),X?r?K.value()[0]:K.value():K)})}),ct(["pop","push","shift","sort","splice","unshift"],function(e){var t=uo[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);d.prototype[e]=function(){var h=arguments;if(r&&!this.__chain__){var p=this.value();return t.apply(oe(p)?p:[],h)}return this[n](function(_){return t.apply(oe(_)?_:[],h)})}}),Xt(fe.prototype,function(e,t){var n=d[t];if(n){var r=n.name+"";Ce.call(pi,r)||(pi[r]=[]),pi[r].push({name:t,func:n})}}),pi[Oo(f,B).name]=[{name:"wrapper",func:f}],fe.prototype.clone=Jh,fe.prototype.reverse=Yh,fe.prototype.value=Zh,d.prototype.at=Tp,d.prototype.chain=Ip,d.prototype.commit=Ep,d.prototype.next=Lp,d.prototype.plant=Ap,d.prototype.reverse=Dp,d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=Rp,d.prototype.first=d.prototype.head,ir&&(d.prototype[ir]=Op),d},yn=Ih();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ne._=yn,define(function(){return yn})):nn?((nn.exports=yn)._=yn,ji._=yn):Ne._=yn}).call(xi)});var ih=nh("NativeGeocoder",{web:()=>import("./chunk-VEMFGQKV.js").then(f=>new f.NativeGeocoderWeb)});var In=class{constructor(){this.activateVoice=!0,this.cartStyle="",this.size=0,this.navigationColor="red",this.colorGeofence="red",this.colorNavigationLine="red",this.showParkings=!0,this.enableDirectionAPI=!0,this.enableNavigationLine=!0,this.showGeofences=!0,this.animationTime=100,this.showLastTrip=!0,this.useArrow=!1,this.zoomOnEvent=!0,this.showInfoBubbles=!0}};var gs=(()=>{let c=class c{constructor(){this.defaultSettings=new In,this.settingsSubject=new vu(this.loadSettings()),this.settings$=this.settingsSubject.asObservable()}loadSettings(){let l=localStorage.getItem("mapSettings");return l?JSON.parse(l):this.defaultSettings}saveSettings(l){localStorage.setItem("mapSettings",JSON.stringify(l)),this.settingsSubject.next(l)}getSettings(){return this.settingsSubject.value}updateSetting(l,s){let m=pu($o({},this.getSettings()),{[l]:s});this.saveSettings(m)}setAllSettings(l){this.saveSettings(l)}resetSettings(){this.saveSettings(this.defaultSettings)}};c.\u0275fac=function(s){return new(s||c)},c.\u0275prov=Ko({token:c,factory:c.\u0275fac,providedIn:"root"});let f=c;return f})();var Gm=["googleMap"],oh=()=>[];function jm(f,c){f&1&&(I(0,"div",35),Y(1,"i",36),P())}var sh=(()=>{let c=class c{constructor(l,s,m,C){this.activeModal=l,this.settingMapService=s,this.accessDataService=m,this.serverGpsService=C,this.loadingRoute=!1,this.zoom=12,this.modalOpen=!1,this.options={mapTypeId:"roadmap",clickableIcons:!1,disableDefaultUI:!1},this.showPolyline=!0,this.waypointsAddresses=[],this.routes=[{name:"Route 1",distance:5},{name:"Route 2",distance:12},{name:"Route 3",distance:8}],this.significantPoints=[],this.loadModal=!1,this.isPanelCollapsed=!0,this.firstCallRoute=!0,this.modalLoad="",this.visible=!0,this.params=null,this.greenIcon={url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"},this.redIcon={url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png"},this.startPosition={lat:48.8566,lng:2.3522},this.endPosition={lat:48.8647,lng:2.349},this.polylineOptions={strokeColor:"#1a22c8",strokeWeight:3,icons:[]},this.path=[{lat:48.8566,lng:2.3522},{lat:48.8606,lng:2.3376},{lat:48.8647,lng:2.349}],this.firstCall=!1,this.geofencesPolygons=[],this.geofencesCercles=[],this.geofences=[],this.geofencesDEMO=[{id:1,name:"Geofence 1",path:[{lat:48.8566,lng:2.3522},{lat:48.8606,lng:2.3376},{lat:48.8543,lng:2.3297},{lat:48.8566,lng:2.3522}],color:"#FF0000",fillColor:"#FFCCCC"},{id:2,name:"Geofence 2",path:[{lat:48.8647,lng:2.349},{lat:48.8675,lng:2.3381},{lat:48.8628,lng:2.3333},{lat:48.8647,lng:2.349}],color:"#0000FF",fillColor:"#CCCCFF"}],this.settingMapModel=new In,this.settingMapModel=$o({},this.settingMapService.getSettings())}ngOnInit(){this.params&&(console.log("/***** The Value params ****/"),console.log(this.params)),this.params&&this.params.deviceId&&(this.loadPosition(),this.fetchGeofences())}loadModalData(l=!0){this.loadModal=!!l,this.modalLoad=l?"modal-load":""}loadRoutes(){this.loadingRoute=!0;let{startTime:l,endTime:s,deviceId:m}=this.params,C=new Date(l).toISOString(),A=new Date(s).toISOString();this.accessDataService.getData({deviceId:m,from:C,to:A},"/traccar/reports/route").subscribe(z=>{this.significantPoints=z,this.reverseGeocodePoints(),this.loadingRoute=!1},z=>{},()=>{})}reverseGeocodePoints(){let l=new google.maps.Geocoder;this.significantPoints.forEach(s=>{let m={lat:s.latitude,lng:s.longitude};l.geocode({location:m},(C,A)=>{A==="OK"&&C[0]&&this.waypointsAddresses.push({adresse:C[0].formatted_address,speed:s.speed,fixTime:s.fixTime})})})}loadPosition(){this.loadModalData(!0);let{startTime:l,endTime:s,deviceId:m}=this.params,C=new Date(l).toISOString(),A=new Date(s).toISOString();this.serverGpsService.getPositions(m,C,A).subscribe(z=>{let F=z.map(V=>({lat:V.latitude,lng:V.longitude}));this.path=F,this.startPosition=F[0],this.endPosition=F[F.length-1],this.zoom=18,this.center=F[(F.length-1)/2],this.loadModalData(!1),setTimeout(()=>this.fitMapToPath(),100),this.addDynamicArrows()},z=>{},()=>{})}addDynamicArrows(){let l=[];for(let m=0;m<this.path.length-1;m+=10){let C=this.path[m],A=this.path[m+1],z=this.calculateAngle(C,A);l.push({icon:{path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW,scale:3,strokeColor:"#0014ff"},offset:`${m/this.path.length*100}%`,rotation:z})}this.polylineOptions.icons=l,this.showPolyline=!1,setTimeout(()=>{this.showPolyline=!0},0)}calculateAngle(l,s){let m=s.lat-l.lat,C=s.lng-l.lng;return Math.atan2(m,C)*180/Math.PI}fitMapToPath(){console.log("/***** The Value ****/"),console.log(this.map);let l=new google.maps.LatLngBounds;this.path.forEach(s=>l.extend(s)),this.map.fitBounds(l)}fitMapToGeofences(){let l=new google.maps.LatLngBounds;this.geofences.forEach(s=>s.path.forEach(m=>l.extend(m))),this.map.fitBounds(l)}togglePanel(){this.isPanelCollapsed&&this.firstCallRoute&&(this.firstCallRoute=!1,this.loadRoutes()),this.isPanelCollapsed=!this.isPanelCollapsed}closePanel(){this.isPanelCollapsed=!0}fetchGeofences(){this.accessDataService.getData(null,"/traccar/geofences").subscribe(l=>{this.geofences=l.data,this.drawGeofences()},l=>{},()=>{})}drawGeofences(){this.geofences.forEach(l=>{let{area:s}=l;s.startsWith("CIRCLE")?this.drawCircleGeofence(s,l):s.startsWith("POLYGON")&&this.drawPolygonGeofence(s,l)})}drawCircleGeofence(l,s){let[m,C]=this.parseCircleArea(l);console.log("/***** The Value  this.parseCircleArea(area) ****/"),console.log(this.parseCircleArea(l)),this.geofencesCercles.push({id:1,name:s.name,center:m,radius:C,color:"#FF0000",fillColor:"#FFCCCC"})}addMarkerLabelOrigin(){return new google.maps.Point(0,0)}drawPolygonGeofence(l,s){let m=this.parsePolygonArea(l);this.geofencesPolygons.push({id:1,name:s.name,path:m,color:"#FF0000",fillColor:"#FFCCCC"})}parseCircleArea(l){let s=l.match(/CIRCLE \(([^ ]+) ([^,]+), ([^)]*)\)/);if(console.log("/***** The Valu matche ****/"),console.log(s),s){let m=parseFloat(s[2]),C=parseFloat(s[1]),A=parseFloat(s[3]);return[{lat:C,lng:m},A]}return[{lat:0,lng:0},0]}parsePolygonArea(l){let s=l.match(/POLYGON \(\(([^)]+)\)\)/);return s?s[1].split(",").map(m=>{let[C,A]=m.split(" ").map(Number);return{lat:A,lng:C}}):[]}applySettings(){this.settingMapService.setAllSettings(this.settingMapModel),this.activeModal.dismiss(this.settingMapModel)}};c.\u0275fac=function(s){return new(s||c)(Ee(Hu),Ee(gs),Ee(hs),Ee(ps))},c.\u0275cmp=Yo({type:c,selectors:[["app-setting-modal"]],viewQuery:function(s,m){if(s&1&&$n(Gm,5),s&2){let C;Xn(C=Kn())&&(m.map=C.first)}},inputs:{params:"params"},decls:128,vars:124,consts:[[1,"modal-header"],[1,"fw-semibold"],[3,"click","spinner","id"],[1,"ri-close-line"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"title"],[1,"col-md-5"],[3,"labelClass","gridClass","label","for"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","back_to_top_enable"],[1,"switch-state"],[1,"col-md-7"],["id","site_tagline","type","number","min","5",1,"form-control",3,"placeholder"],[1,"custom-select",3,"data","placeholder","noResultMessage"],[1,"text-muted"],[1,"col-md-4"],["type","checkbox","id","showInfoBubbles",3,"ngModelChange","ngModel"],["type","checkbox","id","showParkings",3,"ngModelChange","ngModel"],[1,"col-md-6"],["id","size","type","number","min","5",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["type","checkbox","id","enableNavigationLine",3,"ngModelChange","ngModel"],["type","checkbox","id","show_last_trip",3,"ngModelChange","ngModel"],["type","checkbox","id","enableDirectionAPI",3,"ngModelChange","ngModel"],[1,"custom-select",3,"ngModelChange","data","ngModel","placeholder","noResultMessage"],[1,"color-box"],["id","colorNavigationLine","type","color",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox","id","showGeofences",3,"ngModelChange","ngModel"],["id","colorGeofence","type","color",1,"form-control",3,"ngModelChange","ngModel"],[1,"button-box"],[3,"click","type","spinner","id"],[3,"click","id"],["class","modal-loader",4,"ngIf"],[1,"modal-loader"],[1,"fa","fa-spinner","rotate-refresh"]],template:function(s,m){s&1&&(I(0,"div")(1,"div",0)(2,"h3",1),Z(3),pe(4,"translate"),P(),I(5,"app-button",2),se("click",function(){return m.activeModal.dismiss("Cross click")}),Y(6,"i",3),P()(),I(7,"div",4)(8,"div",5)(9,"div",6)(10,"h3",7),Z(11,"Animation"),P()()(),I(12,"div",5)(13,"div",8)(14,"app-form-fields",9)(15,"div",10)(16,"label",11),Y(17,"input",12)(18,"span",13),P()()()(),I(19,"div",14)(20,"app-form-fields",9),Y(21,"input",15),pe(22,"translate"),P()()(),I(23,"div",5)(24,"div",8)(25,"app-form-fields",9),Y(26,"select2",16),pe(27,"translate"),pe(28,"translate"),P()(),I(29,"div",14)(30,"app-form-fields",9),Y(31,"input",15),pe(32,"translate"),I(33,"small",17),Z(34),pe(35,"translate"),P()()()(),I(36,"div",5)(37,"div",6)(38,"h3",7),Z(39,"Marker"),P()()(),I(40,"div",5)(41,"div",18)(42,"app-form-fields",9)(43,"div",10)(44,"label",11)(45,"input",19),Ye("ngModelChange",function(A){return Je(m.settingMapModel.showInfoBubbles,A)||(m.settingMapModel.showInfoBubbles=A),A}),P(),Y(46,"span",13),P()()()(),I(47,"div",18)(48,"app-form-fields",9)(49,"div",10)(50,"label",11)(51,"input",20),Ye("ngModelChange",function(A){return Je(m.settingMapModel.showParkings,A)||(m.settingMapModel.showParkings=A),A}),P(),Y(52,"span",13),P()()()(),I(53,"div",18)(54,"app-form-fields",9)(55,"div",10)(56,"label",11)(57,"input",20),Ye("ngModelChange",function(A){return Je(m.settingMapModel.showParkings,A)||(m.settingMapModel.showParkings=A),A}),P(),Y(58,"span",13),P()()()()(),I(59,"div",5)(60,"div",21)(61,"app-form-fields",9)(62,"input",22),pe(63,"translate"),Ye("ngModelChange",function(A){return Je(m.settingMapModel.size,A)||(m.settingMapModel.size=A),A}),P()()(),Y(64,"div",21),P(),I(65,"div",5)(66,"div",6)(67,"h3",7),Z(68,"Naivgating"),P()()(),I(69,"div",5)(70,"div",18)(71,"app-form-fields",9)(72,"div",10)(73,"label",11)(74,"input",23),Ye("ngModelChange",function(A){return Je(m.settingMapModel.enableNavigationLine,A)||(m.settingMapModel.enableNavigationLine=A),A}),P(),Y(75,"span",13),P()()()(),I(76,"div",18)(77,"app-form-fields",9)(78,"div",10)(79,"label",11)(80,"input",24),Ye("ngModelChange",function(A){return Je(m.settingMapModel.showLastTrip,A)||(m.settingMapModel.showLastTrip=A),A}),P(),Y(81,"span",13),P()()(),Z(82,"\xAC "),P(),I(83,"div",18)(84,"app-form-fields",9)(85,"div",10)(86,"label",11)(87,"input",25),Ye("ngModelChange",function(A){return Je(m.settingMapModel.enableDirectionAPI,A)||(m.settingMapModel.enableDirectionAPI=A),A}),P(),Y(88,"span",13),P()()()()(),I(89,"div",5)(90,"div",21)(91,"app-form-fields",9)(92,"select2",26),pe(93,"translate"),pe(94,"translate"),Ye("ngModelChange",function(A){return Je(m.settingMapModel.cartStyle,A)||(m.settingMapModel.cartStyle=A),A}),P()()(),I(95,"div",21)(96,"app-form-fields",9)(97,"div",27)(98,"input",28),Ye("ngModelChange",function(A){return Je(m.settingMapModel.colorNavigationLine,A)||(m.settingMapModel.colorNavigationLine=A),A}),P(),I(99,"h6"),Z(100,"#21322"),P()()()()(),I(101,"div",5)(102,"div",6)(103,"h3",7),Z(104,"Geofences"),P()()(),I(105,"div",5)(106,"div",21)(107,"app-form-fields",9)(108,"div",10)(109,"label",11)(110,"input",29),Ye("ngModelChange",function(A){return Je(m.settingMapModel.showGeofences,A)||(m.settingMapModel.showGeofences=A),A}),P(),Y(111,"span",13),P()()()(),I(112,"div",21)(113,"app-form-fields",9)(114,"div",27)(115,"input",30),Ye("ngModelChange",function(A){return Je(m.settingMapModel.colorGeofence,A)||(m.settingMapModel.colorGeofence=A),A}),P(),I(116,"h6"),Z(117,"#21322"),P()()()()(),I(118,"div",5)(119,"div",6)(120,"div",31)(121,"app-button",32),se("click",function(){return m.activeModal.dismiss("Cancel")}),Z(122),pe(123,"translate"),P(),I(124,"app-button",33),se("click",function(){return m.applySettings()}),Z(125),pe(126,"translate"),P()()()()(),Xe(127,jm,2,0,"div",34),P()),s&2&&(is("ngb-modal-wrapper ",m.modalLoad,""),L(3),Ae(_e(4,100,"setting_map")),L(2),Pn("btn btn-close"),J("spinner",!1)("id","customer_modal_close_btn"),L(9),J("labelClass","form-label-title col-sm-7 mb-0")("gridClass","col-sm-5")("label","activate_animation")("for","back_to_top_enable"),L(6),J("labelClass","form-label-title col-sm-4 mb-0")("gridClass","col-sm-8")("label","refresh_time")("for","site_tagline"),L(),Tn("placeholder",_e(22,102,"enter_refresh_time")),L(4),J("labelClass","form-label-title col-sm-3 mb-0 mt-0")("gridClass","col-sm-9")("label","type")("for","cart_style"),L(),Tn("noResultMessage",_e(27,104,"no_data_found")),J("data",Ci(122,oh))("placeholder",_e(28,106,"select_type")),L(4),J("labelClass","form-label-title col-sm-4 mb-0 mt-0")("gridClass","col-sm-8")("label","steps")("for","site_tagline"),L(),Tn("placeholder",_e(32,108,"enter_smooth_level_animation")),L(3),Ae(_e(35,110,"to_improve_smooth_animation")),L(8),J("labelClass","form-label-title col-sm-8 mb-0")("gridClass","col-sm-4")("label","show_info_windows")("for","showInfoBubbles"),L(3),Ke("ngModel",m.settingMapModel.showInfoBubbles),L(3),J("labelClass","form-label-title col-sm-7 mb-0")("gridClass","col-sm-5")("label","show_stops")("for","showParkings"),L(3),Ke("ngModel",m.settingMapModel.showParkings),L(3),J("labelClass","form-label-title col-sm-7 mb-0")("gridClass","col-sm-5")("label","show_stops")("for","showParkings"),L(3),Ke("ngModel",m.settingMapModel.showParkings),L(4),J("labelClass","form-label-title col-sm-4 mb-0")("gridClass","col-sm-8")("label","size")("for","size"),L(),Tn("placeholder",_e(63,112,"enter_size_marker")),Ke("ngModel",m.settingMapModel.size),L(9),J("labelClass","form-label-title col-sm-8 mb-0")("gridClass","col-sm-4")("label","show_navifating_line")("for","enableNavigationLine"),L(3),Ke("ngModel",m.settingMapModel.enableNavigationLine),L(3),J("labelClass","form-label-title col-sm-8 mb-0")("gridClass","col-sm-4")("label","show_last_trip")("for","show_last_trip"),L(3),Ke("ngModel",m.settingMapModel.showLastTrip),L(4),J("labelClass","form-label-title col-sm-8 mb-0")("gridClass","col-sm-4")("label","activate_direction_api")("for","enableDirectionAPI"),L(3),Ke("ngModel",m.settingMapModel.enableDirectionAPI),L(4),J("labelClass","form-label-title col-sm-4 mb-0")("gridClass","col-sm-8")("label","cart_style")("for","cart_style"),L(),Tn("noResultMessage",_e(93,114,"no_data_found")),J("data",Ci(123,oh)),Ke("ngModel",m.settingMapModel.cartStyle),J("placeholder",_e(94,116,"select_mode")),L(4),J("labelClass","form-label-title col-sm-8 mb-0")("gridClass","col-sm-4")("label","color_navigating_line")("for","colorNavigationLine"),L(2),Ke("ngModel",m.settingMapModel.colorNavigationLine),L(9),J("labelClass","form-label-title col-sm-5 mb-0")("gridClass","col-sm-7")("label","show_geofences")("for","showGeofences"),L(3),Ke("ngModel",m.settingMapModel.showGeofences),L(3),J("labelClass","form-label-title col-sm-4 mb-0")("gridClass","col-sm-8")("label","color_geofence")("for","colorGeofence"),L(2),Ke("ngModel",m.settingMapModel.colorGeofence),L(6),Pn("btn-md fw-bold btn btn-secondary"),J("type","button")("spinner",!1)("id","cancel_address_btn"),L(),xt(" ",_e(123,118,"Cancel")," "),L(2),Pn("btn-theme btn-md fw-bold btn"),J("id","submit_address_btn"),L(),xt(" ",_e(126,120,"Submit")," "),L(2),J("ngIf",m.loadModal))},dependencies:[rs,ss,Bu,Ru,as,Fu,ls,us,Ku,$u,cs],styles:['.spinning[_ngcontent-%COMP%]:before{content:"";width:18px;height:18px;border-radius:50%;right:10px;top:0;position:absolute;border:2px solid white;border-right:3px solid #27ae60;animation:_ngcontent-%COMP%_rotate360 .5s infinite linear}@keyframes _ngcontent-%COMP%_rotate360{to{transform:rotate(360deg)}}.modal-container[_ngcontent-%COMP%]{display:flex;height:100%}.panel[_ngcontent-%COMP%]{background-color:#000000b3;width:250px;z-index:9999999999999;transition:width .3s ease;border-right:1px solid #ddd;position:absolute;display:flex;flex-direction:column;height:94%}.panel.collapsed[_ngcontent-%COMP%]{width:15px}.panel.collapsed[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], .panel.collapsed[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}.toggle-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);right:-15px;background-color:var(--theme-color);color:#fff;border:none;border-radius:50%;height:28px;width:28px;cursor:pointer}.panel-content[_ngcontent-%COMP%]{padding:8px;overflow:scroll}.map-container[_ngcontent-%COMP%]{flex:1;position:relative}.button-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:15px}modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .button-box[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:16px;padding:11px 50px;transition:none!important}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{transition:none!important}']});let f=c;return f})();function yr(f){"@babel/helpers - typeof";return yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},yr(f)}function Ge(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function ah(f,c){for(var u=0;u<c.length;u++){var l=c[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(f,l.key,l)}}function je(f,c,u){return c&&ah(f.prototype,c),u&&ah(f,u),Object.defineProperty(f,"prototype",{writable:!1}),f}function wr(){return wr=Object.assign||function(f){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(f[l]=u[l])}return f},wr.apply(this,arguments)}function pt(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),c&&_l(f,c)}function ms(f){return ms=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},ms(f)}function _l(f,c){return _l=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},_l(f,c)}function $m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xm(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function Km(f,c){if(c&&(typeof c=="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xm(f)}function gt(f){var c=$m();return function(){var l=ms(f),s;if(c){var m=ms(this).constructor;s=Reflect.construct(l,arguments,m)}else s=l.apply(this,arguments);return Km(this,s)}}var bl=function(){function f(){Ge(this,f)}return je(f,[{key:"listenForWhisper",value:function(u,l){return this.listen(".client-"+u,l)}},{key:"notification",value:function(u){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",u)}},{key:"stopListeningForWhisper",value:function(u,l){return this.stopListening(".client-"+u,l)}}]),f}(),uh=function(){function f(c){Ge(this,f),this.namespace=c}return je(f,[{key:"format",value:function(u){return[".","\\"].includes(u.charAt(0))?u.substring(1):(this.namespace&&(u=this.namespace+"."+u),u.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(u){this.namespace=u}}]),f}();function Jm(f){try{new f}catch(c){if(c.message.includes("is not a constructor"))return!1}return!0}var yl=function(f){pt(u,f);var c=gt(u);function u(l,s,m){var C;return Ge(this,u),C=c.call(this),C.name=s,C.pusher=l,C.options=m,C.eventFormatter=new uh(C.options.namespace),C.subscribe(),C}return je(u,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(s,m){return this.on(this.eventFormatter.format(s),m),this}},{key:"listenToAll",value:function(s){var m=this;return this.subscription.bind_global(function(C,A){if(!C.startsWith("pusher:")){var z=m.options.namespace.replace(/\./g,"\\"),F=C.startsWith(z)?C.substring(z.length+1):"."+C;s(F,A)}}),this}},{key:"stopListening",value:function(s,m){return m?this.subscription.unbind(this.eventFormatter.format(s),m):this.subscription.unbind(this.eventFormatter.format(s)),this}},{key:"stopListeningToAll",value:function(s){return s?this.subscription.unbind_global(s):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(s){return this.on("pusher:subscription_succeeded",function(){s()}),this}},{key:"error",value:function(s){return this.on("pusher:subscription_error",function(m){s(m)}),this}},{key:"on",value:function(s,m){return this.subscription.bind(s,m),this}}]),u}(bl),hh=function(f){pt(u,f);var c=gt(u);function u(){return Ge(this,u),c.apply(this,arguments)}return je(u,[{key:"whisper",value:function(s,m){return this.pusher.channels.channels[this.name].trigger("client-".concat(s),m),this}}]),u}(yl),Ym=function(f){pt(u,f);var c=gt(u);function u(){return Ge(this,u),c.apply(this,arguments)}return je(u,[{key:"whisper",value:function(s,m){return this.pusher.channels.channels[this.name].trigger("client-".concat(s),m),this}}]),u}(yl),Zm=function(f){pt(u,f);var c=gt(u);function u(){return Ge(this,u),c.apply(this,arguments)}return je(u,[{key:"here",value:function(s){return this.on("pusher:subscription_succeeded",function(m){s(Object.keys(m.members).map(function(C){return m.members[C]}))}),this}},{key:"joining",value:function(s){return this.on("pusher:member_added",function(m){s(m.info)}),this}},{key:"whisper",value:function(s,m){return this.pusher.channels.channels[this.name].trigger("client-".concat(s),m),this}},{key:"leaving",value:function(s){return this.on("pusher:member_removed",function(m){s(m.info)}),this}}]),u}(hh),fh=function(f){pt(u,f);var c=gt(u);function u(l,s,m){var C;return Ge(this,u),C=c.call(this),C.events={},C.listeners={},C.name=s,C.socket=l,C.options=m,C.eventFormatter=new uh(C.options.namespace),C.subscribe(),C}return je(u,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(s,m){return this.on(this.eventFormatter.format(s),m),this}},{key:"stopListening",value:function(s,m){return this.unbindEvent(this.eventFormatter.format(s),m),this}},{key:"subscribed",value:function(s){return this.on("connect",function(m){s(m)}),this}},{key:"error",value:function(s){return this}},{key:"on",value:function(s,m){var C=this;return this.listeners[s]=this.listeners[s]||[],this.events[s]||(this.events[s]=function(A,z){C.name===A&&C.listeners[s]&&C.listeners[s].forEach(function(F){return F(z)})},this.socket.on(s,this.events[s])),this.listeners[s].push(m),this}},{key:"unbind",value:function(){var s=this;Object.keys(this.events).forEach(function(m){s.unbindEvent(m)})}},{key:"unbindEvent",value:function(s,m){this.listeners[s]=this.listeners[s]||[],m&&(this.listeners[s]=this.listeners[s].filter(function(C){return C!==m})),(!m||this.listeners[s].length===0)&&(this.events[s]&&(this.socket.removeListener(s,this.events[s]),delete this.events[s]),delete this.listeners[s])}}]),u}(bl),dh=function(f){pt(u,f);var c=gt(u);function u(){return Ge(this,u),c.apply(this,arguments)}return je(u,[{key:"whisper",value:function(s,m){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(s),data:m}),this}}]),u}(fh),Qm=function(f){pt(u,f);var c=gt(u);function u(){return Ge(this,u),c.apply(this,arguments)}return je(u,[{key:"here",value:function(s){return this.on("presence:subscribed",function(m){s(m.map(function(C){return C.user_info}))}),this}},{key:"joining",value:function(s){return this.on("presence:joining",function(m){return s(m.user_info)}),this}},{key:"whisper",value:function(s,m){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(s),data:m}),this}},{key:"leaving",value:function(s){return this.on("presence:leaving",function(m){return s(m.user_info)}),this}}]),u}(dh),vs=function(f){pt(u,f);var c=gt(u);function u(){return Ge(this,u),c.apply(this,arguments)}return je(u,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(s,m){return this}},{key:"listenToAll",value:function(s){return this}},{key:"stopListening",value:function(s,m){return this}},{key:"subscribed",value:function(s){return this}},{key:"error",value:function(s){return this}},{key:"on",value:function(s,m){return this}}]),u}(bl),ph=function(f){pt(u,f);var c=gt(u);function u(){return Ge(this,u),c.apply(this,arguments)}return je(u,[{key:"whisper",value:function(s,m){return this}}]),u}(vs),ev=function(f){pt(u,f);var c=gt(u);function u(){return Ge(this,u),c.apply(this,arguments)}return je(u,[{key:"whisper",value:function(s,m){return this}}]),u}(vs),tv=function(f){pt(u,f);var c=gt(u);function u(){return Ge(this,u),c.apply(this,arguments)}return je(u,[{key:"here",value:function(s){return this}},{key:"joining",value:function(s){return this}},{key:"whisper",value:function(s,m){return this}},{key:"leaving",value:function(s){return this}}]),u}(ph),wl=function(){function f(c){Ge(this,f),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(c),this.connect()}return je(f,[{key:"setOptions",value:function(u){this.options=wr(this._defaultOptions,u);var l=this.csrfToken();return l&&(this.options.auth.headers["X-CSRF-TOKEN"]=l,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=l),l=this.options.bearerToken,l&&(this.options.auth.headers.Authorization="Bearer "+l,this.options.userAuthentication.headers.Authorization="Bearer "+l),u}},{key:"csrfToken",value:function(){var u;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(u=document.querySelector('meta[name="csrf-token"]'))?u.getAttribute("content"):null}}]),f}(),lh=function(f){pt(u,f);var c=gt(u);function u(){var l;return Ge(this,u),l=c.apply(this,arguments),l.channels={},l}return je(u,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(s,m,C){return this.channel(s).listen(m,C)}},{key:"channel",value:function(s){return this.channels[s]||(this.channels[s]=new yl(this.pusher,s,this.options)),this.channels[s]}},{key:"privateChannel",value:function(s){return this.channels["private-"+s]||(this.channels["private-"+s]=new hh(this.pusher,"private-"+s,this.options)),this.channels["private-"+s]}},{key:"encryptedPrivateChannel",value:function(s){return this.channels["private-encrypted-"+s]||(this.channels["private-encrypted-"+s]=new Ym(this.pusher,"private-encrypted-"+s,this.options)),this.channels["private-encrypted-"+s]}},{key:"presenceChannel",value:function(s){return this.channels["presence-"+s]||(this.channels["presence-"+s]=new Zm(this.pusher,"presence-"+s,this.options)),this.channels["presence-"+s]}},{key:"leave",value:function(s){var m=this,C=[s,"private-"+s,"private-encrypted-"+s,"presence-"+s];C.forEach(function(A,z){m.leaveChannel(A)})}},{key:"leaveChannel",value:function(s){this.channels[s]&&(this.channels[s].unsubscribe(),delete this.channels[s])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),u}(wl),ch=function(f){pt(u,f);var c=gt(u);function u(){var l;return Ge(this,u),l=c.apply(this,arguments),l.channels={},l}return je(u,[{key:"connect",value:function(){var s=this,m=this.getSocketIO();return this.socket=m(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(s.channels).forEach(function(C){C.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(s,m,C){return this.channel(s).listen(m,C)}},{key:"channel",value:function(s){return this.channels[s]||(this.channels[s]=new fh(this.socket,s,this.options)),this.channels[s]}},{key:"privateChannel",value:function(s){return this.channels["private-"+s]||(this.channels["private-"+s]=new dh(this.socket,"private-"+s,this.options)),this.channels["private-"+s]}},{key:"presenceChannel",value:function(s){return this.channels["presence-"+s]||(this.channels["presence-"+s]=new Qm(this.socket,"presence-"+s,this.options)),this.channels["presence-"+s]}},{key:"leave",value:function(s){var m=this,C=[s,"private-"+s,"presence-"+s];C.forEach(function(A){m.leaveChannel(A)})}},{key:"leaveChannel",value:function(s){this.channels[s]&&(this.channels[s].unsubscribe(),delete this.channels[s])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),u}(wl),nv=function(f){pt(u,f);var c=gt(u);function u(){var l;return Ge(this,u),l=c.apply(this,arguments),l.channels={},l}return je(u,[{key:"connect",value:function(){}},{key:"listen",value:function(s,m,C){return new vs}},{key:"channel",value:function(s){return new vs}},{key:"privateChannel",value:function(s){return new ph}},{key:"encryptedPrivateChannel",value:function(s){return new ev}},{key:"presenceChannel",value:function(s){return new tv}},{key:"leave",value:function(s){}},{key:"leaveChannel",value:function(s){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),u}(wl),gh=function(){function f(c){Ge(this,f),this.options=c,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return je(f,[{key:"channel",value:function(u){return this.connector.channel(u)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new lh(wr(wr({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new lh(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new ch(this.options);else if(this.options.broadcaster=="null")this.connector=new nv(this.options);else if(typeof this.options.broadcaster=="function"&&Jm(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(yr(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(u){return this.connector.presenceChannel(u)}},{key:"leave",value:function(u){this.connector.leave(u)}},{key:"leaveChannel",value:function(u){this.connector.leaveChannel(u)}},{key:"leaveAllChannels",value:function(){for(var u in this.connector.channels)this.leaveChannel(u)}},{key:"listen",value:function(u,l,s){return this.connector.listen(u,l,s)}},{key:"private",value:function(u){return this.connector.privateChannel(u)}},{key:"encryptedPrivate",value:function(u){if(this.connector instanceof ch)throw new Error("Broadcaster ".concat(yr(this.options.broadcaster)," ").concat(this.options.broadcaster," does not support encrypted private channels."));return this.connector.encryptedPrivateChannel(u)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":yr(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var u=this;Vue.http.interceptors.push(function(l,s){u.socketId()&&l.headers.set("X-Socket-ID",u.socketId()),s()})}},{key:"registerAxiosRequestInterceptor",value:function(){var u=this;axios.interceptors.request.use(function(l){return u.socketId()&&(l.headers["X-Socket-Id"]=u.socketId()),l})}},{key:"registerjQueryAjaxSetup",value:function(){var u=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(l,s,m){u.socketId()&&m.setRequestHeader("X-Socket-Id",u.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var u=this;document.addEventListener("turbo:before-fetch-request",function(l){l.detail.fetchOptions.headers["X-Socket-Id"]=u.socketId()})}}]),f}();var bs=mu(mh());var xl=mu(vh());var _h=(()=>{let c=class c{constructor(l){this.http=l}reverseGeocodeWithGoogleMaps(l,s){let m=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${l},${s}&key=api_key_here`;return this.http.get(m,{})}getLocalisation(){let l,s,m;return navigator.geolocation?navigator.geolocation.getCurrentPosition(C=>(l=C.coords.latitude,s=C.coords.longitude,console.log("/***** The Value  position  ****/"),console.log(C),C),C=>{switch(C.code){case C.PERMISSION_DENIED:m="User denied the request for Geolocation.";break;case C.POSITION_UNAVAILABLE:m="Location information is unavailable.";break;case C.TIMEOUT:m="The request to get user location timed out.";break}}):m="Geolocation is not supported by this browser.",null}};c.\u0275fac=function(s){return new(s||c)(_u(Eu))},c.\u0275prov=Ko({token:c,factory:c.\u0275fac,providedIn:"root"});let f=c;return f})();var bh=(()=>{let c=class c{transform(l,s){return!l||!s?l:l.filter(m=>{let C=!1;return m.name.toLowerCase().includes(s.toLowerCase())&&(C=!0),m?.vehicle&&m?.vehicle?.driver&&m?.vehicle?.driver.name.toLowerCase().includes(s.toLowerCase())&&(C=!0),C})}};c.\u0275fac=function(s){return new(s||c)},c.\u0275pipe=Qo({name:"searchFilter",type:c,pure:!0});let f=c;return f})();var yh=(()=>{let c=class c{transform(l,s="kmh"){if(!l)return"0 km/h";let m,C;switch(s.toLowerCase()){case"mph":m=l*2.23694,C="mph";break;case"kmh":default:m=l*3.6,C="km/h";break}return`${m.toFixed(1)} ${C}`}};c.\u0275fac=function(s){return new(s||c)},c.\u0275pipe=Qo({name:"speedFormat",type:c,pure:!0});let f=c;return f})();var sv=["directionsPanel"],av=["map"],lv=["alertSound"],cv=["deleteModal"],wh=()=>[],uv=f=>({"position-relative spinning":f});function hv(f,c){f&1&&(I(0,"div",31)(1,"div",32)(2,"div",38)(3,"p"),Z(4," Pas d'historique pour la p\xE9riode s\xE9l\xE9ctionn\xE9e "),P()()()())}function fv(f,c){if(f&1){let u=ot();I(0,"span",48),se("mouseenter",function(){let s=ie(u).$implicit,m=$(4);return re(m.hoveredDate=s)})("mouseleave",function(){ie(u);let s=$(4);return re(s.hoveredDate=null)}),Z(1),P()}if(f&2){let u=c.$implicit,l=c.focused,s=$(4);ns("focused",l)("range",s.isRange(u))("faded",s.isHovered(u)||s.isInside(u)),L(),xt(" ",u.day," ")}}function dv(f,c){if(f&1){let u=ot();Y(0,"hr",49),I(1,"button",50),se("click",function(){ie(u),$();let s=zt(4);return $(3).clearDateRange(),re(s.close())}),Z(2,"Clear "),P(),I(3,"button",51),se("click",function(){ie(u),$();let s=zt(4);return re(s.close())}),Z(4,"Close"),P()}}function pv(f,c){if(f&1){let u=ot();Yt(0),I(1,"div",39)(2,"div",40)(3,"input",41,4),se("dateSelect",function(s){ie(u);let m=$(3);return re(m.onDateSelection(s))}),P(),Xe(5,fv,2,7,"ng-template",null,5,_r),P()(),I(7,"div",42)(8,"div",43)(9,"input",44,6),se("input",function(){ie(u);let s=zt(10),m=$(3);return re(m.fromDate=m.validateInput(m.fromDate,s.value))}),P(),I(11,"button",45),se("click",function(){ie(u);let s=zt(4);return re(s.toggle())}),Y(12,"i",46),P()(),I(13,"div",43)(14,"input",47,7),se("input",function(){ie(u);let s=zt(15),m=$(3);return re(m.toDate=m.validateInput(m.toDate,s.value))}),P(),I(16,"button",45),se("click",function(){ie(u);let s=zt(4);return re(s.toggle())}),Y(17,"i",46),P()()(),Xe(18,dv,5,0,"ng-template",null,8,_r),Zt()}if(f&2){let u=zt(6),l=zt(19),s=$(3);L(3),J("autoClose","outside")("displayMonths",2)("dayTemplate",u)("startDate",s.fromDate)("footerTemplate",l),L(6),J("value",s.formatter.format(s.fromDate)),L(5),J("value",s.formatter.format(s.toDate))}}function gv(f,c){if(f&1){let u=ot();Yt(0),I(1,"div",27)(2,"a",28),se("click",function(){ie(u);let s=$(2);return re(s.bachTofilter())}),I(3,"span",29),Z(4),pe(5,"translate"),P()()(),Xe(6,hv,5,0,"div",30),I(7,"div",31)(8,"div",32)(9,"select2",33),pe(10,"async"),pe(11,"async"),pe(12,"translate"),Ye("ngModelChange",function(s){ie(u);let m=$(2);return Je(m.deviceId,s)||(m.deviceId=s),re(s)}),se("update",function(s){ie(u);let m=$(2);return re(m.selectedVehicle(s))}),P()()(),I(13,"div",31)(14,"div",32)(15,"select2",34),pe(16,"translate"),pe(17,"translate"),Ye("ngModelChange",function(s){ie(u);let m=$(2);return Je(m.selectedPeriode,s)||(m.selectedPeriode=s),re(s)}),se("update",function(s){ie(u);let m=$(2);return re(m.changePeriode(s))}),P()()(),Xe(18,pv,20,7,"ng-container",12),I(19,"div",31)(20,"div",35)(21,"button",36),se("click",function(){ie(u);let s=$(2);return re(s.show())}),I(22,"div",37),Z(23," Afficher "),P()()()(),Zt()}if(f&2){let u,l=$(2);L(4),Ae(_e(5,12,"search_filter")),L(2),J("ngIf",l.alertNoHistory),L(3),J("data",(u=_e(10,14,l.vehicle$))!=null&&u.length?_e(11,16,l.vehicle$):Ci(24,wh)),Ke("ngModel",l.deviceId),J("placeholder",_e(12,18,"select_vehicle")),L(6),Tn("noResultMessage",_e(16,20,"no_data_found")),J("placeholder",_e(17,22,"select_periode"))("data",l.periodes!=null&&l.periodes.length?l.periodes:Ci(25,wh)),Ke("ngModel",l.selectedPeriode),L(3),J("ngIf",l.selectedPeriode=="Personnalis\xE9"),L(3),J("disabled",!l.selectedDevice),L(),J("ngClass",Cu(26,uv,l.loaderBtnAfficher))}}function mv(f,c){if(f&1){let u=ot();I(0,"li",73),se("click",function(){let s=ie(u).$implicit,m=$(4);return re(m.setSpeed(s.value))}),Z(1),P()}if(f&2){let u=c.$implicit,l=$(4);ns("active",u.value==l.selectedSpeed),L(),xt(" ",u.lbl," ")}}function vv(f,c){if(f&1&&(I(0,"div",70)(1,"ul",71),Xe(2,mv,2,3,"li",72),P()()),f&2){let u=$(3);L(2),J("ngForOf",u.speeds)}}function _v(f,c){if(f&1){let u=ot();Yt(0),I(1,"div",52)(2,"a",28),se("click",function(){ie(u);let s=$(2);return re(s.bachTofilter())}),Y(3,"i",53),I(4,"span",29),Z(5,"Filters"),P()()(),I(6,"div",54)(7,"h3",55),Z(8),P(),I(9,"div",56)(10,"input",57),Ye("ngModelChange",function(s){ie(u);let m=$(2);return Je(m.playbackPosition,s)||(m.playbackPosition=s),re(s)}),se("input",function(s){ie(u);let m=$(2);return re(m.updateMarkerPosition(s))}),P(),I(11,"div",58)(12,"button",59),se("click",function(s){ie(u);let m=$(2);return re(m.togglePopover(s))}),Y(13,"i",60),P(),Xe(14,vv,3,1,"div",61),P(),I(15,"div")(16,"span",62),Z(17),P(),I(18,"div",63)(19,"a",64),se("click",function(){ie(u);let s=$(2);return re(s.back())}),Y(20,"i",65),P(),I(21,"a",66),se("click",function(){ie(u);let s=$(2);return re(s.togglePlayStop())}),Y(22,"i"),P(),I(23,"a",67),se("click",function(){ie(u);let s=$(2);return re(s.avance())}),Y(24,"i",68),P()(),I(25,"span",69),Z(26),P()()()(),Zt()}if(f&2){let u=$(2);L(8),Ae(u.selectedDevice==null?null:u.selectedDevice.vehicle_name),L(2),Ke("ngModel",u.playbackPosition),L(4),J("ngIf",u.isPopoverVisible),L(3),xt(" ",u.currentDate||"00:00:00 00:00"," "),L(5),Pn(u.isPlaying?"ri-stop-circle-line":"ri-play-circle-line"),L(4),Ae(u.currentStep+" / "+u.totalSteps)}}function bv(f,c){if(f&1&&(I(0,"div",26),Xe(1,gv,24,28,"ng-container",12)(2,_v,27,8,"ng-container",12),P()),f&2){let u=$();L(),J("ngIf",!u.modeLecture),L(),J("ngIf",u.modeLecture)}}function yv(f,c){if(f&1){let u=ot();Yt(0),I(1,"div",78)(2,"h5"),Z(3),I(4,"a",79),se("click",function(){let s=ie(u).$implicit,m=$(4);return re(m.navigateTo(s))}),Y(5,"i",80),P()()(),Zt()}if(f&2){let u=c.$implicit;L(3),xt("",u.name," ")}}function wv(f,c){if(f&1&&(Yt(0),Xe(1,yv,6,1,"ng-container",77),Zt()),f&2){let u=$(3);L(),J("ngForOf",u.geofences)}}function Cv(f,c){if(f&1){let u=ot();I(0,"p",81),Z(1),pe(2,"translate"),I(3,"a",82),se("click",function(){ie(u);let s=$(3);return re(s.goTo("/geofence/create"))}),Z(4),pe(5,"translate"),P()()}f&2&&(L(),xt(" ",_e(2,2,"empty_geofence")," "),L(3),Ae(_e(5,4,"add_geofence")))}function xv(f,c){if(f&1){let u=ot();Yt(0),I(1,"div",74)(2,"a",28),se("click",function(){ie(u);let s=$(2);return re(s.bachTofilter())}),I(3,"span",29),Z(4,"Select Geofence"),P()()(),I(5,"div",75),Xe(6,wv,2,1,"ng-container",76)(7,Cv,6,6,"ng-template",null,9,_r),P(),Zt()}if(f&2){let u=zt(8),l=$(2);L(6),J("ngIf",(l.geofences==null?null:l.geofences.length)>0)("ngIfElse",u)}}function Sv(f,c){if(f&1&&(I(0,"div",26),Xe(1,xv,9,2,"ng-container",12),P()),f&2){let u=$();L(),J("ngIf",!u.modeLecture)}}function kv(f,c){if(f&1){let u=ot();Yt(0),I(1,"div",73),se("click",function(){let s=ie(u).$implicit,m=$(2);return re(m.selectDevice(s))}),I(2,"div",10),Y(3,"img",88)(4,"span"),P(),I(5,"div")(6,"h3"),Z(7),P(),I(8,"h6",89),Z(9),P(),I(10,"span"),Z(11),P()(),I(12,"div",90)(13,"button",91),es(),I(14,"svg",92)(15,"title"),Z(16,"Engine"),P(),Y(17,"path",93),P(),ts(),Y(18,"span",94),P(),I(19,"button",95),es(),I(20,"svg",96),Y(21,"path",97),P(),ts(),Y(22,"span",94),P()()(),Zt()}if(f&2){let u=c.$implicit,l=$(2);L(),is("vehicle-item  ",l.clickedDevice&&l.clickedDevice.id===u.id?"active":"",""),L(2),wu("src","assets/images/",u&&(u.vehicle==null?null:u.vehicle.type)=="moto"?"moto.png":"car_avatar.svg","",bu),L(),pl("background-color: ",u.status=="online"?"#00ff00":"red",";width: 10px;height: 10px;position: absolute;display: inline-block;border-radius: 50%;bottom: 0;right: 12px"),L(3),Ae(u.name),L(2),Ae(u&&u.vehicle&&u.vehicle.driver?u.vehicle.driver.name+" - "+(u.vehicle.driver==null?null:u.vehicle.driver.phone):"Chauffeur non indiqu\xE9"),L(),pl("color: ",u.status=="online"?"#878787":"red",";margin-top: 3px "),L(),Ae(u.last_update_for_human),L(2),Pn("data.attributes.fuelLevel > 80 ? high : low "),L(6),Pn("data.attributes.batteryLevel > 80 ? high : low ")}}function Mv(f,c){if(f&1){let u=ot();I(0,"div",26)(1,"div",74)(2,"a",28),se("click",function(){ie(u);let s=$();return re(s.bachTofilter())}),I(3,"span",29),Z(4),pe(5,"translate"),P()(),I(6,"span",73),se("click",function(){ie(u);let s=$();return re(s.goTo("/vehicle/create"))}),Y(7,"i",83),P(),I(8,"span",73),se("click",function(){ie(u);let s=$();return re(s.refresh())}),Y(9,"i",84),P()(),I(10,"div",75)(11,"div",85)(12,"input",86),Ye("ngModelChange",function(s){ie(u);let m=$();return Je(m.searchText,s)||(m.searchText=s),re(s)}),P(),Y(13,"i",87),P(),Xe(14,kv,23,18,"ng-container",77),pe(15,"searchFilter"),P()()}if(f&2){let u=$();L(4),Ae(_e(5,3,"select_vehicle")),L(8),Ke("ngModel",u.searchText),L(2),J("ngForOf",vr(15,5,u.devices,u.searchText))}}function Pv(f,c){if(f&1){let u=ot();Yt(0),I(1,"section")(2,"div",98)(3,"div",99)(4,"div",100)(5,"div",101),Y(6,"i",102),P(),I(7,"div",103)(8,"h3"),Z(9),pe(10,"translate"),P(),I(11,"p"),Z(12),pe(13,"translate"),I(14,"a",82),se("click",function(){ie(u);let s=$();return re(s.goTo("/vehicle/create"))}),Z(15),pe(16,"translate"),P()()()(),I(17,"a",104),Y(18,"i",105),P()()()(),Zt()}f&2&&(L(9),Ae(_e(10,3,"from_scartch")),L(3),xt(" ",_e(13,5,"from_scartch_text")," "),L(3),Ae(_e(16,7,"add_vehicle")))}function Tv(f,c){f&1&&(Yt(0),I(1,"div",129)(2,"span"),Z(3),pe(4,"translate"),P()(),Zt()),f&2&&(L(3),Ae(_e(4,1,"moving")))}function Iv(f,c){f&1&&(I(0,"div",130)(1,"span"),Z(2),pe(3,"translate"),P()()),f&2&&(L(2),Ae(_e(3,1,"stopping")))}function Ev(f,c){if(f&1){let u=ot();I(0,"div",106)(1,"div",107)(2,"div",108)(3,"p",109),Z(4),P(),I(5,"button",110),se("click",function(){ie(u);let s=$();return re(s.closeShowPanel())}),es(),I(6,"svg",111),Y(7,"path",112),P(),ts(),Y(8,"span",94),P()(),I(9,"div",113)(10,"table",114)(11,"tbody",115)(12,"tr",116)(13,"td",117)(14,"p",118),Z(15),pe(16,"translate"),P()(),I(17,"td",117)(18,"p",109),Z(19),pe(20,"date"),P()()(),I(21,"tr",116)(22,"td",117)(23,"p",118),Z(24,"Adresse"),P()(),I(25,"td",117)(26,"p",109),Z(27),P()()(),I(28,"tr",116)(29,"td",117)(30,"p",118),Z(31),pe(32,"translate"),P()(),I(33,"td",117)(34,"p",109),Z(35),pe(36,"speedFormat"),P()()(),I(37,"tr",116)(38,"td",117)(39,"p",118),Z(40),pe(41,"translate"),P()(),I(42,"td",117)(43,"p",109),Z(44),pe(45,"number"),P()()(),I(46,"tr",116)(47,"td",117)(48,"p",118),Z(49),pe(50,"translate"),P()(),I(51,"td",117)(52,"p",109),Xe(53,Tv,5,3,"ng-container",76)(54,Iv,4,3,"ng-template",null,9,_r),P()()()()()(),I(56,"div",119)(57,"button",120),se("click",function(){ie(u);let s=$();return re(s.actionPerform("plus_action"))}),Y(58,"i",121)(59,"span",94),P(),I(60,"button",122),se("click",function(){ie(u);let s=$();return re(s.actionPerform("replay"))}),Y(61,"i",123)(62,"span",94),P(),I(63,"button",124),se("click",function(){ie(u);let s=$();return re(s.actionPerform("cmd"))}),Y(64,"i",125)(65,"span",94),P(),I(66,"button",124),se("click",function(){ie(u);let s=$();return re(s.actionPerform("edit"))}),Y(67,"i",126)(68,"span",94),P(),I(69,"button",127),se("click",function(){ie(u);let s=$();return re(s.actionPerform("delete"))}),Y(70,"i",128)(71,"span",94),P()()()()}if(f&2){let u=zt(55),l=$();L(4),Ae(l.clickedDevice.name+" - "+(l.clickedDevice.vehicle&&(l.clickedDevice.vehicle!=null&&l.clickedDevice.vehicle.driver)&&(l.clickedDevice.vehicle!=null&&l.clickedDevice.vehicle.driver.name)?l.clickedDevice.vehicle.driver.name:"Chauffeur non indiqu\xE9")),L(11),Ae(_e(16,11,"last_update")),L(4),Ae(vr(20,13,l.clickedDevice==null?null:l.clickedDevice.last_update_en,"dd-MM-yyyy HH:mm:ss")),L(8),xt(" ",l.detailClickedDevice==null?null:l.detailClickedDevice.traccar.current_adresse.address,`
`),L(4),Ae(_e(32,16,"speed")),L(4),xt("",vr(36,18,l.clickedDevice.position.speed,"kmh")," "),L(5),Ae(_e(41,21,"total_distance")),L(4),xt(" \xA0",vr(45,23,l.clickedDevice==null||l.clickedDevice.position==null||l.clickedDevice.position.attributes==null?null:l.clickedDevice.position.attributes.totalDistance,"1.2-2")," "),L(5),Ae(_e(50,26,"motion")),L(4),J("ngIf",l.clickedDevice==null||l.clickedDevice.position==null||l.clickedDevice.position.attributes==null?null:l.clickedDevice.position.attributes.motion)("ngIfElse",u)}}var Si=class Si{constructor(c,u,l,s,m,C,A,z,F,V,H,G,q,O,B,Q,ue){this.gmaps=c,this.router=u,this.geocodingService=l,this.gmap=s,this.calendar=m,this.renderer=C,this.route=A,this.notificationService=z,this.modalService=F,this.googleMapsService=V,this.cdr=H,this.mapSettingService=G,this.accessDataService=q,this.store=O,this.globalService=B,this.formatter=Q,this.serverGpsService=ue,this.position={lat:34.739822,lng:10.7600196},this.lastTrip={},this.markers=[],this.totalDistance=0,this.path=[],this.selectedPeriode="Aujourd'hui",this.currentInfoWindow=null,this.selectedSpeed=300,this.carPosition=0,this.isPlaying=!1,this.currentDate="",this.currentSpeed="",this.currentStep=0,this.totalSteps=0,this.playbackPosition=0,this.modeLecture=!1,this.speeds=[{value:400,lbl:"Lente"},{value:300,lbl:"Moyenne"},{value:100,lbl:"Rapide"}],this.loaderBtnAfficher=!1,this.periodes=[{value:"Aujourd'hui",label:"Aujourd'hui"},{value:"Hier",label:"Hier"},{value:"Cette semaine",label:"Cette semaine"},{value:"La semaine derni\xE8re",label:"La semaine derni\xE8re"},{value:"Ce mois-ci",label:"Ce mois-ci"},{value:"Le mois dernier",label:"Le mois dernier"},{value:"Personnalis\xE9",label:"Personnalis\xE9"}],this.alertNoHistory=!1,this.currentAdresse="",this.updateSubscription=null,this.devices=[],this.positions=[],this.selectedDevice=null,this.searchTerm="",this.filteredItems=[],this.showActionPanel=!1,this.firstCall=!0,this.firstCallMap=!1,this.numberStep=800,this.carMarkers=[],this.toAddValue=1,this.markerSpeed=1e-4,this.clickedDevice=null,this.clickedDeviceInfo=null,this.detailClickedDevice=null,this.isMapFullscreen=!1,this.modeAffichage="live",this.todayStartAt=null,this.todayEndAt=null,this.mode="live",this.parkingSpots=[],this.hoveredDate=null,this.geofences=[],this.geofencesTraces=[],this.markerStops=[],this.isPopoverVisible=!1,this.pulses=[],this.showNotice=!1,this.bounds=null,this.pathsLastTrip=[],this.settingMap=new In;let Me=this.gettodayRange();this.todayStartAt=Me.start,this.todayEndAt=Me.end,this.selectedPeriode="Aujourd'hui"}ngOnInit(){localStorage.removeItem("selectedVehicle"),this.route.params.subscribe(u=>{Object.keys(u).length>0&&(this.mode=u.mode)}),this.store.dispatch(new Zu({status:1})).subscribe({next:()=>{this.mode=="historique"&&this.route.queryParams.subscribe(u=>{this.deviceId=+u.deviceID,this.store.dispatch(new fs(this.deviceId))}),this.mode=="live"&&this.route.queryParams.subscribe(u=>{this.deviceId=+u.deviceID;let l=xl.default.find(this.devices,["id",this.deviceId]);l&&(this.selectDevice(l),this.store.dispatch(new fs(this.deviceId)))})}}),this.selectedVehicule$.subscribe(u=>{u?console.log("Selected Vehicle:",u):console.log("No vehicle selected.")});let c=this.store.selectSnapshot(u=>u.auth.access_token);window.Pusher=bs.default,console.log(bs.default),bs.default.logToConsole=!0,this.echo=new gh({broadcaster:"pusher",key:ds.pusher_app_key,cluster:ds.pusher_cluster,forceTLS:!0}),this.echo.channel("gps-events").listen(".gps.event",u=>{this.user$.subscribe(l=>{u.data.user_id==l.id&&this.handleGPSEvent(u)})}),this.settingMap=this.mapSettingService.getSettings(),this.mapSettingService.settings$.subscribe(u=>wi(this,null,function*(){this.settingMap=u,yield this.applyMapSettings()}))}handleGPSEvent(c){let u=c.data,l=xl.default.findIndex(this.devices,["id",u.deviceID]);this.closeShowPanel();let s=new this.googleMaps.LatLng(this.devices[l].position.latitude,this.devices[l].position.longitude);this.map.setCenter(s),this.map.setZoom(18),this.playSound(),this.addPulseEffect(this.devices[l].position);let m=new this.googleMaps.InfoWindow({content:`<div style="    font-size: 17px;font-weight: bold;color: black;text-align: center;">${this.devices[l].name}</div><br> <strong style="color: red">${u.msg}</strong> `,pixelOffset:new this.googleMaps.Size(5,10),disableAutoPan:!0});this.carMarkers[u.deviceID].infoWindow&&this.carMarkers[u.deviceID].infoWindow.close(),m.open(this.map,this.carMarkers[u.deviceID])}togglePopover(c){this.isPopoverVisible=!this.isPopoverVisible}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}ngAfterViewInit(){this.carMarkers=[],this.showActionPanel=!1,this.firstCall=!0,this.changeSelectedDate(),this.loadMap()}toggleMapSize(){document.fullscreenElement?(document.exitFullscreen&&document.exitFullscreen(),this.moveControlsBack()):(this.mapElementRef.nativeElement.requestFullscreen?this.mapElementRef.nativeElement.requestFullscreen():this.mapElementRef.nativeElement.webkitRequestFullscreen?this.mapElementRef.nativeElement.webkitRequestFullscreen():this.mapElementRef.nativeElement.msRequestFullscreen&&this.mapElementRef.nativeElement.msRequestFullscreen(),this.moveControlsToBody())}moveControlsToBody(){let c=document.getElementById("customControls");c&&(document.body.appendChild(c),c.style.position="fixed",c.style.top="10px",c.style.left="10px",c.style.zIndex="1000")}moveControlsBack(){let c=document.getElementById("customControls"),u=document.getElementsByClassName("map")[0];c&&u&&(u.appendChild(c),c.style.position="absolute",c.style.top="10px",c.style.left="10px",c.style.zIndex="1")}back(){}avance(){let c=this.isPlaying;c&&this.togglePlayStop();let u=Math.round(this.currentStep/100*(this.pathCoordinates.length-1)),l=this.pathCoordinates[u];this.marker.setPosition(l),this.map.panTo(l),c&&setTimeout(()=>{this.togglePlayStop()},200)}button2Clicked(){this.map.getMapTypeId()==="roadmap"?this.map.setMapTypeId("hybrid"):this.map.setMapTypeId("roadmap")}changeSelectedDate(){}loadMap(){return wi(this,null,function*(){let c=this,u=yield this.gmap.loadGoogleMap();this.googleMaps=u;let l=this.mapElementRef.nativeElement,s;navigator.geolocation&&navigator.geolocation.getCurrentPosition(m=>{let C=new u.LatLng(m.coords.latitude,m.coords.longitude);this.directionsService=new this.googleMaps.DirectionsService,this.directionsDisplay=new this.googleMaps.DirectionsRenderer,this.map=new u.Map(l,{center:C,zoom:12,disableDefaultUI:!0,zoomControl:!0,tilt:45,scrollwheel:!0,gestureHandling:"auto"}),this.renderer.addClass(l,"visible"),this.polyline=new this.googleMaps.Polyline({path:this.path,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2}),this.polyline.setMap(this.map),this.googleMaps.event.addListener(this.map,"click",function(z){console.log("clicked !! "),c.showActionPanel=!1;let F=z.latLng}),this.modeLecture||this.loadDevicesAndPositions(),this.mode!="historique"&&this.mode!="geofences"||this.positions.length>0&&this.mode!="geofences"&&this.plotPath(this.positions),new Audio("assets/sound/driver-online.mp3").play().catch(z=>console.error("Erreur lecture audio:",z))},m=>{switch(m.code){case m.PERMISSION_DENIED:s="User denied the request for Geolocation.";break;case m.POSITION_UNAVAILABLE:s="Location information is unavailable.";break;case m.TIMEOUT:s="The request to get user location timed out.";break}})})}loadDevicesAndPositions(){this.accessDataService.getData(null,"/traccar/devices").subscribe(c=>{this.devices=c,this.filteredItems=c,c.length>0?this.loadPositions():this.showNotice=!0},c=>{console.error("Error fetching devices",c)})}loadPositions(c=null){this.accessDataService.getData(null,"/traccar/positions").subscribe(u=>{this.positions=u,this.positions?.length>0&&this.mapPositionsToDevices()},u=>{console.error("Error fetching positions",u)})}mapPositionsToDevices(){let c=this;this.lastUpdate=new Date().getTime();var u=new this.googleMaps.LatLngBounds;this.devices.forEach(l=>{let s=this.positions.find(m=>m.deviceId===l.id);s&&(l.position=s,this.clickedDevice?.id==l.id&&(this.clickedDevice.position=s),l.position.adresse="Adresse BLA BLA ! ",this.carMarkers[l.id]||this.addMarker(l),console.log("this.clickedDevice"),console.log(this.clickedDevice),this.clickedDevice&&this.clickedDevice.id==l.id&&this.animateMarkers(l),this.firstCall&&u.extend(this.carMarkers[l.id].position))}),this.firstCall&&this.map.fitBounds(u,{top:20,bottom:200,left:20,right:20}),this.bounds=u,this.firstCall=!1}getLocation(c){return wi(this,null,function*(){let u="";try{let l=yield ih.reverseGeocode({latitude:c.latitude,longitude:c.longitude,useLocale:!0,maxResults:1});if(l.addresses[0])u=l.addresses[0].thoroughfare+" - "+l.addresses[0].postalCode+" "+l.addresses[0].locality+" "+l.addresses[0].countryName;else throw new Error("No address found with NativeGeocoder")}catch(l){console.error("Error using NativeGeocoder:",l),this.reverseGeocodeWithGoogleMaps(c.latitude,c.longitude).then(s=>{u=s})}})}refresh(){this.closeShowPanel();var c=new this.googleMaps.LatLngBounds;this.devices.forEach(u=>{this.carMarkers[u.id]&&c.extend(this.carMarkers[u.id]?.position)}),this.mode!="geofences"&&this.map.fitBounds(c,{top:20,bottom:200,left:20,right:20}),this.showActionPanel=!1,this.updateSubscription&&this.updateSubscription.unsubscribe()}reverseGeocodeWithGoogleMaps(c,u){return wi(this,null,function*(){return""})}animateMarkers(c,u=!1){let l=this.carMarkers[c.id],s=l.getPosition(),m;if(u?m={lat:s.lat()+this.markerSpeed,lng:s.lng()+this.markerSpeed}:m={lat:c.position.latitude,lng:c.position.longitude},this.carMarkers[c.id].infoWindow){let H=this.carMarkers[c.id].infoWindow.content,q=new DOMParser().parseFromString(H,"text/html"),O=q.querySelector(".speed");O&&(O.textContent=`${(c.position.speed*3.6).toFixed(2)}`,this.carMarkers[c.id].infoWindow.setContent(q.body.innerHTML))}let C=this.numberStep,A=(m.lat-s.lat())/C,z=(m.lng-s.lng())/C,F=0,V=()=>{if(F<C&&this.clickedDevice&&this.clickedDevice.id==c.id&&c?.position?.speed>0){let H=s.lat()+F*A,G=s.lng()+F*z;l.setAnimation(this.googleMaps.Animation.MOVE),l.setPosition({lat:H,lng:G});let q=this.clickedDevice.vehicle&&this.clickedDevice.vehicle.type=="moto"?"assets/images/city-driver-icon-6.png":"assets/images/cars_icons/city-driver-icon-"+(this.clickedDevice.vehicle&&this.clickedDevice.vehicle.color?this.clickedDevice.vehicle.color:"white")+".png";l.setIcon({url:q,rotation:c.position.course});let O=document.querySelector(`img[src="${q}"]`);O&&(O.style.transform=`rotate(${c.position.course}deg)`),F++,(this.clickedDevice||this.selectedDevice)&&this.selectedDevice?.id==c.id&&(this.path.push(new this.googleMaps.LatLng(H,G)),this.polyline.setPath(this.path),this.startNavigating(H,G)),this.showActionPanel,(this.clickedDevice||this.selectedDevice)&&(this.map.panTo({lat:H,lng:G}),this.map.setCenter({lat:H,lng:G}),this.map.setOptions({zoomControl:!0,gestureHandling:"auto"})),requestAnimationFrame(V)}};V(),console.log(this.carMarkers)}adjustMapCenter(c){console.log("******* device ********"),console.log(c);var u=this.map.getBounds();if(u){var l=u.getNorthEast(),s=u.getSouthWest(),m=(l.lat()-s.lat())*.25,C=new this.googleMaps.LatLng(c.position.latitude-m,c.position.longitude);this.map.panTo(C),this.map.setOptions({zoomControl:!0,gestureHandling:"auto"})}}startNavigating(c,u){this.directionsDisplay.setMap(this.map),this.directionsDisplay.setPanel(this.directionsPanel.nativeElement),this.directionsService.route({origin:{lat:parseFloat(this.startedPositions.lat()),lng:parseFloat(this.startedPositions.lng())},destination:{lat:parseFloat(c),lng:parseFloat(u)},travelMode:this.googleMaps.TravelMode.DRIVING},(l,s)=>{s==this.googleMaps.DirectionsStatus.OK?this.directionsDisplay.setDirections(l):console.warn(s)})}addMarker(c){if(this.map&&c.position){let u=c.vehicle&&c.vehicle.type=="moto"?"assets/images/city-driver-icon-6.png":"assets/images/cars_icons/city-driver-icon-"+(c.vehicle&&c.vehicle.color?c.vehicle.color:"white")+".png",l=new this.googleMaps.Marker({position:new this.googleMaps.LatLng(c.position.latitude,c.position.longitude),map:this.map,icon:{url:u,scaledSize:new this.googleMaps.Size(60,60),rotation:c.position.course},title:`${c.name} (ID: ${c.id})`});l.device=c;let s=document.querySelector(`img[src="${u}"]`);if(s&&(s.style.transform=`rotate(${c.position.course}deg)`),this.firstCall&&(l.animation=this.googleMaps.Animation.DROP),this.carMarkers[c.id]||(this.carMarkers[c.id]=l),this.firstCall){let m=new this.googleMaps.InfoWindow({content:`<span style="font-size: 12px;color: black">${c.name} - <span class="speed" style="font-weight: 600;color: #1e2023">0</span> Km/h</span><p style="margin: 0px;font-size: 12px;color: black;text-align: center">Imat : ${c?.vehicle?.immatriculation}</p>`,pixelOffset:new this.googleMaps.Size(5,10),disableAutoPan:!0});m.open(this.map,l),this.carMarkers[c.id].infoWindow=m}this.mode!="historique"&&this.mode!="geofences"&&l.addListener("click",m=>{let C=new this.googleMaps.LatLng(l.device.position.latitude,l.device.position.longitude);this.map.setCenter(C),this.map.setZoom(18),this.clickedDevice=l.device,this.settingMap.showParkings&&(this.removeAllStopsMarker(),this.fetchStops(this.startDate,this.endDate)),ds.showAdresses&&this.getDetailClickedDevice(),console.log("/***** The Value    this.clickedDevice ****/"),console.log(this.clickedDevice),this.mode!="historique"&&this.mode!="geofences"&&(this.updateSubscription&&this.updateSubscription.unsubscribe(),this.updateSubscription=dl(5e3).subscribe(()=>this.loadPositions(this.clickedDevice))),this.getLastTrip(l.device.id,this.todayStartAt,this.todayEndAt),this.loadInfoDevice(),this.startedPositions=l.getPosition(),this.showActionPanel=!0,this.adjustMapCenter(l.device)})}}removeMarker(c){console.log("/***** The Value this.markers[device.id] ****/"),console.log(this.carMarkers[c.id]),this.carMarkers[c.id]&&this.carMarkers[c.id].setMap(null),delete this.carMarkers[c.id]}getDetailClickedDevice(){this.accessDataService.getData(null,"/traccar-laravel/get-device-all-details/"+this.clickedDevice.id).subscribe(c=>{this.detailClickedDevice=c},c=>{},()=>{})}getLastTrip(c,u,l){this.clearPolylines(),this.serverGpsService.getTrajets([c],u,l).subscribe(s=>{if(s.length>0){this.lastTrip[c]=s[s.length-1],console.log("/***** The Value   this.lastTrip[car_id] ****/"),console.log(this.lastTrip[c]);let{startTime:m,endTime:C,deviceId:A}=this.lastTrip[c],z=new Date(m).toISOString(),F=new Date(C).toISOString();this.serverGpsService.getPositions(A,z,F).subscribe(V=>{let H=V.map(G=>({lat:G.latitude,lng:G.longitude}));this.pathsLastTrip.push(this.googleMapsService.drawPath(this.map,H))},V=>{},()=>{})}else this.lastTrip[c]=null},s=>{},()=>{})}clearPolylines(){this.pathsLastTrip.forEach(c=>c.setMap(null)),this.pathsLastTrip=[]}loadInfoDevice(){this.serverGpsService.getInfofDevice(this.clickedDevice.id).subscribe(c=>{this.clickedDeviceInfo=c},c=>{},()=>{})}gettodayRange(){let c=new Date,u=new Date(c);u.setDate(c.getDate()),u.setHours(0,0,0,0);let l=new Date(c);return l.setDate(c.getDate()),l.setHours(23,59,59,999),{start:u.toISOString(),end:l.toISOString()}}focusMapOnDevice(c){let u=this.devices.find(s=>c.id===s.id);if(console.log("/***** The Value matchedDevice ****/"),console.log(u),!this.map||!u||!u.position||!u.position.latitude||!u.position.longitude)return;let l=new this.googleMaps.LatLng(u.position.latitude,u.position.longitude);this.map.setCenter(l),this.map.setZoom(15)}changePeriode(c){switch(this.selectedPeriode){case"Aujourd'hui":this.startDate=this.gettodayRange().start,this.endDate=this.gettodayRange().end;break;case"Hier":this.startDate=this.getYesterdayDateRange().start,this.endDate=this.getYesterdayDateRange().end;break;case"Cette semaine":this.startDate=this.getWeekRange().start,this.endDate=this.getWeekRange().end;break;case"Personnalis\xE9":this.startDate=this.fromDate?this.fromDate.year+"-"+this.fromDate.month+"-"+this.fromDate.day:null,this.endDate=this.toDate?this.toDate.year+"-"+this.toDate.month+"-"+this.toDate.day:null;break;default:}}show(){this.modeLecture=!0,this.changePeriode(null),this.loadHistory(this.startDate,this.endDate)}loadHistory(c,u){this.isPlaying=!1,this.currentSpeed="",this.currentDate="",this.currentStep=0,this.playbackPosition=0,this.selectedDevice&&c&&u&&(this.loaderBtnAfficher=!0,this.accessDataService.getData({deviceId:this.selectedDevice.id,from:this.validateAndConvertForTraccar(c),to:this.validateAndConvertForTraccar(u)},"/traccar/positions").subscribe(l=>{this.loaderBtnAfficher=!1,this.positions=l,this.positions.length>0?(this.loadMap(),this.fetchStops(c,u)):this.alertNoHistory=!0},l=>{},()=>{}))}fetchStops(c,u){this.clickedDevice&&this.accessDataService.getData({deviceId:this.clickedDevice.id,from:this.validateAndConvertForTraccar(c),to:this.validateAndConvertForTraccar(u)},"/traccar/reports/stops").subscribe(l=>{this.parkingSpots=l.data,this.parkingSpots?.length>0&&this.addParkingMarkersToMapV2(this.parkingSpots,this.map)},l=>{},()=>{})}validateAndConvertForTraccar(c){if(this.isAcceptedTraccarFormat(c))return console.log("Date string is in the accepted format for Traccar:",c),c;try{let u=this.convertToTraccarFormat(c);return console.log("Converted to Traccar accepted format:",u),u}catch(u){return console.error("Error converting date string:",u),null}}isAcceptedTraccarFormat(c){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(c)}convertToTraccarFormat(c){let u=new Date(c);if(isNaN(u.getTime()))throw new Error("Invalid date string");return u.toISOString().split(".")[0]+"Z"}plotPath(c){this.pathCoordinates=c.map(m=>({lat:m.latitude,lng:m.longitude,time:new Date(m.deviceTime),speed:m.speed})),console.log("/***** The Value this.this.googleMaps  ****/"),console.log(this.googleMaps);let u={path:this.pathCoordinates,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2,icons:[]};u.icons=this.addDynamicArrows(this.pathCoordinates),new google.maps.Polyline(u).setMap(this.map);let s=new this.googleMaps.LatLngBounds;this.pathCoordinates.forEach(m=>s.extend(m)),this.map.fitBounds(s),this.map.setCenter(this.pathCoordinates[0]),this.map.setZoom(20),console.log("/***** The Value this.pathCoordinates[0] ****/"),console.log(this.pathCoordinates[0]),this.marker=new this.googleMaps.Marker({position:this.pathCoordinates[0],map:this.map,title:"Playback fff Marker"}),this.calculateTotalDistance()}addDynamicArrows(c){let u=[];for(let s=0;s<c.length-1;s+=10){let m=c[s],C=c[s+1],A=this.calculateAngle(m,C);u.push({icon:{path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW,scale:3,strokeColor:"#0014ff"},offset:`${s/c.length*100}%`,rotation:A})}return u}calculateAngle(c,u){let l=u.lat-c.lat,s=u.lng-c.lng;return Math.atan2(l,s)*180/Math.PI}addParkingMarkersToMapV2(c,u){let l=new this.googleMaps.Geocoder,s=0;c.forEach(m=>{console.log("/***** The Value spot****/"),console.log(m);let{start:C,end:A}=m,z=m.duration,F=new this.googleMaps.Marker({position:{lat:m.latitude,lng:m.longitude},map:this.map,title:"",icon:{url:s==0?"assets/images/parking_new_start.png":s==c.length-1?"assets/images/parking_new_end.png":"assets/images/parking_new.png",scaledSize:new this.googleMaps.Size(50,50)}});this.markerStops.push(F);let V=m.address,H=`
                        <div class="window_info_map">
                          <h3>Parking N\xB0${s+1}</h3> 
                          <p><strong>Adresse:</strong> ${V}</p>
                          <p><strong>Durr\xE9e:</strong> ${z}</p>
                        </div>
                      `,G=new this.googleMaps.InfoWindow({content:H});F.addListener("click",()=>{this.currentInfoWindow&&this.currentInfoWindow.close(),G.open(this.map,F),this.currentInfoWindow=G}),s++})}formatDuration(c){let u=Math.floor(c/6e4);return`${Math.floor(u/60)}h ${u%60}m`}getYesterdayDateRange(){let c=new Date,u=new Date(c);u.setDate(c.getDate()-1),u.setHours(0,0,0,0);let l=new Date(c);return l.setDate(c.getDate()-1),l.setHours(23,59,59,999),{start:u.toISOString(),end:l.toISOString()}}getWeekRange(){let c=new Date,u=new Date(c);u.setDate(c.getDate()-7),u.setHours(0,0,0,0);let l=new Date(c);return l.setDate(c.getDate()),l.setHours(23,59,59,999),{start:u.toISOString(),end:l.toISOString()}}stop(){console.log("Stopped playing")}setSpeed(c){this.selectedSpeed=c}calculateTotalDistance(){this.totalDistance=0;for(let c=1;c<this.pathCoordinates.length;c++){let u=this.pathCoordinates[c-1],l=this.pathCoordinates[c],s=this.getDistanceFromLatLonInKm(u.lat,u.lng,l.lat,l.lng);this.totalDistance+=s}}getDistanceFromLatLonInKm(c,u,l,s){let C=this.deg2rad(l-c),A=this.deg2rad(s-u),z=Math.sin(C/2)*Math.sin(C/2)+Math.cos(this.deg2rad(c))*Math.cos(this.deg2rad(l))*Math.sin(A/2)*Math.sin(A/2);return 6371*(2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z)))}deg2rad(c){return c*(Math.PI/180)}validateInput(c,u){let l=this.formatter.parse(u);return l&&this.calendar.isValid(ml.from(l))?ml.from(l):c}clearDateRange(){this.fromDate=null,this.toDate=null;let c=null}onDateSelection(c){!this.fromDate&&!this.toDate?this.fromDate=c:this.fromDate&&!this.toDate&&c&&c.after(this.fromDate)?this.toDate=c:(this.toDate=null,this.fromDate=c);let u={start_date:`${this.fromDate.year}-${this.fromDate.month}-${this.fromDate.day}`,end_date:`${this.toDate?.year}-${this.toDate?.month}-${this.toDate?.day}`}}isHovered(c){return this.fromDate&&!this.toDate&&this.hoveredDate&&c.after(this.fromDate)&&c.before(this.hoveredDate)}isInside(c){return this.toDate&&c.after(this.fromDate)&&c.before(this.toDate)}isRange(c){return c.equals(this.fromDate)||this.toDate&&c.equals(this.toDate)||this.isInside(c)||this.isHovered(c)}bachTofilter(){this.modeLecture=!1}togglePlayStop(){this.isPlaying=!this.isPlaying,this.isPlaying?this.play():this.stop()}goTo(c){this.router.navigateByUrl(c)}play(){let c=Math.round(this.playbackPosition/100*(this.pathCoordinates.length-1));this.totalSteps=this.pathCoordinates.length;let u=100;this.map.setZoom(18);let l=()=>{if(c<this.totalSteps&&this.isPlaying){let s=this.pathCoordinates[c];console.log(c),console.log(s),this.marker.setPosition(s),this.map.panTo(s),this.playbackPosition=c/(this.totalSteps-1)*100,this.updateCurrentInfo(c),c=c+1,this.currentStep=c,setTimeout(l,this.selectedSpeed)}};l()}updateCurrentInfo(c){this.currentStep=c+1,this.currentDate=this.pathCoordinates[c].time.toLocaleString(),this.currentSpeed=this.pathCoordinates[c].speed,console.log("/***** Current Date****/"),console.log(this.currentDate)}updateMarkerPosition(c){console.log("/***** The Value eventeventevent ****/"),console.log(c.target.value);let u=this.isPlaying;u&&this.togglePlayStop();let l=Math.round(c.target.value/100*(this.pathCoordinates.length-1));console.log("/***** The Value ****/"),console.log(l);let s=this.pathCoordinates[l];this.marker.setPosition(s),this.map.panTo(s),u&&setTimeout(()=>{this.togglePlayStop()},200)}fetchGeofences(){this.accessDataService.getData(null,"/traccar/geofences").subscribe(c=>{this.geofences=c.data,this.geofences?.length>0&&(this.drawGeofences(),this.mode=="geofences"&&setTimeout(()=>this.fitMapToGeofences(),100))},c=>{},()=>{})}fitMapToGeofences(c=!1){let u=new google.maps.LatLngBounds;this.geofences.forEach(l=>{console.log("/***** The Value  geofence ****/"),console.log(l);let s=l.area;this.fit(s,u)}),this.map.fitBounds(u)}navigateTo(c){let u=new google.maps.LatLngBounds;if(c.area.startsWith("CIRCLE")){let l=this.globalService.parseCircleArea(c.area),s=new this.googleMaps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,center:l.center,radius:l.radius});this.extendBoundsWithCircle(u,s),this.map.fitBounds(u)}else c.area.startsWith("POLYGON")&&({paths:this.globalService.parsePolygonArea(c.area),options:{fillColor:"blue",fillOpacity:.2,strokeColor:"blue",strokeOpacity:.5,strokeWeight:2}}.paths.forEach(s=>u.extend(s)),this.map.fitBounds(u))}fit(c,u){if(c.startsWith("CIRCLE")){let l=this.globalService.parseCircleArea(c),s=new this.googleMaps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:this.map,center:l.center,radius:l.radius});this.extendBoundsWithCircle(u,s)}else c.startsWith("POLYGON")&&{paths:this.globalService.parsePolygonArea(c),options:{fillColor:"blue",fillOpacity:.2,strokeColor:"blue",strokeOpacity:.5,strokeWeight:2}}.paths.forEach(s=>u.extend(s))}extendBoundsWithCircle(c,u){let l=u.getCenter(),s=u.getRadius(),m=6378137,C=s/m*(180/Math.PI),A=s/(m*Math.cos(Math.PI*l.lat()/180))*(180/Math.PI),z=new google.maps.LatLng(l.lat()+C,l.lng()+A);c.extend(z);let F=new google.maps.LatLng(l.lat()-C,l.lng()-A);c.extend(F)}drawGeofences(){this.geofences?.forEach(c=>{let u=c.area;c.attributes.show!=!1&&(u.startsWith("CIRCLE")?this.drawCircleGeofence(u,c.name):u.startsWith("POLYGON")&&this.drawPolygonGeofence(u,c.name))})}removeAllGeofences(){this.geofencesTraces.forEach(c=>c.setMap(null)),this.geofencesTraces=[]}removeAllStopsMarker(){this.markerStops.forEach(c=>c.setMap(null)),this.markerStops=[]}drawCircleGeofence(c,u){let l=this.globalService.parseCircleArea(c),s=new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.2,map:this.map,center:l.center,radius:l.radius});this.geofencesTraces.push(s),new google.maps.Marker({position:l.center,map:this.map,label:{text:u,color:"white",fontSize:"13px"},icon:{path:google.maps.SymbolPath.CIRCLE,scale:0}})}drawPolygonGeofence(c,u){let l=this.globalService.parsePolygonArea(c),s=new google.maps.Polygon({paths:l,strokeColor:"#FFS0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:this.map});this.geofencesTraces.push(s);let m=this.getCentroid(l);new google.maps.Marker({position:m,map:this.map,label:{text:u,color:"white",fontSize:"13px"},icon:{path:google.maps.SymbolPath.CIRCLE,scale:0}})}getCentroid(c){let u=0,l=0;return c.forEach(s=>{u+=s.lat,l+=s.lng}),{lat:u/c.length,lng:l/c.length}}closeShowPanel(){this.showActionPanel=!1}selectDevice(c){this.clickedDevice=c,this.clickedDevice?.vehicle&&localStorage.setItem("selectedVehicle",this.clickedDevice.vehicle.id),this.clickedDevice.vehicle_name=c.name,this.focusMapOnDevice(this.clickedDevice),this.mode!="historique"&&this.mode!="geofences"&&(this.updateSubscription&&this.updateSubscription.unsubscribe(),this.updateSubscription=dl(5e3).subscribe(()=>this.loadPositions(this.clickedDevice))),this.getLastTrip(c.id,this.todayStartAt,this.todayEndAt)}selectedVehicle(c){c?.options&&c.options[0]&&(this.store.dispatch(new fs(c.options[0].data.id)),this.selectedDevice=c.options[0].data.device.info_traccar,this.selectedDevice.vehicle_name=c.options[0].data.name,this.focusMapOnDevice(this.selectedDevice),this.alertNoHistory=!1)}addPulseEffect(c){c={lat:c.latitude,lng:c.longitude},console.log("/***** The Value positionposition ****/"),console.log(c);let u=document.createElement("div");u.className="pulse";let l=new google.maps.OverlayView;l.onAdd=()=>{let s=l.getPanes()?.overlayLayer;s&&s.appendChild(u)},l.draw=()=>{let s=l.getProjection();if(s){let m=s.fromLatLngToDivPixel(new google.maps.LatLng(c));console.log("/***** The Value point ****/"),console.log(m),m&&(u.style.position="absolute",u.style.left=`${m.x}px`,u.style.top=`${m.y}px`,console.log("Position du cercle :",m))}},l.onRemove=()=>{u.parentNode?.removeChild(u)},l.setMap(this.map),setTimeout(()=>{l.setMap(null)},999999)}playSound(){this.alertSound.nativeElement.play()}settingsMap(){this.closeShowPanel(),this.modalService.open(sh,{ariaLabelledBy:"address-add-Modal",centered:!0,windowClass:"theme-modal modal-lg"}).result.then(u=>{},u=>{})}showAdresse(){}actionPerform(c){switch(console.log("/***** The Value  this.clickedDevice  ****/"),console.log(this.clickedDevice),c){case"delete":this.clickedDevice.vehicle&&this.DeleteModal.openModal("delete",this.clickedDevice.vehicle);break;case"replay":this.goTo("/live/historique?deviceID="+this.clickedDevice.vehicle.id);break;default:alert("Not action defined ! ");break}}delete(c,u){this.removeMarker(this.clickedDevice),this.store.dispatch(new Qu(u.id))}applyMapSettings(){return wi(this,null,function*(){this.firstCallMap&&this.notificationService.showSuccess("Le param\xE9trage a \xE9t\xE9 appliqu\xE9 avec succ\xE8s"),this.firstCallMap=!0,this.numberStep=this.settingMap.animationTime,this.settingMap.showParkings?this.fetchStops(this.todayStartAt,this.todayEndAt):this.removeAllStopsMarker(),this.settingMap.showLastTrip?this.getLastTrip(this.clickedDevice,this.startDate,this.endDate):this.clearPolylines(),this.settingMap.showGeofences?this.fetchGeofences():this.removeAllGeofences()})}};Si.\u0275fac=function(u){return new(u||Si)(Ee(vl),Ee(Ou),Ee(_h),Ee(vl),Ee(zu),Ee(yu),Ee(Lu),Ee(Gu),Ee(Vu),Ee(th),Ee(xu),Ee(gs),Ee(hs),Ee(Au),Ee(eh),Ee(Uu),Ee(ps))},Si.\u0275cmp=Yo({type:Si,selectors:[["app-live"]],viewQuery:function(u,l){if(u&1&&($n(sv,5),$n(av,5),$n(lv,7),$n(cv,5)),u&2){let s;Xn(s=Kn())&&(l.directionsPanel=s.first),Xn(s=Kn())&&(l.mapElementRef=s.first),Xn(s=Kn())&&(l.alertSound=s.first),Xn(s=Kn())&&(l.DeleteModal=s.first)}},decls:24,vars:7,consts:[["directionsPanel",""],["map",""],["alertSound",""],["deleteModal",""],["datepicker","ngbDatepicker"],["t",""],["dpFromDate",""],["dpToDate",""],["footerTemplate",""],["invvv",""],[2,"position","relative"],["class","historique_filter fade-in",4,"ngIf"],[4,"ngIf"],[2,"display","none","position","absolute"],[1,"map","map-aniamation"],["id","customControls",1,"button-container"],["size","small",3,"click"],[1,"ri-drag-move-fill"],[1,"ri-map-2-line"],["size","small","title","Rafra\xEEchir l'affichage",3,"click"],[1,"ri-settings-4-line"],["size","small","title","Param\xE9trage",3,"click"],[1,"ri-restart-line"],["class","jss33 jss34 fade-in",4,"ngIf"],["src","assets/sound/alert.mp3","type","audio/mpeg"],[3,"deleteItem"],[1,"historique_filter","fade-in"],[1,"header-btns",2,"border-bottom","1px solid #00000047","margin-bottom","20px"],["href","javascript:void(0)",3,"click"],[2,"position","relative","bottom","4px","margin-left","7px","font-size","17px"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"custom-select",3,"ngModelChange","update","data","ngModel","placeholder"],["id","store_id","resettable","",1,"custom-select",3,"ngModelChange","update","placeholder","data","ngModel","noResultMessage"],[1,"col-md-12","text-center",2,"text-align","center!important"],["id","store_btn","type","submit",1,"btn","btn-theme","ms-auto","mt-4",2,"text-align","center!important","width","100%",3,"click","disabled"],[3,"ngClass"],[1,"alert","alert-warning"],[1,"dp-hidden","position-absolute","custom-dp-dropdown"],[1,"input-group",2,"margin-bottom","10px"],["name","datepicker","ngbDatepicker","","outsideDays","hidden","id","start_date","tabindex","-1","readonly","",1,"form-control",3,"dateSelect","autoClose","displayMonths","dayTemplate","startDate","footerTemplate"],[1,"search-input"],[1,"input-group","custom-dt-picker"],["placeholder","yyyy-mm-dd","name","dpFromDate","id","end_date","readonly","",1,"form-control",3,"input","value"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"ri-calendar-line"],["placeholder","yyyy-mm-dd","name","dpToDate","readonly","",1,"form-control",3,"input","value"],[1,"custom-day",3,"mouseenter","mouseleave"],[1,"my-0"],[1,"btn","btn-primary","btn-sm","m-2","float-start",3,"click"],[1,"btn","btn-secondary","btn-sm","m-2","float-end",3,"click"],[1,"header-btns",2,"border-bottom","1px solid #00000047"],[1,"ri-arrow-left-circle-line",2,"font-size","30px"],[1,"body-controls"],[2,"margin","20px 0","margin-top","15px !important","text-align","center"],[1,"controls"],["type","range","id","range","min","0","max","100",2,"width","90%","margin-right","2px",3,"ngModelChange","input","ngModel"],[1,"speed-selector",2,"display","inline-block","color","white !important","position","relative"],[1,"speed-button",3,"click"],[1,"ri-speed-up-fill",2,"color","white"],["class","popover",4,"ngIf"],[2,"display","inline-block","width","40%","font-size","14px","text-align","left"],[2,"display","inline-block","width","30%","text-align","left","font-size","18px !important"],["href","javascript:void(0)",1,"control-nav",2,"margin-left","0px",3,"click"],[1,"ri-rewind-fill"],["href","javascript:void(0)",1,"control-nav",2,"font-size","25px",3,"click"],["href","javascript:void(0)",1,"control-nav",3,"click"],[1,"ri-speed-fill"],[1,"control-nav",2,"display","inline-block","width","23%","margin-left","0","font-size","14px","text-align","right"],[1,"popover"],[1,"speed_params"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],[1,"header-btns",2,"border-bottom","1px solid #000047","margin-bottom","20px"],[1,"content-filters",2,"overflow-y","scroll","height","50vh"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"goefence-item"],["title","Navigate to this geofence","href","javascript:void(0)",1,"btn-link",2,"text-decoration","none","float","right","font-size","16px","cursor","pointer",3,"click"],[1,"ri-zoom-in-line"],[2,"font-size","18px"],["href","javascript:void(0);",3,"click"],["title","Ajouter un vehicle",1,"ri-add-circle-fill",2,"font-size","23px","position","relative","top","-4px","cursor","pointer"],["title","Refresh",1,"ri-restart-fill",2,"font-size","23px","position","relative","top","-4px","cursor","pointer"],[1,"form-group","w-100",2,"position","relative","margin-bottom","10px","width","96% !important"],["type","text","autocomplete","off","placeholder","Search by vehicle or by driver ..",1,"demo-input","Typeahead-input","form-control-plaintext","w-100","ng-pristine","ng-valid","ng-touched","search_vehicle",3,"ngModelChange","ngModel"],[1,"ri-search-2-line","close-icon",2,"color","white"],["alt","",3,"src"],[2,"margin-top","2px","color","#00f1ff"],[1,"icons_vehicle"],["tabindex","0","type","button","aria-label","Allumage: Non",1,"MuiButtonBase-root","MuiIconButton-root","MuiIconButton-sizeSmall","muiltr-xfvph6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 32 32",1,"jss86"],["fill","currentColor","d","M13.778 6.667v2.222h3.333v2.222h2.222v-2.222h3.333v-2.222h-8.889zM13.778 13.333c-0.3 0-0.579 0.121-0.79 0.321l-1.888 1.901h-2.878c-0.611 0-1.111 0.5-1.111 1.111v6.667c0 0.611 0.5 1.111 1.111 1.111h1.888l3.056 2.033c0.178 0.122 0.39 0.189 0.612 0.189h5.556c0.244 0 0.477-0.077 0.666-0.221l4.444-3.333c0.278-0.211 0.445-0.545 0.445-0.89v-7.778c0-0.611-0.5-1.111-1.111-1.111h-10zM27.111 14.444v6.667h2.222v-6.667h-2.222zM17.111 15.556v3.333h2.222l-3.333 5.556v-3.333h-2.222l3.333-5.556zM2.667 16.667v5.556h2.222v-5.556h-2.222z"],[1,"MuiTouchRipple-root","muiltr-w0pj6f"],["title","Niveau de batterie : 100%","tabindex","0","type","button","aria-label","Niveau de batterie: 100%",1,"MuiButtonBase-root","MuiIconButton-root","MuiIconButton-sizeSmall","muiltr-xfvph6"],["focusable","false","color","green","aria-hidden","true","viewBox","0 0 24 24","data-testid","BatteryChargingFullIcon",1,"MuiSvgIcon-root","MuiSvgIcon-fontSizeSmall","jss83","muiltr-1k33q06"],["d","M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4M11 20v-5.5H9L13 7v5.5h2z"],[1,"container-fluid"],[1,"notice-section"],[1,"notice-content"],[1,"icon-box"],[1,"ri-file-text-line"],[1,"notice-box"],[1,"close-icon"],[1,"ri-close-line"],[1,"jss33","jss34","fade-in"],[1,"MuiPaper-root","MuiPaper-elevation","MuiPaper-rounded","MuiPaper-elevation3","MuiCard-root","jss23","react-draggable","muiltr-69fbpt",2,"transform","translate(0px, 0px)"],[1,"jss26"],[1,"MuiTypography-root","MuiTypography-body2","muiltr-ucj12"],["tabindex","0","type","button",1,"MuiButtonBase-root","MuiIconButton-root","MuiIconButton-sizeSmall","muiltr-xfvph6",3,"click"],["focusable","false","aria-hidden","true","viewBox","0 0 24 24","data-testid","CloseIcon",1,"MuiSvgIcon-root","MuiSvgIcon-fontSizeSmall","muiltr-1k33q06"],["d","M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"MuiCardContent-root","jss27","muiltr-1qw96cp"],[1,"MuiTable-root","jss30","muiltr-1dbcj55"],[1,"MuiTableBody-root","muiltr-1xnox0e"],[1,"MuiTableRow-root","muiltr-iqtr8k"],[1,"MuiTableCell-root","MuiTableCell-body","MuiTableCell-sizeSmall","jss31","muiltr-14lra3h"],[1,"MuiTypography-root","MuiTypography-body2","muiltr-68o8xu"],[1,"MuiCardActions-root","jss32","muiltr-p0pzb2"],["tabindex","0","type","button",1,"MuiButtonBase-root","MuiIconButton-root","MuiIconButton-colorSecondary","MuiIconButton-sizeMedium","muiltr-s6t5ah",3,"click"],[1,"ri-message-3-fill"],["title","Historique","tabindex","0","type","button",1,"MuiButtonBase-root","MuiIconButton-root","MuiIconButton-sizeMedium","muiltr-1egpgfe",3,"click"],[1,"ri-restart-fill"],["tabindex","0","type","button",1,"MuiButtonBase-root","MuiIconButton-root","MuiIconButton-sizeMedium","muiltr-1egpgfe",3,"click"],[1,"ri-upload-2-line"],[1,"ri-pencil-fill"],["tabindex","0","type","button",1,"MuiButtonBase-root","MuiIconButton-root","MuiIconButton-sizeMedium","jss28","muiltr-1egpgfe",3,"click"],[1,"ri-delete-bin-5-fill",2,"color","red"],[1,"status-in_stock"],[1,"status-pending"]],template:function(u,l){if(u&1){let s=ot();I(0,"div",10),Xe(1,bv,3,2,"div",11)(2,Sv,2,1,"div",11)(3,Mv,16,8,"div",11)(4,Pv,19,9,"ng-container",12),Y(5,"div",13,0)(7,"div",14,1),I(9,"div",15)(10,"div",16),se("click",function(){return ie(s),re(l.toggleMapSize())}),Y(11,"i",17),P(),I(12,"div",16),se("click",function(){return ie(s),re(l.button2Clicked())}),Y(13,"i",18),P(),I(14,"div",19),se("click",function(){return ie(s),re(l.settingsMap())}),Y(15,"i",20),P(),I(16,"div",21),se("click",function(){return ie(s),re(l.refresh())}),Y(17,"i",22),P()()(),Xe(18,Ev,72,28,"div",23),I(19,"audio",null,2),Y(21,"source",24),P(),I(22,"app-delete-modal",25,3),se("deleteItem",function(C){return ie(s),re(l.delete(C==null?null:C.actionToPerform,C==null?null:C.data))}),P()}u&2&&(L(),J("ngIf",l.mode=="historique"),L(),J("ngIf",l.mode=="geofences"),L(),J("ngIf",l.mode=="live"&&!l.showNotice),L(),J("ngIf",l.showNotice),L(3),ns("fullscreen",l.isMapFullscreen),L(11),J("ngIf",l.showActionPanel))},dependencies:[Su,ku,rs,qu,ss,Nu,as,ls,us,Xu,Mu,Tu,Pu,cs,bh,yh],styles:['@charset "UTF-8";.map[_ngcontent-%COMP%]{position:absolute;flex:1;height:100vh;width:100%;background-color:transparent;opacity:0;transition:opacity .15s ease-in}.map.visible[_ngcontent-%COMP%]{opacity:1}.infoModal[_ngcontent-%COMP%]{position:absolute;left:20px;right:20px;background-color:var(--whiteColor);border-radius:10px;overflow:hidden}.gm-style-iw-c[_ngcontent-%COMP%]   button[aria-label=Close][_ngcontent-%COMP%]{display:none!important}.circle24[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:12px}.locationBox[_ngcontent-%COMP%]{background-color:var(--whiteColor);padding:15px;margin:20px;border-radius:8px}.calenderAndSeatBox[_ngcontent-%COMP%]{flex:1;background-color:var(--whiteColor);padding:5px;border-radius:8px}ion-datetime[_ngcontent-%COMP%]::part(calendar-day){font-size:14px;font-weight:600;font-family:Montserrat}ion-datetime[_ngcontent-%COMP%]::part(calendar-day):focus{box-shadow:0 0 #9ad16233}#dateTimeSheet[_ngcontent-%COMP%], #seatModal[_ngcontent-%COMP%]{font-size:8.5px}ion-datetime[_ngcontent-%COMP%]{--background: var(--whiteColor)}ion-datetime[_ngcontent-%COMP%]:not(.datetime-placeholder){color:var(--blackColor)}.timePicker[_ngcontent-%COMP%]{--background: transparent;--wheel-highlight-background: rgba(38, 77, 102, .25);border-radius:20px;--background-rgb: 242, 244, 246;width:90%}.button-container[_ngcontent-%COMP%]{position:absolute;top:12px;right:10px;display:flex;flex-direction:column;align-items:flex-end;line-height:2.1;z-index:10000}.button-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-radius:50%;width:30px;height:30px;background-color:#000;text-align:center;color:#fff;margin-bottom:10px;opacity:.9}.button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:10px}.container-actions[_ngcontent-%COMP%]{padding:25pxpx}.container-actions[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.container-actions[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:10px}.col-50[_ngcontent-%COMP%]{width:50%}ion-col[_ngcontent-%COMP%]{text-align:center;margin-bottom:6px!important}.icon-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block}.icon-wrapper[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.badgeNotif[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-10px;background-color:red;color:#fff;border-radius:50%;padding:3px 6px;font-size:12px;line-height:1;text-align:center;min-width:20px;font-weight:700}ion-segment-button[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 10px #00ff00,0 0 20px #00ff00,0 0 30px #00ff00,0 0 40px #00ff00,0 0 50px #00ff00,0 0 60px #00ff00,0 0 70px #00ff00}on-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row}.info[_ngcontent-%COMP%]{margin-left:10px;display:flex;flex-direction:column}.goefence-item[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;border:1px solid rgba(117,117,117,.4509803922)}h3[_ngcontent-%COMP%]{margin-top:2px!important}.historique_filter[_ngcontent-%COMP%]{width:23%;position:absolute;top:10px;left:10px;background-color:#fffc;padding:20px;z-index:10000000;border-radius:10px}.row[_ngcontent-%COMP%]{margin-bottom:15px}.lecture-container[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;border-radius:8px;width:300px;margin:auto;text-align:center;background-color:#f9f9f9}.controls[_ngcontent-%COMP%]{text-align:center}.controls[_ngcontent-%COMP%]   .control-nav[_ngcontent-%COMP%]{font-size:18px;margin-left:20px}.run-btn[_ngcontent-%COMP%]{padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.run-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.spinning[_ngcontent-%COMP%]{padding-right:40px}.spinning[_ngcontent-%COMP%]:before{content:"";width:18px;height:18px;border-radius:50%;right:10px;top:0;position:absolute;border:2px solid white;border-right:3px solid #27ae60;animation:_ngcontent-%COMP%_rotate360 .5s infinite linear}@keyframes _ngcontent-%COMP%_rotate360{to{transform:rotate(360deg)}}select[_ngcontent-%COMP%], input[type=range][_ngcontent-%COMP%]{width:100%;margin-top:5px}.speed-button[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;font-size:20px;color:#333;position:relative}.popover[_ngcontent-%COMP%]{position:absolute;bottom:40px;right:0;background-color:#fff;border:1px solid #ddd;border-radius:4px;box-shadow:0 2px 10px #0003;z-index:1000}.popover[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.popover[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 16px;cursor:pointer;font-size:14px}.popover[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.material-icons[_ngcontent-%COMP%]{font-size:24px}@media (min-width: 900px){.jss34[_ngcontent-%COMP%]{left:calc(50% + 180px);bottom:24px}}.jss34[_ngcontent-%COMP%]{left:50%;z-index:1000000000000000000000000000000000000000000000000;bottom:60px;position:fixed;transform:translate(-50%)}.muiltr-1qw96cp[_ngcontent-%COMP%]{padding:16px}.muiltr-1k33q06[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentcolor;flex-shrink:0;font-size:1.25rem;transition:fill .2s cubic-bezier(.4,0,.2,1)}.jss32[_ngcontent-%COMP%]{justify-content:space-between}.muiltr-p0pzb2[_ngcontent-%COMP%]{display:flex;-webkit-box-align:center;align-items:center;padding:8px}.muiltr-s6t5ah[_ngcontent-%COMP%]{display:inline-flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:middle;appearance:none;text-align:center;font-size:1.5rem;color:#a5d6a7;outline:0px;border-width:0px;border-style:initial;border-color:initial;border-image:initial;margin:0;text-decoration:none;flex:0 0 auto;padding:8px;border-radius:50%;overflow:visible;transition:background-color .15s cubic-bezier(.4,0,.2,1)}.jss26[_ngcontent-%COMP%]{display:flex;padding:8px 8px 0 16px;align-items:center;justify-content:space-between}.jss27[_ngcontent-%COMP%]{overflow:auto;max-height:40vh;padding-top:8px;padding-bottom:8px}.muiltr-1dbcj55[_ngcontent-%COMP%]{display:table;width:100%;border-collapse:collapse;border-spacing:0px}.muiltr-1xnox0e[_ngcontent-%COMP%]{display:table-row-group}.muiltr-iqtr8k[_ngcontent-%COMP%]{color:inherit;display:table-row;vertical-align:middle;outline:0px}.muiltr-68o8xu[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;font-size:.875rem;line-height:1.43;letter-spacing:.01071em}.jss30[_ngcontent-%COMP%]   .MuiTableCell-sizeSmall[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.jss31[_ngcontent-%COMP%]{border-bottom:none}.muiltr-14lra3h[_ngcontent-%COMP%]{font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;font-size:.875rem;line-height:1.43;letter-spacing:.01071em;display:table-cell;vertical-align:inherit;border-bottom:1px solid rgb(81,81,81);text-align:left;padding:6px 16px;color:#fff}.muiltr-ucj12[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;font-size:.875rem;line-height:1.43;letter-spacing:.01071em;color:#ffffffb3}.muiltr-1egpgfe[_ngcontent-%COMP%]{display:inline-flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:middle;appearance:none;text-align:center;font-size:1.5rem;color:#fff;outline:0px;border-width:0px;border-style:initial;border-color:initial;border-image:initial;margin:0;text-decoration:none;flex:0 0 auto;padding:8px;border-radius:50%;overflow:visible;transition:background-color .15s cubic-bezier(.4,0,.2,1)}.muiltr-xfvph6[_ngcontent-%COMP%]{display:inline-flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:middle;appearance:none;text-align:center;color:#fff;font-size:1.125rem;outline:0px;border-width:0px;border-style:initial;border-color:initial;border-image:initial;margin:0;text-decoration:none;flex:0 0 auto;border-radius:50%;overflow:visible;transition:background-color .15s cubic-bezier(.4,0,.2,1);padding:5px}.muiltr-vubbuv[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentcolor;flex-shrink:0;font-size:1.5rem;transition:fill .2s cubic-bezier(.4,0,.2,1)}.jss72[_ngcontent-%COMP%]{color:#f44336}.muiltr-13gh5t3[_ngcontent-%COMP%]{margin:0;font:inherit;color:#9fa8da;text-decoration:none}.muiltr-1qs5x7s[_ngcontent-%COMP%]{margin:0;font:inherit;color:#9fa8da;text-decoration:underline rgba(159,168,218,.4)}.vehicle-item[_ngcontent-%COMP%]{padding:8px;cursor:pointer;margin-bottom:15px}.vehicle-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#789;border-radius:50%;padding:10px;color:#fff;margin-right:10px}.vehicle-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff}.vehicle-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.vehicle-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.icons_vehicle[_ngcontent-%COMP%]{float:right}.vehicle-item[_ngcontent-%COMP%]:hover, .vehicle-item.active[_ngcontent-%COMP%]{text-decoration:none;background-color:#ffffff14}button[_ngcontent-%COMP%]:hover{background-color:#ffffff14}#customControls[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{cursor:pointer}#customControls[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000;animation:transition}.close-icon[_ngcontent-%COMP%]{position:absolute;right:18px;top:50%;transform:translateY(-50%);font-size:18px;color:#000;cursor:pointer}.header-btns[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000;border-radius:50%}.speed_params[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#000}']});var Yn=Si;Xo([os(ju.user)],Yn.prototype,"user$",void 0);Xo([os(br.vehicles)],Yn.prototype,"vehicle$",void 0);Xo([os(br.selectedVehicle)],Yn.prototype,"selectedVehicule$",void 0);var Lv=[{path:"",component:Yn,canActivate:[Yu]}],Ch=(()=>{let c=class c{};c.\u0275fac=function(s){return new(s||c)},c.\u0275mod=Zo({type:c}),c.\u0275inj=Jo({imports:[gl.forChild(Lv),gl]});let f=c;return f})();var L_=(()=>{let c=class c{};c.\u0275fac=function(s){return new(s||c)},c.\u0275mod=Zo({type:c}),c.\u0275inj=Jo({imports:[Iu,Ch,Ju,Wu,Du.forFeature([br])]});let f=c;return f})();export{L_ as LiveModule};
