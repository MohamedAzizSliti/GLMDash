import{a as v}from"./chunk-K5FNPDN3.js";import{a as h,m as n,n as w,p as m}from"./chunk-X2K52VJG.js";import{$ as u,Bc as S,Pc as g,S as d,Y as O,h as a}from"./chunk-V4SAOAZP.js";import{a as p,b as l}from"./chunk-CWTPBX7D.js";var U=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Order] Get";let r=t;return r})(),k=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Order] User";let r=t;return r})(),x=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Order] View";let r=t;return r})(),j=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Order] Checkout";let r=t;return r})(),$=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Order] Place";let r=t;return r})(),b=(()=>{let t=class t{constructor(e,s){this.id=e,this.payload=s}};t.type="[Order] Update Status";let r=t;return r})(),E=(()=>{let t=class t{constructor(){}};t.type="[Order] Clear";let r=t;return r})();var I=(()=>{let t=class t{constructor(e){this.http=e}getOrders(e){return this.http.get(`${h.URL}/order`,{params:e})}viewOrder(e){return this.http.get(`${h.URL}/order/${e}`)}checkout(e){return this.http.post(`${h.URL}/checkout`,e)}placeOrder(e){return this.http.post(`${h.URL}/order`,e)}updateOrderStatus(e,s){return this.http.put(`${h.URL}/order/${e}`,s)}};t.\u0275fac=function(s){return new(s||t)(u(S))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var i,c=(i=class{constructor(t,o,e){this.router=t,this.orderService=o,this.userService=e}static order(t){return t.order}static selectedUser(t){return t.selectedUser}static selectedOrder(t){return t.selectedOrder}static checkout(t){return t.checkout}getOrders(t,o){return this.orderService.getOrders(o?.payload).pipe(d({next:e=>{t.patchState({order:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}selectUser(t,{id:o}){return this.userService.editUser(o).pipe(d({next:e=>{let s=t.getState();t.patchState(l(p({},s),{selectedUser:e,checkout:null}))},error:e=>{throw new Error(e?.error?.message)}}))}viewOrder(t,{id:o}){return this.orderService.viewOrder(o).pipe(d({next:e=>{let s=t.getState();t.patchState(l(p({},s),{selectedOrder:e}))},error:e=>{throw new Error(e?.error?.message)}}))}checkout(t,o){return this.orderService.checkout(o?.payload).pipe(d({next:e=>{let s=t.getState();t.patchState(l(p({},s),{checkout:e}))},error:e=>{throw new Error(e?.error?.message)}}))}placeOrder(t,o){return this.orderService.placeOrder(o?.payload).pipe(d({next:e=>{this.router.navigateByUrl(`/order/details/${e.order_number}`)},error:e=>{throw new Error(e?.error?.message)}}))}updateOrderStatus(t,{id:o,payload:e}){return this.orderService.updateOrderStatus(o,e).pipe(d({next:s=>{if(typeof s=="object"){let f=t.getState(),y=[...f.order.data],R=y.findIndex(L=>L.id===o);y[R]=s,t.patchState(l(p({},f),{order:{data:y,total:f.order.total},selectedOrder:s}))}},error:s=>{throw new Error(s?.error?.message)}}))}clear(t){let o=t.getState();t.patchState(l(p({},o),{selectedUser:null,checkout:null}))}},i.\u0275fac=function(o){return new(o||i)(u(g),u(I),u(v))},i.\u0275prov=O({token:i,factory:i.\u0275fac}),i);a([n(U)],c.prototype,"getOrders",null);a([n(k)],c.prototype,"selectUser",null);a([n(x)],c.prototype,"viewOrder",null);a([n(j)],c.prototype,"checkout",null);a([n($)],c.prototype,"placeOrder",null);a([n(b)],c.prototype,"updateOrderStatus",null);a([n(E)],c.prototype,"clear",null);a([m()],c,"order",null);a([m()],c,"selectedUser",null);a([m()],c,"selectedOrder",null);a([m()],c,"checkout",null);c=a([w({name:"order",defaults:{order:{data:[],total:0},selectedOrder:null,selectedUser:null,checkout:null}})],c);export{U as a,k as b,x as c,j as d,$ as e,b as f,E as g,c as h};
