import{f as zt}from"./chunk-UG2VPS2O.js";import{a as fe}from"./chunk-Q7NGHVH4.js";import{a as Mt,b as Rt,c as Ot,d as Gt}from"./chunk-VSFJDVD2.js";import{a as jt,h as ve}from"./chunk-FWIAH7KG.js";import{a as j}from"./chunk-VTLS4DKO.js";import{a as ue}from"./chunk-NEHVOI7D.js";import{a as $t}from"./chunk-GF7UNAXA.js";import{a as L}from"./chunk-VLZOTMR3.js";import{a as _e}from"./chunk-ISOQKGNC.js";import{$ as rt,$b as It,A as Ge,B as je,Bc as Dt,Dc as At,E as c,G as ze,Ga as _t,Gb as Ct,H as Ue,L as Qe,M as Le,Mb as ce,N as He,O as We,Oa as de,P as Ke,Q as Ye,T as Je,Ua as ft,W as Xe,X as Ze,Y as et,Z as tt,Zb as Q,_ as it,_b as wt,aa as pe,ab as vt,ac as St,ba as nt,bc as Et,ca as at,cc as kt,da as ot,dc as Pt,ec as Ft,fb as gt,fc as qt,hc as Vt,ic as Tt,k as se,l as Me,lb as U,o as $,oa as lt,pa as st,qa as pt,qb as ht,ra as dt,rb as bt,rc as Bt,sa as mt,sc as Nt,ta as ct,ua as ut,x as Re,xb as xt,y as Oe,yb as yt,z as S}from"./chunk-X2K52VJG.js";import{Aa as be,C as he,Ca as i,Da as D,Db as Pe,Eb as Fe,Fb as qe,G as Ie,Ia as ke,Ib as q,Nb as d,Nc as Ae,Ob as m,P as Se,Pc as le,Q as Ee,Qa as g,Qc as $e,Rb as oe,Sa as o,Sc as xe,Ua as R,Vc as me,Wa as ee,Z as X,ab as l,bb as a,bc as Ve,c as ge,cb as _,da as G,db as te,ea as Z,eb as ie,gb as F,h as A,j as Ce,jb as I,jc as Te,kb as v,kc as Be,la as b,ma as x,nb as y,nc as Ne,o as J,q as we,rb as re,sb as ne,tb as ae,ub as O,vc as De,wb as u,xb as C,yb as h}from"./chunk-V4SAOAZP.js";import"./chunk-CWTPBX7D.js";var Zt=["csvModal"],ei=()=>["/product/create"];function ti(n,e){if(n&1){let r=F();l(0,"div",5)(1,"a",6),I("click",function(){b(r);let s=v();return x(s.CSVModal.openModal())}),_(2,"i",7),u(3),d(4,"translate"),a(),l(5,"a",6),I("click",function(){b(r);let s=v();return x(s.export())}),_(6,"i",8),u(7),d(8,"translate"),a(),l(9,"a",9),_(10,"i",10),u(11),d(12,"translate"),a()()}n&2&&(i(3),h(" ",m(4,4,"Import")," "),i(4),h(" ",m(8,6,"Export")," "),i(2),o("routerLink",q(10,ei)),i(2),h(" ",m(12,8,"add_product")," "))}var H=class H{constructor(e,r){this.store=e,this.router=r,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"image",dataField:"product_thumbnail",class:"tbl-image",type:"image",placeholder:"assets/images/product.png"},{title:"name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"sku",dataField:"sku",sortable:!0,sort_direction:"desc"},{title:"price",dataField:"sale_price",type:"price",sortable:!0,sort_direction:"desc"},{title:"stock",dataField:"stock"},{title:"store",dataField:"store_name"},{title:"approved",dataField:"is_approved",type:"switch",canAllow:["admin"]},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"product.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"product.destroy"}],data:[],total:0}}ngOnInit(){this.product$.subscribe(e=>{let r=e?.data?.filter(t=>(t.stock=t.stock_status?`<div class="status-${t.stock_status}"><span>${t.stock_status.replace(/_/g," ")}</span></div>`:"-",t.store_name=t?.store?t?.store?.store_name:"-",t));this.tableConfig.data=e?r:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new Q(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="is_approved"?this.approve(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"?this.deleteAll(e.data):e.actionToPerform=="duplicate"&&this.duplicate(e.data)}edit(e){this.router.navigateByUrl(`/product/edit/${e.id}`)}approve(e){this.store.dispatch(new kt(e.id,e.is_approved))}status(e){this.store.dispatch(new Et(e.id,e.status))}delete(e){this.store.dispatch(new Pt(e.id))}deleteAll(e){this.store.dispatch(new Ft(e))}duplicate(e){this.store.dispatch(new qt(e))}export(){this.store.dispatch(new Vt)}};H.\u0275fac=function(r){return new(r||H)(D(se),D(le))},H.\u0275cmp=G({type:H,selectors:[["app-product"]],viewQuery:function(r,t){if(r&1&&re(Zt,5),r&2){let s;ne(s=ae())&&(t.CSVModal=s.first)}},decls:5,vars:7,consts:[["csvModal",""],[3,"gridClass","title"],["class","d-flex flex-wrap gap-2","button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox","hasDuplicate"],[3,"module"],["button","",1,"d-flex","flex-wrap","gap-2"],["href","javascript:void(0)",1,"align-items-center","btn","btn-outline","me-2",3,"click"],[1,"ri-upload-2-line"],[1,"ri-download-2-line"],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(r,t){if(r&1){let s=F();l(0,"app-page-wrapper",1),g(1,ti,13,11,"div",2),l(2,"app-table",3),I("tableChanged",function(f){return b(s),x(t.onTableChange(f))})("rowClicked",function(f){return b(s),x(t.edit(f))})("action",function(f){return b(s),x(t.onActionClicked(f))}),a()(),_(3,"app-import-csv-modal",4,0)}r&2&&(o("gridClass","col-sm-12")("title","products"),i(),o("hasPermission","product.create"),i(),o("tableConfig",t.tableConfig)("hasCheckbox",!0)("hasDuplicate",!0),i(),o("module","product"))},dependencies:[$e,ht,U,Dt,vt,me]});var K=H;A([$(j.product)],K.prototype,"product$",void 0);function ye(n){let e=n.value;return e==null||e===""||/^\d+(\.\d{1,2})?$/.test(e)?null:{invalidPrice:!0}}var ii=["nav"],M=()=>[];function ri(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"name_is_required")," "))}function ni(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"short_description_is_required")," "))}function ai(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"description_is_required")," "))}function oi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"store_is_required")," "))}function li(n,e){if(n&1&&(l(0,"app-form-fields",31),_(1,"select2",41),d(2,"translate"),d(3,"translate"),d(4,"async"),d(5,"async"),g(6,oi,3,3,"div",33),a()),n&2){let r,t=v(2);o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","store")("for","store")("required",!0),i(),y("noResultMessage",m(2,9,"no_data_found")),o("placeholder",m(3,11,"select_store"))("data",(r=m(4,13,t.store$))!=null&&r.length?m(5,15,t.store$):q(17,M)),i(5),o("ngIf",t.form.controls.store_id.touched&&(t.form.controls.store_id.errors==null?null:t.form.controls.store_id.errors.required))}}function si(n,e){if(n&1&&(l(0,"div",30)(1,"app-form-fields",31),_(2,"input",32),d(3,"translate"),g(4,ri,3,3,"div",33),a(),l(5,"app-form-fields",31),_(6,"textarea",34),d(7,"translate"),l(8,"p",35),u(9),a(),g(10,ni,3,3,"div",33),a(),l(11,"app-form-fields",31)(12,"div",36),_(13,"ngx-editor-menu",37)(14,"ngx-editor",38),g(15,ai,3,3,"div",33),a()(),g(16,li,7,18,"app-form-fields",39),d(17,"async"),d(18,"async"),a()),n&2){let r,t=v();i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","name")("for","name")("required",!0),i(),y("placeholder",m(3,26,"enter_product_name")),i(2),o("ngIf",t.form.controls.name.touched&&(t.form.controls.name.errors==null?null:t.form.controls.name.errors.required)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","short_description")("for","short_description")("required",!0),i(),y("placeholder",m(7,28,"enter_short_description")),i(3),C("*Maximum length should be 300 characters."),i(),o("ngIf",t.form.controls.short_description.touched&&(t.form.controls.short_description.errors==null?null:t.form.controls.short_description.errors.required)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","description")("for","description")("required",!0),i(2),o("editor",t.editor),i(),o("editor",t.editor)("ngModel",t.html)("placeholder","Type here..."),i(),o("ngIf",t.form.controls.description.touched&&(t.form.controls.description.errors==null?null:t.form.controls.description.errors.required)),i(),o("ngIf",((r=m(17,30,t.setting$))==null||r.activation==null?null:r.activation.multivendor)&&((r=m(18,32,t.user$))==null||r.role==null?null:r.role.name)==="admin")}}function pi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"type_is_required")," "))}function di(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"external_url_is_required")," "))}function mi(n,e){if(n&1&&(l(0,"app-form-fields",31),_(1,"input",62),d(2,"translate"),g(3,di,3,3,"div",33),a()),n&2){let r=v(3);o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","external_url")("for","external_url")("required",!0),i(),y("placeholder",m(2,7,"enter_external_url")),i(2),o("ngIf",(r.form==null||r.form.controls.external_url==null?null:r.form.controls.external_url.touched)&&(r.form==null||r.form.controls.external_url==null||r.form.controls.external_url.errors==null?null:r.form.controls.external_url.errors.required))}}function ci(n,e){n&1&&(l(0,"app-form-fields",31),_(1,"input",63),d(2,"translate"),a()),n&2&&(o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","external_button_text")("for","external_button_text")("required",!1),i(),y("placeholder",m(2,6,"enter_external_button_text")))}function ui(n,e){if(n&1&&(te(0),l(1,"app-form-fields",31)(2,"div",48)(3,"label",49),_(4,"input",61)(5,"span",51),a()()(),g(6,mi,4,9,"app-form-fields",39)(7,ci,3,8,"app-form-fields",39),ie()),n&2){let r=v(2);i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","is_external")("for","is_external")("required",!1),i(5),o("ngIf",r.form.controls.is_external.value),i(),o("ngIf",r.form.controls.is_external.value)}}function _i(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"stock_is_required")," "))}function fi(n,e){if(n&1&&(l(0,"app-form-fields",31),_(1,"select2",64),d(2,"translate"),d(3,"translate"),g(4,_i,3,3,"div",33),a()),n&2){let r=v(2);o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","stock_status")("for","stock_status")("required",!0),i(),y("noResultMessage",m(2,9,"no_data_found")),o("placeholder",m(3,11,"select_stock_status"))("data",r.stocks!=null&&r.stocks.length?r.stocks:q(13,M)),i(3),o("ngIf",(r.form==null||r.form.controls.stock_status==null?null:r.form.controls.stock_status.touched)&&(r.form==null||r.form.controls.stock_status==null||r.form.controls.stock_status.errors==null?null:r.form.controls.stock_status.errors.required))}}function vi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"sku_is_required")," "))}function gi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"quantity_is_required")," "))}function hi(n,e){if(n&1&&(l(0,"app-form-fields",31),_(1,"input",65),d(2,"translate"),g(3,gi,3,3,"div",33),a()),n&2){let r=v(2);o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","stock_quantity")("for","quantity")("required",!0),i(),y("placeholder",m(2,7,"enter_quantity")),i(2),o("ngIf",r.form.controls.quantity.touched&&(r.form.controls.quantity.errors==null?null:r.form.controls.quantity.errors.required))}}function bi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"price_is_required")," "))}function xi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"please_enter_a_valid_price")," "))}function yi(n,e){if(n&1&&(l(0,"app-form-fields",31)(1,"div",53)(2,"span",66),u(3),d(4,"async"),d(5,"async"),a(),_(6,"input",67),d(7,"translate"),a(),g(8,bi,3,3,"div",33)(9,xi,3,3,"div",33),a()),n&2){let r,t=v(2);o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","price")("for","price")("required",!0),i(3),h(" ",!((r=m(4,9,t.setting$))==null||r.general==null)&&r.general.default_currency.symbol?(r=m(5,11,t.setting$))==null||r.general==null?null:r.general.default_currency.symbol:"$"," "),i(3),y("placeholder",m(7,13,"enter_price")),i(2),o("ngIf",t.form.controls.price.touched&&(t.form.controls.price.errors==null?null:t.form.controls.price.errors.required)),i(),o("ngIf",t.form.controls.price.touched&&(t.form.controls.price.errors==null?null:t.form.controls.price.errors.invalidPrice))}}function Ci(n,e){n&1&&(l(0,"app-form-fields",31)(1,"div",53),_(2,"input",68),d(3,"translate"),l(4,"span",66),u(5,"%"),a()()()),n&2&&(o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","discount")("for","discount_value")("required",!1),i(2),y("placeholder",m(3,6,"enter_discount")))}function wi(n,e){if(n&1&&(l(0,"app-form-fields",31)(1,"div",53)(2,"span",66),u(3),d(4,"async"),d(5,"async"),a(),_(6,"input",69),a()()),n&2){let r,t,s=v(2);o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","sale_price")("for","sale_price")("required",!1),i(3),h(" ",!((r=m(4,7,s.setting$))==null||r.general==null)&&r.general.default_currency.symbol?(r=m(5,9,s.setting$))==null||r.general==null?null:r.general.default_currency.symbol:"$"," "),i(3),y("value",(((t=s.form.get("price"))==null?null:t.value)-((t=s.form.get("price"))==null?null:t.value)*((t=s.form.get("discount"))==null?null:t.value)/100).toFixed(2))}}function Ii(n,e){if(n&1){let r=F();l(0,"span",70),I("mouseenter",function(){let s=b(r).$implicit,p=v(2);return x(p.hoveredDate=s)})("mouseleave",function(){b(r);let s=v(2);return x(s.hoveredDate=null)}),u(1),a()}if(n&2){let r=e.$implicit,t=e.focused,s=v(2);R("focused",t)("range",s.isRange(r))("faded",s.isHovered(r)||s.isInside(r)),i(),h(" ",r.day," ")}}function Si(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"start_date_is_required")," "))}function Ei(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"end_date_is_required")," "))}function ki(n,e){if(n&1){let r=F();l(0,"div",76)(1,"div",77)(2,"app-form-fields",78)(3,"select2",79),d(4,"translate"),d(5,"async"),d(6,"async"),d(7,"translate"),I("update",function(s){let p=b(r).index,f=v(3);return x(f.updateAttribute(s,p))}),a()()(),l(8,"div",77)(9,"app-form-fields",78)(10,"select2",80),d(11,"translate"),d(12,"translate"),I("update",function(s){let p=b(r).index,f=v(3);return x(f.updateAttributeValue(s,p))}),a()()(),l(13,"div",81)(14,"a",82),I("click",function(){let s=b(r).index,p=v(3);return x(p.removeVariant(s))}),u(15),d(16,"translate"),a()()()}if(n&2){let r,t,s=e.$implicit,p=e.index,f=v(3);y("formGroupName",p),i(2),o("label","attribute")("for","attribute"+p),i(),y("noResultMessage",m(4,13,"no_data_found")),o("data",(r=m(5,15,f.attribute$))!=null&&r.length?m(6,17,f.attribute$):q(27,M))("placeholder",m(7,19,"select_attribute")),i(6),o("label","value")("for","value"+p),i(),y("noResultMessage",m(11,21,"no_data_found")),o("data",(t=s.get("variant_option").value)!=null&&t.length?s.get("variant_option").value:q(28,M))("placeholder",m(12,23,"select_value"))("multiple",!0),i(5),h(" ",m(16,25,"remove")," ")}}function Pi(n,e){if(n&1){let r=F();l(0,"app-button",83),I("click",function(s){b(r);let p=v(3);return x(p.addVariant(s))}),u(1),d(2,"translate"),a()}n&2&&(ee("btn btn-theme mb-4"),o("id","add_variant")("spinner",!1),i(),h(" ",m(2,5,"add_variant")," "))}function Fi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"name_is_required")," "))}function qi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"price_is_required")," "))}function Vi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"please_enter_a_valid_price")," "))}function Ti(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"quantity_is_required")," "))}function Bi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"sku_is_required")," "))}function Ni(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"stock_is_required")," "))}function Di(n,e){if(n&1){let r=F();l(0,"app-form-fields",31),d(1,"translate"),_(2,"input",94),g(3,Fi,3,3,"div",33),a(),l(4,"app-form-fields",31)(5,"div",53)(6,"span",66),u(7),d(8,"async"),d(9,"async"),a(),_(10,"input",95),a(),g(11,qi,3,3,"div",33)(12,Vi,3,3,"div",33),a(),l(13,"app-form-fields",31),d(14,"translate"),l(15,"div",53),_(16,"input",96),d(17,"translate"),l(18,"span",66),u(19,"%"),a()()(),l(20,"app-form-fields",31)(21,"div",53)(22,"span",66),u(23),d(24,"async"),d(25,"async"),a(),_(26,"input",97),a()(),l(27,"app-form-fields",31),d(28,"translate"),_(29,"input",98),g(30,Ti,3,3,"div",33),a(),l(31,"app-form-fields",31),_(32,"input",99),g(33,Bi,3,3,"div",33),a(),l(34,"app-form-fields",31),_(35,"select2",64),d(36,"translate"),d(37,"translate"),g(38,Ni,3,3,"div",33),a(),l(39,"app-form-fields",31)(40,"app-image-upload",100),I("selectedFiles",function(s){b(r);let p=v().index,f=v(4);return x(f.selectVariationImage(s,p))}),a()(),l(41,"app-form-fields",101)(42,"div",48)(43,"label",49),_(44,"input",102)(45,"span",51),a()()()}if(n&2){let r,t,s,p,f,P,B,E,N,T=v(),w=T.$implicit,k=T.index,z=v(4);o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label",m(1,66,"name"))("for","variation_name"+k)("required",!0),i(2),o("id","variation_name"+k),i(),o("ngIf",w.get("name").touched&&((r=w.get("name").errors)==null?null:r.required)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","Price")("for","price"+k)("required",!0),i(3),h(" ",!((t=m(8,68,z.setting$))==null||t.general==null)&&t.general.default_currency.symbol?(t=m(9,70,z.setting$))==null||t.general==null?null:t.general.default_currency.symbol:"$"," "),i(3),o("id","price"+k),i(),o("ngIf",w.get("price").touched&&((s=w.get("price").errors)==null?null:s.required)),i(),o("ngIf",w.get("price").touched&&((p=w.get("price"))==null||p.errors==null?null:p.errors.invalidPrice)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label",m(14,72,"discount"))("for","discount_value"+k)("required",!1),i(3),y("placeholder",m(17,74,"enter_discount")),o("id","discount_value"+k),i(4),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","sale_price")("for","sale_price"+k)("required",!1),i(3),h(" ",!((f=m(24,76,z.setting$))==null||f.general==null)&&f.general.default_currency.symbol?(f=m(25,78,z.setting$))==null||f.general==null?null:f.general.default_currency.symbol:"$"," "),i(3),y("value",(((P=w.get("price"))==null?null:P.value)-((P=w.get("price"))==null?null:P.value)*((P=w.get("discount"))==null?null:P.value)/100).toFixed(2)),o("id","sale_price"+k),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label",m(28,80,"stock_quantity"))("for","quantity"+k)("required",!0),i(2),o("id","quantity"+k),i(),o("ngIf",w.get("quantity").touched&&((B=w.get("quantity").errors)==null?null:B.required)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","sku")("for","sku"+k)("required",!0),i(),o("id","sku"+k),i(),o("ngIf",w.get("sku").touched&&((E=w.get("sku").errors)==null?null:E.required)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","stock_status")("for","stock_status"+k)("required",!0),i(),y("noResultMessage",m(36,82,"no_data_found")),o("placeholder",m(37,84,"select_stock_status"))("data",z.stocks!=null&&z.stocks.length?z.stocks:q(86,M)),i(3),o("ngIf",w.get("stock_status").touched&&((N=w.get("stock_status").errors)==null?null:N.required)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","image")("for","variation_image_id"+k)("required",!1),i(),o("multipleImage",!1)("image",w.get("variation_image").value),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","status")("for","active_variation_status"+k),i(3),o("id","active_variation_status"+k)}}function Ai(n,e){if(n&1&&(l(0,"div",89)(1,"div",90)(2,"button",91),u(3),a()(),l(4,"div",92)(5,"div",93),g(6,Di,46,87,"ng-template"),a()()()),n&2){let r=e.$implicit,t=e.index;y("formGroupName",t),o("collapsed",!1),i(3),C(r.get("variation_name").value)}}function $i(n,e){if(n&1&&(l(0,"div",84)(1,"h3",85),u(2),d(3,"translate"),a(),te(4,86),l(5,"div",87),g(6,Ai,7,3,"div",88),a(),ie(),a()),n&2){let r=v(3);i(2),C(m(3,2,"variants")),i(4),o("ngForOf",r.variationControl==null?null:r.variationControl.controls)}}function Mi(n,e){if(n&1&&(l(0,"div",71),te(1,72),g(2,ki,17,29,"div",73),ie(),g(3,Pi,3,7,"app-button",74),d(4,"async"),g(5,$i,7,4,"div",75),a()),n&2){let r,t=v(2);i(2),o("ngForOf",t.variantControl.controls),i(),o("ngIf",(r=m(4,3,t.attribute$))==null?null:r.length),i(2),o("ngIf",t.variationControl==null||t.variationControl.controls==null?null:t.variationControl.controls.length)}}function Ri(n,e){if(n&1){let r=F();l(0,"div",42)(1,"app-form-fields",31),_(2,"select2",43),d(3,"translate"),d(4,"translate"),g(5,pi,3,3,"div",33),a(),g(6,ui,8,7,"ng-container",44),l(7,"app-form-fields",31),_(8,"input",45),d(9,"translate"),l(10,"p",35),u(11),a()(),l(12,"app-form-fields",31),_(13,"input",46),l(14,"p",35),u(15),a()(),g(16,fi,5,14,"app-form-fields",39),l(17,"app-form-fields",31),_(18,"input",47),d(19,"translate"),g(20,vi,3,3,"div",33),a(),g(21,hi,4,9,"app-form-fields",39)(22,yi,10,15,"app-form-fields",39)(23,Ci,6,8,"app-form-fields",39)(24,wi,7,11,"app-form-fields",39),l(25,"app-form-fields",31)(26,"div",48)(27,"label",49),_(28,"input",50)(29,"span",51),a()()(),l(30,"div")(31,"app-form-fields",31)(32,"div",52)(33,"div",53)(34,"input",54,1),I("dateSelect",function(s){b(r);let p=v();return x(p.onDateSelection(s))}),a(),g(36,Ii,2,7,"ng-template",null,2,oe),a()(),l(38,"div",55)(39,"input",56,3),I("input",function(){b(r);let s=O(40),p=v();return x(p.fromDate=p.validateInput(p.fromDate,s.value))}),a(),l(41,"button",57),I("click",function(){b(r);let s=O(35);return x(s.toggle())}),_(42,"i",58),a()(),g(43,Si,3,3,"div",33),a(),l(44,"app-form-fields",31)(45,"div",55)(46,"input",59,4),I("input",function(){b(r);let s=O(47),p=v();return x(p.toDate=p.validateInput(p.toDate,s.value))}),a(),l(48,"button",57),I("click",function(){b(r);let s=O(35);return x(s.toggle())}),_(49,"i",58),a()(),g(50,Ei,3,3,"div",33),a()(),g(51,Mi,6,5,"div",60),a()}if(n&2){let r=O(37),t=v();i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","type")("for","type")("required",!0),i(),y("noResultMessage",m(3,59,"no_data_found")),o("placeholder",m(4,61,"select_type"))("data",t.productType!=null&&t.productType.length?t.productType:q(67,M)),i(3),o("ngIf",t.form.controls.type.touched&&(t.form.controls.type.errors==null?null:t.form.controls.type.errors.required)),i(),o("ngIf",(t.form.controls.type==null?null:t.form.controls.type.value)=="simple"),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","unit")("for","unit")("required",!1),i(),y("placeholder",m(9,63,"enter_unit")),i(3),C("*Specify the measurement unit, such as 10 Pieces, 1 KG, 1 Ltr, etc."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","weight")("for","weight")("required",!1),i(3),C("*Specify the weight of this product in Gms."),i(),o("ngIf",t.form.controls.type.value=="simple"),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","sku")("for","sku")("required",!0),i(),y("placeholder",m(19,65,"enter_sku")),i(2),o("ngIf",t.form.controls.sku.touched&&(t.form.controls.sku.errors==null?null:t.form.controls.sku.errors.required)),i(),o("ngIf",t.form.controls.type.value=="simple"),i(),o("ngIf",t.form.controls.type.value=="simple"),i(),o("ngIf",t.form.controls.type.value=="simple"),i(),o("ngIf",t.form.controls.type.value=="simple"),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","sale_status")("for","is_sale_enable")("required",!1),i(6),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","Sale Start Date")("for","sale_starts_at")("required",!1),i(3),o("autoClose","outside")("displayMonths",2)("dayTemplate",r)("startDate",t.fromDate),i(5),o("value",t.formatter.format(t.fromDate)),i(4),o("ngIf",(t.form==null||t.form.controls.sale_starts_at==null?null:t.form.controls.sale_starts_at.touched)&&(t.form==null||t.form.controls.sale_starts_at==null||t.form.controls.sale_starts_at.errors==null?null:t.form.controls.sale_starts_at.errors.required)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","Sale End Date")("for","sale_expired_at")("required",!1),i(2),o("value",t.formatter.format(t.toDate)),i(4),o("ngIf",(t.form==null||t.form.controls.sale_expired_at==null?null:t.form.controls.sale_expired_at.touched)&&(t.form==null||t.form.controls.sale_expired_at==null||t.form.controls.sale_expired_at.errors==null?null:t.form.controls.sale_expired_at.errors.required)),i(),o("ngIf",t.form.controls.type.value=="classified")}}function Oi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"categories_is_required")," "))}function Gi(n,e){if(n&1&&(l(0,"div",109),_(1,"img",110),a(),u(2)),n&2){let r=e.data;i(),ee("img-fluid selection-image"),o("src",r.image,be),i(),h(" ",r.name," ")}}function ji(n,e){if(n&1){let r=F();l(0,"app-form-fields",31),d(1,"translate"),l(2,"select2",108),d(3,"translate"),d(4,"async"),d(5,"async"),d(6,"translate"),I("close",function(s){b(r);let p=v(2);return x(p.productDropdown(s))})("search",function(s){b(r);let p=v(2);return x(p.searchProduct(s))}),g(7,Gi,3,4,"ng-template",null,5,oe),a(),l(9,"p",35),u(10),a()()}if(n&2){let r,t=O(8),s=v(2);o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label",m(1,12,"related_products"))("for","related_product_id")("required",!1),i(2),y("noResultMessage",m(3,14,"no_data_found")),o("templates",t)("data",(r=m(4,16,s.products$))!=null&&r.length?m(5,18,s.products$):q(22,M))("placeholder",m(6,20,"select_product"))("customSearchEnabled",!0)("multiple",!0),i(8),C("*Choose a maximum of 6 products for effective related products display.")}}function zi(n,e){if(n&1&&(l(0,"div",109),_(1,"img",110),a(),u(2)),n&2){let r=e.data;i(),ee("img-fluid selection-image"),o("src",r.image,be),i(),h(" ",r.name," ")}}function Ui(n,e){if(n&1){let r=F();l(0,"div",103)(1,"app-form-fields",31)(2,"app-advanced-dropdown",104),d(3,"async"),d(4,"async"),I("selectedItem",function(s){b(r);let p=v();return x(p.selectTagItem(s))}),a()(),l(5,"app-form-fields",31)(6,"app-advanced-dropdown",105),d(7,"async"),d(8,"async"),I("selectedItem",function(s){b(r);let p=v();return x(p.selectCategoryItem(s))}),a(),g(9,Oi,3,3,"div",33),a(),l(10,"app-form-fields",31)(11,"div",48)(12,"label",49),_(13,"input",106)(14,"span",51),a(),l(15,"p",35),u(16),a()()(),g(17,ji,11,23,"app-form-fields",39),l(18,"app-form-fields",31)(19,"select2",107),d(20,"translate"),d(21,"translate"),I("close",function(s){b(r);let p=v();return x(p.productDropdown(s))})("search",function(s){b(r);let p=v();return x(p.searchProduct(s))}),g(22,zi,3,4,"ng-template",null,5,oe),a(),l(24,"p",35),u(25),a()()()}if(n&2){let r,t,s,p=O(23),f=v();i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","tags")("for","tags")("required",!1),i(),o("position","bottom")("selectedOption",f.selectedTags)("options",!((r=m(3,38,f.tag$))==null||r.data==null)&&r.data.length?(r=m(4,40,f.tag$))==null?null:r.data:q(50,M)),i(3),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","categories")("for","categories")("required",!0),i(),o("position","bottom")("selectedOption",f.selectedCategories)("options",!((t=m(7,42,f.category$))==null||t.data==null)&&t.data.length?(t=m(8,44,f.category$))==null?null:t.data:q(51,M))("subArrayKey","subcategories")("id","categories"),i(3),o("ngIf",f.form.controls.categories.touched&&(f.form.controls.categories.errors==null?null:f.form.controls.categories.errors.required)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","random_related_product")("for","is_random_related_products")("required",!1),i(6),C("*Enabling this option allows the backend to randomly select 6 products for display."),i(),o("ngIf",!((s=f.form.get("is_random_related_products"))!=null&&s.value)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","cross_sell_products")("for","cross_sell_products")("required",!1),i(),y("noResultMessage",m(20,46,"no_data_found")),o("templates",p)("data",f.collectionProduct!=null&&f.collectionProduct.length?f.collectionProduct:q(52,M))("placeholder",m(21,48,"select_product"))("customSearchEnabled",!0)("multiple",!0),i(6),C("*Choose a maximum of 3 products for effective cross-selling display.")}}function Qi(n,e){if(n&1){let r=F();l(0,"div",111)(1,"app-form-fields",31)(2,"app-image-upload",112),d(3,"async"),I("selectedFiles",function(s){b(r);let p=v();return x(p.selectThumbnail(s))}),a()(),l(4,"app-form-fields",31)(5,"app-image-upload",113),d(6,"async"),I("selectedFiles",function(s){b(r);let p=v();return x(p.selectImages(s))}),a()(),l(7,"app-form-fields",31)(8,"app-image-upload",112),d(9,"async"),I("selectedFiles",function(s){b(r);let p=v();return x(p.selectSizeImage(s))}),a()()()}if(n&2){let r,t,s,p=v();i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","thumbnail")("for","product_thumbnail_id")("required",!1),i(),o("multipleImage",!1)("image",(r=m(3,24,p.product$))==null?null:r.product_thumbnail)("helpText","*Upload image size 600x600px recommended"),i(2),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","images")("for","product_galleries_id")("required",!1),i(),o("multipleImage",!0)("images",(t=m(6,26,p.product$))==null?null:t.product_galleries)("helpText","*Upload image size 600x600px recommended"),i(2),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","Size Chart")("for","size_chart_image_id")("required",!1),i(),o("multipleImage",!1)("image",(s=m(9,28,p.product$))==null?null:s.size_chart_image)("helpText","*Upload an image showcasing the size chart tailored for fashion products. A table format image is suggested for easy reference.")}}function Li(n,e){if(n&1){let r=F();l(0,"div",114)(1,"app-form-fields",31),_(2,"input",115),d(3,"translate"),a(),l(4,"app-form-fields",31),_(5,"textarea",116),d(6,"translate"),a(),l(7,"app-form-fields",31)(8,"app-image-upload",100),d(9,"async"),I("selectedFiles",function(s){b(r);let p=v();return x(p.selectMetaImage(s))}),a()()()}if(n&2){let r,t=v();i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","meta_title")("for","meta_title")("required",!1),i(),y("placeholder",m(3,19,"enter_meta_title")),i(2),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","meta_description")("for","meta_desc")("required",!1),i(),y("placeholder",m(6,21,"enter_meta_description")),i(2),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","meta_image")("for","meta_image")("required",!1),i(),o("multipleImage",!1)("image",(r=m(9,23,t.product$))==null?null:r.product_meta_image)}}function Hi(n,e){n&1&&(l(0,"div",40),u(1),d(2,"translate"),a()),n&2&&(i(),h(" ",m(2,1,"tax_is_required")," "))}function Wi(n,e){if(n&1&&(l(0,"div",117)(1,"app-form-fields",31)(2,"div",48)(3,"label",49),_(4,"input",118)(5,"span",51),a()()(),l(6,"app-form-fields",31),_(7,"select2",119),d(8,"translate"),d(9,"translate"),d(10,"async"),d(11,"async"),g(12,Hi,3,3,"div",33),a(),l(13,"app-form-fields",31),_(14,"input",120),d(15,"translate"),l(16,"p",35),u(17),a()(),l(18,"app-form-fields",31),_(19,"input",121),d(20,"translate"),l(21,"p",35),u(22),a()()()),n&2){let r,t=v();i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","free_shipping")("for","free_shipping")("required",!1),i(5),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","tax")("for","tax")("required",!0),i(),y("noResultMessage",m(8,29,"no_data_found")),o("placeholder",m(9,31,"select_tax"))("data",(r=m(10,33,t.tax$))!=null&&r.length?m(11,35,t.tax$):q(41,M))("id","tax_id"),i(5),o("ngIf",t.form.controls.tax_id.touched&&(t.form.controls.tax_id.errors==null?null:t.form.controls.tax_id.errors.required)),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","estimated_delivery_text")("for","estimated_delivery_text")("required",!1),i(),y("placeholder",m(15,37,"enter_estimated_delivery_text")),i(3),C("*Specify delivery text e.g Your order is likely to reach you within 5 to 10 days."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","return_policy_text")("for","return_policy_text")("required",!1),i(),y("placeholder",m(20,39,"enter_return_policy_text")),i(3),C("*Specify return text e.g Hassle free 7, 15 and 30 days return might be available.")}}function Ki(n,e){n&1&&(l(0,"div",122)(1,"app-form-fields",31)(2,"div",48)(3,"label",49),_(4,"input",123)(5,"span",51),a(),l(6,"p",35),u(7),a()()(),l(8,"app-form-fields",31)(9,"div",48)(10,"label",49),_(11,"input",124)(12,"span",51),a(),l(13,"p",35),u(14),a()()(),l(15,"app-form-fields",31)(16,"div",48)(17,"label",49),_(18,"input",125)(19,"span",51),a(),l(20,"p",35),u(21),a()()(),l(22,"app-form-fields",31)(23,"div",48)(24,"label",49),_(25,"input",126)(26,"span",51),a(),l(27,"p",35),u(28),a()()(),l(29,"app-form-fields",31)(30,"div",48)(31,"label",49),_(32,"input",127)(33,"span",51),a(),l(34,"p",35),u(35),a()()(),l(36,"app-form-fields",31)(37,"div",48)(38,"label",49),_(39,"input",128)(40,"span",51),a(),l(41,"p",35),u(42),a()()(),l(43,"app-form-fields",31)(44,"div",48)(45,"label",49),_(46,"input",129)(47,"span",51),a(),l(48,"p",35),u(49),a()()(),l(50,"app-form-fields",31)(51,"div",48)(52,"label",49),_(53,"input",130)(54,"span",51),a(),l(55,"p",35),u(56),a()()(),l(57,"app-form-fields",31)(58,"div",48)(59,"label",49),_(60,"input",131)(61,"span",51),a(),l(62,"p",35),u(63),a()()()()),n&2&&(i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","featured")("for","product_featured")("required",!1),i(6),C("*Enabling this option will display a Featured tag on the product."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","safe_checkout")("for","safe_checkout")("required",!1),i(6),C("*A safe checkout image will appear on the product page. Modify the image in the theme options."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","secure_checkout")("for","secure_checkout")("required",!1),i(6),C("*A secure checkout image will appear on the product page. Modify the image in the theme options."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","social_share")("for","social_share")("required",!1),i(6),C("*Enable this option to allow users to share the product on social media platforms."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","encourage_order")("for","encourage_order")("required",!1),i(6),C("*A random order count between 1 and 100 will be displayed to motivate user purchases."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","encourage_view")("for","encourage_view")("required",!1),i(6),C("*this feature encourages users to view products by presenting engaging content or prompts."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","trending")("for","is_trending")("required",!1),i(6),C("*Enabling this will showcase the product in the sidebar of the product page as a trending item."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","return")("for","return")("required",!1),i(6),C("*Enable to make the product eligible for returns."),i(),o("labelClass","form-label-title col-sm-3 mb-0")("gridClass","col-sm-9")("label","status")("for","status")("required",!1),i(6),C("*Toggle between Enabled and Disabled to control the availability of the product for purchase."))}function Qt(n){return new pe(n.year,n.month,n.day)}var W=class W{constructor(e,r,t,s,p,f,P,B){this.store=e,this.route=r,this.router=t,this.formBuilder=s,this.calendar=p,this.formatter=f,this.renderer=P,this.document=B,this.active="general",this.selectedCategories=[],this.selectedTags=[],this.variationCombinations=[],this.retrieveVariants=!1,this.variantCount=0,this.hoveredDate=null,this.destroy$=new ge,this.html="",this.notification_methode=zt,this.selectedMethodeNotif=[],this.productType=[{value:"simple",label:"Simple"},{value:"classified",label:"Classified"}],this.stocks=[{value:"in_stock",label:"In Stock"},{value:"out_of_stock",label:"Out of Stock"}],this.filter={search:"",paginate:15,ids:"",with_union_products:0,is_approved:1},this.variants=[{id:null,attribute_values:null,options:null,variant_option:null}],this.variations=[],this.search=new ge,this.store.dispatch(new $t({status:1,is_approved:1})),this.store.dispatch(new Bt({status:1})),this.store.dispatch(new Nt({status:1})),this.store.dispatch(new Ct({type:"product",status:1})),this.store.dispatch(new Tt({type:"product",status:1})),this.store.dispatch(new jt({status:1})),this.attribute$=this.store.select(L.attributes).pipe(J(E=>E(""))),this.form=this.formBuilder.group({name:new c("",[S.required]),short_description:new c("",[S.required]),description:new c("",[S.required]),store_id:new c,type:new c("simple",[S.required]),is_external:new c(0),external_url:new c,external_button_text:new c,unit:new c,weight:new c,stock_status:new c("in_stock",[]),sku:new c("",[S.required]),quantity:new c("",[S.required]),price:new c("",[S.required,ye]),discount:new c,is_sale_enable:new c(0),sale_starts_at:new c,sale_expired_at:new c,tags:new c,categories:new c("",[S.required]),is_random_related_products:new c(0),related_products:new c,cross_sell_products:new c([]),product_thumbnail_id:new c,product_galleries_id:new c,size_chart_image_id:new c,variants:this.formBuilder.array([],[]),variations:this.formBuilder.array([],[]),attributes_ids:new c([]),meta_title:new c,meta_description:new c,product_meta_image_id:new c,safe_checkout:new c(1),secure_checkout:new c(1),social_share:new c(1),encourage_order:new c(1),encourage_view:new c(1),is_free_shipping:new c(0),tax_id:new c("",[S.required]),estimated_delivery_text:new c,return_policy_text:new c,is_featured:new c(0),is_trending:new c(0),is_return:new c(1),status:new c(1)})}get variantControl(){return this.form.get("variants")}get variationControl(){return this.form.get("variations")}ngOnInit(){this.search.pipe(he(300)).subscribe(e=>{this.filter.search=e,this.store.dispatch(new Q(this.filter))}),this.route.params.pipe(Se(e=>e.id?this.store.dispatch(new It(e.id)).pipe(we(()=>this.store.select(j.selectedProduct))):Ce()),Ee(this.destroy$)).subscribe(e=>{if(e?.related_products&&e?.cross_sell_products){let r=[...e?.related_products,...e?.cross_sell_products];this.filter.paginate=r?.length>=15?r?.length:15,this.filter.ids=r?.join(),this.filter.with_union_products=r?.length?r?.length>=15?0:1:0}this.store.dispatch(new Q(this.filter)).subscribe({next:()=>{this.fromDate=e?.sale_starts_at?Qt(this.formatter.parse(e?.sale_starts_at)):null,this.toDate=e?.sale_expired_at?Qt(this.formatter.parse(e?.sale_expired_at)):null,this.selectedCategories=e?.categories.map(p=>p?.id),this.selectedTags=e?.tags.map(p=>p?.id);let r=e?.attributes.map(p=>p?.id),t=e?.product_galleries.map(p=>p?.id);e&&(this.product=e),this.id=e?.id,this.form.patchValue({name:e?.name,short_description:e?.short_description,description:e?.description,store_id:e?.store_id,type:e?.type,is_external:e?.is_external,external_url:e?.external_url,external_button_text:e?.external_button_text,unit:e?.unit,weight:e?.weight,stock_status:e?.stock_status,sku:e?.sku,quantity:e?.quantity,price:e?.price,discount:e?.discount,is_sale_enable:e?.is_sale_enable,sale_starts_at:e?.sale_starts_at,sale_expired_at:e?.sale_expired_at,tags:this.selectedTags,categories:this.selectedCategories,is_random_related_products:e?.is_random_related_products,related_products:e?.related_products,cross_sell_products:e?.cross_sell_products,product_thumbnail_id:e?.product_thumbnail_id,product_galleries_id:t,size_chart_image_id:e?.size_chart_image_id,attributes_ids:r,meta_title:e?.meta_title,meta_description:e?.meta_description,product_meta_image_id:e?.product_meta_image_id,safe_checkout:e?.safe_checkout,secure_checkout:e?.secure_checkout,social_share:e?.social_share,encourage_order:e?.encourage_order,encourage_view:e?.encourage_view,is_free_shipping:e?.is_free_shipping,is_return:e?.is_return,tax_id:e?.tax_id,estimated_delivery_text:e?.estimated_delivery_text,return_policy_text:e?.return_policy_text,is_featured:e?.is_featured,is_trending:e?.is_trending,status:e?.status});let s=r?.map(p=>{let f=e?.variations.filter(E=>E.attribute_values.some(N=>N?.attribute_id==p)),P=f?.reduce((E,N)=>{let T=N.attribute_values.filter(w=>w?.attribute_id==p).map(w=>w?.id);return T?[...new Set([...E,...T])]:E},[]),B=f?.reduce((E,N)=>{let T=N.attribute_values.find(w=>w.attribute_id==p);return E.some(w=>w?.value==T?.id)||E.push({label:T?.value,value:T?.id}),E},[]);return{id:p,attribute_values:P,options:B,variant_option:[]}});this.variants=s,this.variations=e?.variations,e?.type=="classified"?(this?.variants?.forEach(p=>{this.variantControl.push(this.formBuilder.group({id:new c(p?.id,[]),attribute_values:new c(p?.attribute_values,[]),options:new c(p?.options,[]),variant_option:new c(p?.variant_option,[])}))}),this.retrieveVariants=!0):this.clearVariations()}})}),this.type=="create"&&this.variants.forEach(e=>this.variantControl.push(this.formBuilder.group({id:new c(e?.id,[]),attribute_values:new c(e?.attribute_values,[]),options:new c(e?.attribute_values,[]),variant_option:new c(e?.variant_option,[])}))),this.variantControl.valueChanges.pipe(he(200),Ie()).subscribe(e=>{let r=e.filter(p=>p.id!=null).map(p=>p.id);this.attribute$=this.store.select(L.attributes).pipe(J(p=>p(r.join(","))));let t=e.filter(p=>p.attribute_values!=null),s=t?.map(p=>p.id);this.form.controls.attributes_ids.setValue(s),this.variationCombinations=this.generateCombinations(t),this.addVariation()}),this.products$.subscribe(e=>{this.collectionProduct=e?.length?e.filter(r=>r?.data?.type=="simple"&&r?.data?.stock_status=="in_stock"):[]}),this.setting$.subscribe(e=>{e?.activation?.multivendor?this.form.controls.store_id.setValidators([S.required]):this.form.controls.store_id.removeValidators([])}),this.user$.subscribe(e=>{e?.role&&e?.role?.name=="vendor"&&this.form.controls.store_id.setValue(e.store?.id)}),this.form.controls.type.valueChanges.subscribe(e=>{e=="simple"?(this.form.setControl("quantity",new c("",[S.required])),this.form.setControl("price",new c("",[S.required])),this.form.setControl("discount",new c),this.form.setControl("is_external",new c(0)),this.form.controls.is_external.valueChanges.subscribe(r=>{r==!0?(this.form.setControl("external_url",new c("",[S.required])),this.form.setControl("external_button_text",new c)):(this.form.removeControl("external_url"),this.form.removeControl("external_button_text"))})):(this.form.removeControl("quantity"),this.form.removeControl("price"),this.form.removeControl("discount"),this.form.removeControl("is_external"),this.form.removeControl("external_url"),this.form.removeControl("external_button_text"))}),this.editor=new Gt}productFilter(e){this.filter.search=e.search,this.filter.ids=this.filter.search.length?"":this.product?.related_products?.join(),this.filter.paginate=this.product?.related_products?.length>=15?this.product?.related_products?.length:15,this.store.dispatch(new Q(this.filter)),this.renderer.addClass(this.document.body,"loader-none")}productDropdown(e){e.innerSearchText&&this.search.next("")}searchProduct(e){this.search.next(e.search)}addVariant(e){e.preventDefault(),this.variantControl.push(this.formBuilder.group({id:new c,attribute_values:new c,options:new c,variant_option:new c}))}removeVariant(e){this.variantControl.length<=1||this.variantControl.removeAt(e)}getAttributeValues(e){return this.store.select(L.attribute_value).pipe(J(r=>r(e||null)))}updateAttribute(e,r){let s=this.form.get("variants").at(r),p=null;this.getAttributeValues(e?+e?.value:null).subscribe(f=>p=f),s.patchValue({variant_option:p}),this.variantCount++,this.retrieveVariants||s.patchValue({attribute_values:null,options:null}),this.variantCount==this.variants?.length&&(this.retrieveVariants=!1)}onDateSelection(e){!this.fromDate&&!this.toDate?this.fromDate=e:this.fromDate&&!this.toDate&&e&&e.after(this.fromDate)?this.toDate=e:(this.toDate=null,this.fromDate=e),this.fromDate&&this.form.controls.sale_starts_at.setValue(`${this.fromDate.year}-${this.fromDate.month}-${this.fromDate.day}`),this.toDate&&this.form.controls.sale_expired_at.setValue(`${this.toDate?.year}-${this.toDate?.month}-${this.toDate?.day}`)}isHovered(e){return this.fromDate&&!this.toDate&&this.hoveredDate&&e.after(this.fromDate)&&e.before(this.hoveredDate)}isInside(e){return this.toDate&&e.after(this.fromDate)&&e.before(this.toDate)}isRange(e){return e.equals(this.fromDate)||this.toDate&&e.equals(this.toDate)||this.isInside(e)||this.isHovered(e)}validateInput(e,r){let t=this.formatter.parse(r);return t&&this.calendar.isValid(pe.from(t))?pe.from(t):e}updateAttributeValue(e,r){this.form.get("variants").at(r).patchValue({options:e?.options})}clearVariations(){this.form.get("variations").clear()}addVariation(){this.clearVariations(),this.variationCombinations.length&&this.variationCombinations.forEach(e=>{let r=this.variations.findIndex(s=>s.attribute_values.every(p=>e?.attribute_values.includes(+p?.id))),t;r!=-1&&this.variations[r]&&(t=this.variations[r]),this.variationControl.push(this.formBuilder.group({id:new c(t?.id,[]),variation_name:new c(e?.name,[]),name:new c(t?.name,[S.required]),price:new c(t?.price,[S.required,ye]),discount:new c(t?.discount,[]),stock_status:new c(t?.stock_status?t?.stock_status:"in_stock",[S.required]),sku:new c(t?.sku,[S.required]),quantity:new c(t?.quantity,[S.required]),variation_image_id:new c(t?.variation_image_id,[]),variation_image:new c(t?.variation_image,[]),attribute_values:new c(e?.attribute_values,[]),status:new c(t?+t?.status:1)}))})}removeVariation(e){this.variationControl.length<=1||this.variationControl.removeAt(e)}selectCategoryItem(e){Array.isArray(e)&&this.form.controls.categories.setValue(e)}selectTagItem(e){Array.isArray(e)&&this.form.controls.tags.setValue(Array.isArray(e)?e:[])}selectThumbnail(e){Array.isArray(e)||this.form.controls.product_thumbnail_id.setValue(e?e.id:null)}selectImages(e){let r=Array.isArray(e)?e?.map(t=>t.id):[];this.form.controls.product_galleries_id.setValue(r)}selectSizeImage(e){Array.isArray(e)||this.form.controls.size_chart_image_id.setValue(e?e.id:null)}selectMetaImage(e){Array.isArray(e)||this.form.controls.product_meta_image_id.setValue(e?e.id:null)}selectVariationImage(e,r){this.form.get("variations").at(+r).patchValue({variation_image_id:e?e.id:""})}generateCombinations(e,r=0,t="",s=[]){if(r>=e.length)return s.length?[{name:t.replace(/\/$/,""),attribute_values:s}]:[];let p=e[r],f=p.options,P=[];if(f?.length===1){let B=f[0],E=`${t}${B.label}/`,N=[...s,...p?.attribute_values],T=this.generateCombinations(e,r+1,E,N);P.push(...T)}else for(let B=0;B<f?.length;B++){let E=f?.[B],N=E?.value,T=`${t}${E.label}/`,w=[...s,N],k=this.generateCombinations(e,r+1,T,w);P.push(...k)}return P}submit(){this.form.markAllAsTouched();let e=new wt(this.form.value);if(this.form.controls.type.value=="simple"&&(this.form.controls.attributes_ids.setValue([]),this.clearVariations()),this.type=="edit"&&this.id&&(e=new St(this.form.value,this.id)),this.form.valid)this.store.dispatch(e).subscribe({complete:()=>{this.form.controls.product_thumbnail_id.setValue(""),this.form.controls.product_galleries_id.setValue(""),this.router.navigateByUrl("/product")}}),this.tabError=null;else{let r=Object?.keys(this.form?.controls).find(s=>this.form.controls[s].invalid),t=document.querySelector(`#${r}`)?.closest("div.tab")?.getAttribute("tab");t&&(this.nav.select(t),this.tabError=t)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};W.\u0275fac=function(r){return new(r||W)(D(se),D(Ae),D(le),D(Je),D(nt),D(at),D(ke),D(Ve))},W.\u0275cmp=G({type:W,selectors:[["app-form-product"]],viewQuery:function(r,t){if(r&1&&re(ii,5),r&2){let s;ne(s=ae())&&(t.nav=s.first)}},inputs:{type:"type"},decls:53,vars:42,consts:[["nav","ngbNav"],["datepicker","ngbDatepicker"],["t",""],["dpFromDate",""],["dpToDate",""],["template",""],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[1,"vertical-tabs"],[1,"row"],[1,"col-xl-3","col-lg-4"],["ngbNav","","orientation","vertical",1,"nav-pills",3,"activeIdChange","activeId"],["ngbNavItem","general","id","general"],["ngbNavLink",""],[1,"ri-settings-line"],["ngbNavContent",""],["ngbNavItem","inventory","id","inventory"],[1,"ri-file-list-line"],["ngbNavItem","setup","id","setup"],[1,"ri-tools-line"],["ngbNavItem","images","id","images"],[1,"ri-image-line"],["ngbNavItem","seo","id","seo"],[1,"ri-earth-line"],["ngbNavItem","shipping","id","shipping"],[1,"ri-truck-line"],["ngbNavItem","status","id","status"],[1,"ri-checkbox-circle-line"],[1,"col-xl-7","col-lg-8"],[3,"ngbNavOutlet"],[3,"id"],["tab","general",1,"tab"],[3,"labelClass","gridClass","label","for","required"],["id","name","type","text","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["id","sort_description","rows","3","formControlName","short_description",1,"form-control",3,"placeholder"],[1,"help-text"],[1,"custom-editor"],[3,"editor"],["formControlName","description",3,"editor","ngModel","placeholder"],[3,"labelClass","gridClass","label","for","required",4,"ngIf"],[1,"invalid-feedback"],["formControlName","store_id","id","store_id","resettable","",1,"custom-select",3,"placeholder","data","noResultMessage"],["tab","inventory",1,"tab"],["formControlName","type",1,"custom-select",3,"placeholder","data","noResultMessage"],[4,"ngIf"],["id","unit","type","text","formControlName","unit",1,"form-control",3,"placeholder"],["id","weight","type","number","placeholder","Enter weight Gms (e.g 100)","formControlName","weight",1,"form-control"],["id","sku","type","text","formControlName","sku",1,"form-control",3,"placeholder"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","is_sale_enable","formControlName","is_sale_enable"],[1,"switch-state"],[1,"dp-hidden","position-absolute","custom-dp-dropdown"],[1,"input-group"],["name","datepicker","ngbDatepicker","","outsideDays","hidden","tabindex","-1","readonly","",1,"form-control",3,"dateSelect","autoClose","displayMonths","dayTemplate","startDate"],[1,"input-group","custom-dt-picker"],["placeholder","yyyy-mm-dd","name","dpFromDate","readonly","",1,"form-control",3,"input","value"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"ri-calendar-line"],["placeholder","yyyy-mm-dd","name","dpToDate","readonly","",1,"form-control",3,"input","value"],["class","variant-box border-top",4,"ngIf"],["type","checkbox","id","is_external","formControlName","is_external"],["id","external_url","type","url","formControlName","external_url",1,"form-control",3,"placeholder"],["id","external_button_text","type","text","formControlName","external_button_text",1,"form-control",3,"placeholder"],["formControlName","stock_status",1,"custom-select",3,"placeholder","data","noResultMessage"],["id","quantity","type","number","formControlName","quantity",1,"form-control",3,"placeholder"],[1,"input-group-text"],["id","price","type","number","formControlName","price",1,"form-control",3,"placeholder"],["id","discount_value","type","number","min","0","max","100","oninput","if (value > 100) value = 100; if (value < 0) value = 0;","formControlName","discount",1,"form-control",3,"placeholder"],["id","sale_price","type","number","placeholder","sale price","readonly","",1,"form-control","disabled",3,"value"],[1,"custom-day",3,"mouseenter","mouseleave"],[1,"variant-box","border-top"],["formArrayName","variants"],["class","row",3,"formGroupName",4,"ngFor","ngForOf"],[3,"class","id","spinner","click",4,"ngIf"],["class","shipping-accordion variant-accordion",4,"ngIf"],[1,"row",3,"formGroupName"],[1,"col-sm-5","variant-row"],[3,"label","for"],["formControlName","id","resettable","",1,"custom-select","d-block",3,"update","data","placeholder","noResultMessage"],["formControlName","attribute_values",1,"custom-select","d-block",3,"update","data","placeholder","noResultMessage","multiple"],[1,"col-sm-2","delete-variant"],["href","javascript:void(0)",1,"invalid-feedback",3,"click"],[3,"click","id","spinner"],[1,"shipping-accordion","variant-accordion"],[1,"form-label-title","mb-2"],["formArrayName","variations"],["ngbAccordion",""],["ngbAccordionItem","",3,"collapsed","formGroupName",4,"ngFor","ngForOf"],["ngbAccordionItem","",3,"collapsed","formGroupName"],["ngbAccordionHeader",""],["ngbAccordionButton",""],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["type","text","placeholder","Enter Name","formControlName","name",1,"form-control",3,"id"],["type","number","placeholder","Enter Price","formControlName","price",1,"form-control",3,"id"],["type","number","min","0","max","100","oninput","if (value > 100) value = 100; if (value < 0) value = 0;","formControlName","discount",1,"form-control",3,"id","placeholder"],["type","number","placeholder","Enter sale price","readonly","",1,"form-control",3,"id","value"],["type","number","placeholder","Enter Quantity","formControlName","quantity",1,"form-control",3,"id"],["type","text","placeholder","Enter SKU","formControlName","sku",1,"form-control",3,"id"],[3,"selectedFiles","multipleImage","image"],[3,"labelClass","gridClass","label","for"],["type","checkbox","formControlName","status",3,"id"],["tab","setup",1,"tab"],[3,"selectedItem","position","selectedOption","options"],[3,"selectedItem","position","selectedOption","options","subArrayKey","id"],["type","checkbox","id","is_random_related_products","formControlName","is_random_related_products"],["formControlName","cross_sell_products",1,"custom-select",3,"close","search","templates","data","placeholder","noResultMessage","customSearchEnabled","multiple"],["formControlName","related_products",1,"custom-select",3,"close","search","templates","data","placeholder","noResultMessage","customSearchEnabled","multiple"],[1,"image"],[3,"src"],["tab","images",1,"tab"],[3,"selectedFiles","multipleImage","image","helpText"],[3,"selectedFiles","multipleImage","images","helpText"],["tab","seo",1,"tab"],["id","meta_title","type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["id","meta_desc","rows","3","formControlName","meta_description",1,"form-control",3,"placeholder"],["tab","shipping",1,"tab"],["type","checkbox","id","free_shipping","formControlName","is_free_shipping"],["formControlName","tax_id","resettable","",1,"custom-select",3,"placeholder","data","id","noResultMessage"],["id","estimated_delivery_text","type","text","formControlName","estimated_delivery_text",1,"form-control",3,"placeholder"],["id","return_policy_text","type","text","formControlName","return_policy_text",1,"form-control",3,"placeholder"],["tab","status",1,"tab"],["type","checkbox","id","product_featured","formControlName","is_featured"],["type","checkbox","id","safe_checkout","formControlName","safe_checkout"],["type","checkbox","id","secure_checkout","formControlName","secure_checkout"],["type","checkbox","id","social_share","formControlName","social_share"],["type","checkbox","id","encourage_order","formControlName","encourage_order"],["type","checkbox","id","encourage_view","formControlName","encourage_view"],["type","checkbox","id","is_trending","formControlName","is_trending"],["type","checkbox","id","return","formControlName","is_return"],["type","checkbox","id","status","formControlName","status"]],template:function(r,t){if(r&1){let s=F();l(0,"form",6),I("ngSubmit",function(){return b(s),x(t.submit())}),l(1,"div",7)(2,"div",8)(3,"div",9)(4,"ul",10,0),qe("activeIdChange",function(f){return b(s),Fe(t.active,f)||(t.active=f),x(f)}),l(6,"li",11)(7,"a",12),_(8,"i",13),u(9),d(10,"translate"),a(),g(11,si,19,34,"ng-template",14),a(),l(12,"li",15)(13,"a",12),_(14,"i",16),u(15),d(16,"translate"),a(),g(17,Ri,52,68,"ng-template",14),a(),l(18,"li",17)(19,"a",12),_(20,"i",18),u(21),d(22,"translate"),a(),g(23,Ui,26,53,"ng-template",14),a(),l(24,"li",19)(25,"a",12),_(26,"i",20),u(27),d(28,"translate"),a(),g(29,Qi,10,30,"ng-template",14),a(),l(30,"li",21)(31,"a",12),_(32,"i",22),u(33),d(34,"translate"),a(),g(35,Li,10,25,"ng-template",14),a(),l(36,"li",23)(37,"a",12),_(38,"i",24),u(39),d(40,"translate"),a(),g(41,Wi,23,42,"ng-template",14),a(),l(42,"li",25)(43,"a",12),_(44,"i",26),u(45),d(46,"translate"),a(),g(47,Ki,64,54,"ng-template",14),a()()(),l(48,"div",27),_(49,"div",28),a()(),l(50,"app-button",29),u(51),d(52,"translate"),a()()()}if(r&2){let s=O(5);o("formGroup",t.form),i(4),Pe("activeId",t.active),i(2),R("is-invalid",t.tabError=="general"),i(3),C(m(10,26,"general")),i(3),R("is-invalid",t.tabError=="inventory"),i(3),C(m(16,28,"inventory")),i(3),R("is-invalid",t.tabError=="setup"),i(3),C(m(22,30,"setup")),i(3),R("is-invalid",t.tabError=="images"),i(3),C(m(28,32,"images")),i(3),R("is-invalid",t.tabError=="seo"),i(3),C(m(34,34,"seo")),i(3),R("is-invalid",t.tabError=="shipping"),i(3),C(m(40,36,"shipping_&_tax")),i(3),R("is-invalid",t.tabError=="status"),i(3),C(m(46,38,"status")),i(4),o("ngbNavOutlet",s),i(),o("id","product_btn"),i(),h(" ",m(52,40,t.type=="create"?"save_product":"update_product")," ")}},dependencies:[Te,Be,et,rt,it,tt,Xe,Ze,ot,lt,dt,pt,st,ct,mt,ut,ze,Oe,Ue,Re,Ge,je,Ye,Ke,Qe,We,Le,He,gt,bt,xt,yt,ft,Mt,Rt,Ne,me],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:300px!important}.dp-hidden[_ngcontent-%COMP%]{width:0;margin:0;border:none;padding:0}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0da487;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#009289}.error-border[_ngcontent-%COMP%]{border:1px solid #f00;padding:3px;border-radius:11px}"]});var V=W;A([$(_t.user)],V.prototype,"user$",void 0);A([$(j.selectedProduct)],V.prototype,"product$",void 0);A([$(j.products)],V.prototype,"products$",void 0);A([$(ue.stores)],V.prototype,"store$",void 0);A([$(ce.category)],V.prototype,"category$",void 0);A([$(fe.tag)],V.prototype,"tag$",void 0);A([$(ve.taxes)],V.prototype,"tax$",void 0);A([$(de.setting)],V.prototype,"setting$",void 0);var Ht=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=G({type:e,selectors:[["app-create-product"]],decls:2,vars:3,consts:[[3,"gridClass","title"],[3,"type"]],template:function(s,p){s&1&&(l(0,"app-page-wrapper",0),_(1,"app-form-product",1),a()),s&2&&(o("gridClass","col-sm-12")("title","add_product"),i(),o("type","create"))},dependencies:[U,V]});let n=e;return n})();var Wt=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=G({type:e,selectors:[["app-edit-product"]],decls:2,vars:3,consts:[[3,"gridClass","title"],[3,"type"]],template:function(s,p){s&1&&(l(0,"app-page-wrapper",0),_(1,"app-form-product",1),a()),s&2&&(o("gridClass","col-sm-12")("title","edit_product"),i(),o("type","edit"))},dependencies:[U,V]});let n=e;return n})();var Yi=[{path:"",component:K,canActivate:[_e],data:{permission:"product.index"}},{path:"create",component:Ht,canActivate:[_e],data:{permission:["product.index","product.create"]}},{path:"edit/:id",component:Wt,canActivate:[_e],data:{permission:["product.index","product.edit"]}}],Kt=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Z({type:e}),e.\u0275inj=X({imports:[xe.forChild(Yi),xe]});let n=e;return n})();var _n=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Z({type:e}),e.\u0275inj=X({imports:[De,Kt,At,Ot,Me.forFeature([j,ue,L,ce,fe,ve,de])]});let n=e;return n})();export{_n as ProductModule};
