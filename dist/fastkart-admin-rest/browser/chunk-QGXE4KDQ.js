import{a as ce,b as fe,c as ue,d as he,e as ve,f as xe,g as Ce,h as x}from"./chunk-FWIAH7KG.js";import{a as A}from"./chunk-ISOQKGNC.js";import{A as Y,B as Z,Dc as de,E as k,G as ee,H as te,L as ie,O as re,P as oe,Q as ae,T as ne,Ua as pe,ab as me,k as I,l as J,lb as v,o as K,qb as se,rb as le,x as Q,y as X,z as D}from"./chunk-X2K52VJG.js";import{Ca as o,Da as d,Ib as L,Nb as c,Nc as H,Ob as f,P as $,Pc as F,Q as G,Qa as y,Qc as z,Sa as n,Sc as N,Vc as M,Z as _,ab as p,bb as m,c as B,cb as s,da as l,ea as w,h as j,j as q,jb as S,kc as O,nb as U,q as V,vc as W,wb as u,xb as R,yb as b}from"./chunk-V4SAOAZP.js";import"./chunk-CWTPBX7D.js";var Ie=()=>["/tax/create"];function ke(t,e){t&1&&(p(0,"div",3)(1,"a",4),s(2,"i",5),u(3),c(4,"translate"),m()()),t&2&&(o(),n("routerLink",L(4,Ie)),o(2),b(" ",f(4,2,"add_tax")," "))}var C=class C{constructor(e,h){this.store=e,this.router=h,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"tax.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"tax.destroy"}],data:[],total:0}}ngOnInit(){this.tax$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new ce(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"&&this.deleteAll(e.data)}edit(e){this.router.navigateByUrl(`/tax/edit/${e.id}`)}status(e){this.store.dispatch(new ve(e.id,e.status))}delete(e){this.store.dispatch(new xe(e.id))}deleteAll(e){this.store.dispatch(new Ce(e))}};C.\u0275fac=function(h){return new(h||C)(d(I),d(F))},C.\u0275cmp=l({type:C,selectors:[["app-tax"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(h,i){h&1&&(p(0,"app-page-wrapper",0),y(1,ke,5,5,"div",1),p(2,"app-table",2),S("tableChanged",function(a){return i.onTableChange(a)})("rowClicked",function(a){return i.edit(a)})("action",function(a){return i.onActionClicked(a)}),m()()),h&2&&(n("gridClass","col-sm-12")("title","taxes"),o(),n("hasPermission","tax.create"),o(),n("tableConfig",i.tableConfig)("hasCheckbox",!0))},dependencies:[z,se,v,me,M]});var g=C;j([K(x.tax)],g.prototype,"tax$",void 0);function Me(t,e){t&1&&(p(0,"div",12),u(1),c(2,"translate"),m()),t&2&&(o(),b(" ",f(2,1,"name_is_required")," "))}function Ae(t,e){t&1&&(p(0,"div",12),u(1),c(2,"translate"),m()),t&2&&(o(),b(" ",f(2,1,"rate_is_required")," "))}var E=(()=>{let e=class e{constructor(i,r,a,P){this.store=i,this.route=r,this.router=a,this.formBuilder=P,this.destroy$=new B,this.form=this.formBuilder.group({name:new k("",[D.required]),rate:new k("",[D.required]),status:new k(1)})}ngOnInit(){this.route.params.pipe($(i=>i.id?this.store.dispatch(new ue(i.id)).pipe(V(()=>this.store.select(x.selectedTax))):q()),G(this.destroy$)).subscribe(i=>{this.id=i?.id,this.form.patchValue({name:i?.name,rate:i?.rate,status:i?.status})})}submit(){this.form.markAllAsTouched();let i=new fe(this.form.value);this.type=="edit"&&this.id&&(i=new he(this.form.value,this.id)),this.form.valid&&this.store.dispatch(i).subscribe({complete:()=>{this.router.navigateByUrl("/tax")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};e.\u0275fac=function(r){return new(r||e)(d(I),d(H),d(F),d(ne))},e.\u0275cmp=l({type:e,selectors:[["app-form-tax"]],inputs:{type:"type"},decls:20,vars:21,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","placeholder","Enter tax name","name","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"input-group"],["type","number","min","0","max","100","oninput","if (value > 100) value = 100; if (value < 0) value = 0;","name","rate","formControlName","rate",1,"form-control",3,"placeholder"],[1,"input-group-text"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"]],template:function(r,a){r&1&&(p(0,"form",0),S("ngSubmit",function(){return a.submit()}),p(1,"app-form-fields",1),c(2,"translate"),s(3,"input",2),y(4,Me,3,3,"div",3),m(),p(5,"app-form-fields",1)(6,"div",4),s(7,"input",5),c(8,"translate"),p(9,"span",6),u(10,"%"),m()(),y(11,Ae,3,3,"div",3),m(),p(12,"app-form-fields",1)(13,"div",7)(14,"label",8),s(15,"input",9)(16,"span",10),m()()(),p(17,"app-button",11),u(18),c(19,"translate"),m()()),r&2&&(n("formGroup",a.form),o(),n("label",f(2,15,"name"))("for","name")("required",!0),o(3),n("ngIf",a.form.controls.name.touched&&(a.form.controls.name.errors==null?null:a.form.controls.name.errors.required)),o(),n("label","rate")("for","rate")("required",!0),o(2),U("placeholder",f(8,17,"enter_rate")),o(4),n("ngIf",a.form.controls.rate.touched&&(a.form.controls.rate.errors==null?null:a.form.controls.rate.errors.required)),o(),n("label","status")("for","status")("required",!1),o(5),n("id","tax_btn"),o(),R(f(19,19,a.type=="create"?"save_tax":"update_tax")))},dependencies:[O,ee,X,te,Q,Y,Z,ae,oe,ie,re,le,pe,M]});let t=e;return t})();var ge=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=l({type:e,selectors:[["app-create-tax"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,a){r&1&&(p(0,"app-page-wrapper",0),s(1,"app-form-tax",1),m()),r&2&&(n("title","add_tax"),o(),n("type","create"))},dependencies:[v,E]});let t=e;return t})();var Te=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=l({type:e,selectors:[["app-edit-tax"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,a){r&1&&(p(0,"app-page-wrapper",0),s(1,"app-form-tax",1),m()),r&2&&(n("title","edit_tax"),o(),n("type","edit"))},dependencies:[v,E]});let t=e;return t})();var Ee=[{path:"",component:g,canActivate:[A],data:{permission:"tax.index"}},{path:"create",component:ge,canActivate:[A],data:{permission:["tax.index","tax.create"]}},{path:"edit/:id",component:Te,canActivate:[A],data:{permission:["tax.index","tax.edit"]}}],_e=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=w({type:e}),e.\u0275inj=_({imports:[N.forChild(Ee),N]});let t=e;return t})();var ht=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=w({type:e}),e.\u0275inj=_({imports:[W,_e,de,J.forFeature([x])]});let t=e;return t})();export{ht as TaxModule};
